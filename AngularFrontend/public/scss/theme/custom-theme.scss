@use 'sass:map';
@use '@angular/material' as mat;
@use './theme-colors' as theme-colors;

//mat.$cyan-palette,
html {
  @include mat.theme((color: mat.$cyan-palette,
      typography: Poppins,
      density: -2));
}

:root {
  @include mat.card-overrides((title-text-size: 1.2rem,
      title-text-line-height: 1.6rem));

  @include mat.tooltip-overrides((container-color: map.get(theme-colors.$primary-palette, 20),
      container-shape: 16px,
    ));

  @include mat.table-overrides((header-headline-color: #fff,
      row-item-outline-color: #e5e7eb,
      row-item-container-height:35px));

  // OUK Brand Colors
  --ouk-teal: #037c91;
  --ouk-coral: #ff7f50;

  // OUK Teal Table Headers
  th,
  .mat-header-cell {
    background-color: var(--ouk-teal) !important;
    color: #ffffff !important;
    font-weight: 500 !important;
    text-transform: uppercase !important;
    font-size: 0.75rem !important;
    letter-spacing: 0.5px !important;
  }

  @include mat.progress-bar-overrides((active-indicator-color: map.get(theme-colors.$primary-palette, 10),
      track-color: map.get(theme-colors.$primary-palette, 70)));

  @include mat.datepicker-overrides((calendar-date-selected-state-background-color: map.get(theme-colors.$primary-palette, 30),
      calendar-date-selected-state-text-color: map.get(theme-colors.$primary-palette, 100),
      calendar-date-today-outline-color: map.get(theme-colors.$primary-palette, 30),
      calendar-date-hover-state-background-color: map.get(theme-colors.$primary-palette, 30),
      calendar-date-in-comparison-range-state-background-color : map.get(theme-colors.$primary-palette, 30),
      calendar-date-in-overlap-range-selected-state-background-color : map.get(theme-colors.$primary-palette, 30),
      calendar-date-in-overlap-range-state-background-color : map.get(theme-colors.$primary-palette, 30),
      calendar-date-today-selected-state-outline-color : map.get(theme-colors.$primary-palette, 30),
      calendar-date-in-range-state-background-color : map.get(theme-colors.$primary-palette, 30),
      calendar-date-preview-state-outline-color : map.get(theme-colors.$primary-palette, 30)));

  @include mat.option-overrides((selected-state-label-text-color: #f9faf4,
      selected-state-layer-color: map.get(theme-colors.$primary-palette, 30),
      hover-state-layer-color: #f9faf4,
    ));

  @include mat.pseudo-checkbox-overrides((full-selected-icon-color: map.get(theme-colors.$primary-palette, 30),
    ));

  @include mat.checkbox-overrides((selected-focus-icon-color: map.get(theme-colors.$primary-palette, 30),
      selected-icon-color: map.get(theme-colors.$primary-palette, 30),
    ));

  @include mat.progress-spinner-overrides((active-indicator-color: map.get(theme-colors.$primary-palette, 30),
    ));

  @include mat.fab-overrides((small-container-color: map.get(theme-colors.$primary-palette, 20),
      small-foreground-color: map.get(theme-colors.$primary-palette, 100)));
}

.primary {

  @include mat.button-overrides((filled-container-color: #ff7f50, // coral background
      filled-label-text-color: #fff, // text
      filled-container-shape: 4px));

  @include mat.card-overrides(( // border color
      elevated-container-color: #e7e8e4, // bg color
    ));

  @include mat.snack-bar-overrides((container-color: map.get(theme-colors.$primary-palette, 20), // background
      supporting-text-color: map.get(theme-colors.$primary-palette, 100),
      button-color : map.get(theme-colors.$primary-palette, 100)));

  @include mat.datepicker-overrides((calendar-container-background-color: map.get(theme-colors.$primary-palette, 20),
      calendar-body-label-text-color: map.get(theme-colors.$primary-palette, 100),
    ));

  @include mat.fab-overrides((small-container-color: map.get(theme-colors.$primary-palette, 20),
      small-foreground-color: map.get(theme-colors.$primary-palette, 100)));
}


.tertiary {
  @include mat.button-overrides((filled-container-color: map.get(theme-colors.$tertiary-palette, 20), // background
      filled-label-text-color: map.get(theme-colors.$tertiary-palette, 100),
      filled-container-shape: 4px // text
    ));

  @include mat.fab-overrides((small-container-color: map.get(theme-colors.$tertiary-palette, 20),
      small-foreground-color: map.get(theme-colors.$tertiary-palette, 100)));
}

.secondary {
  @include mat.button-overrides((filled-container-color: map.get(theme-colors.$secondary-palette, 20), // background
      filled-label-text-color: map.get(theme-colors.$secondary-palette, 100),
      filled-container-shape: 4px // text
    ));
  @include mat.card-overrides(( // border color
      outlined-container-shape: 12px, // corner radius
      elevated-container-color: #f9faf4, // bg color
    ));

  @include mat.fab-overrides((small-container-color: map.get(theme-colors.$secondary-palette, 20),
      small-foreground-color: map.get(theme-colors.$secondary-palette, 100)));
}

.neutral {
  @include mat.button-overrides((filled-container-color: map.get(theme-colors.$neutral-palette, 20), // background
      filled-label-text-color: map.get(theme-colors.$neutral-palette, 100),
      filled-container-shape: 4px // text
    ));

  @include mat.fab-overrides((small-container-color: map.get(theme-colors.$neutral-palette, 100),
      small-foreground-color: map.get(theme-colors.$neutral-palette, 20)));
}

.warning {
  @include mat.button-overrides((filled-container-color: map.get(mat.$yellow-palette, 60), // background
      filled-label-text-color: map.get(mat.$yellow-palette, 100),
      filled-container-shape: 4px // text
    ));
  @include mat.snack-bar-overrides((container-color: map.get(theme-colors.$warning-palette, 30), // background
      supporting-text-color: map.get(theme-colors.$neutral-palette, 20),
      button-color : map.get(mat.$yellow-palette, 100)));

  @include mat.fab-overrides((small-container-color: map.get(theme-colors.$warning-palette, 30),
      small-foreground-color: map.get(theme-colors.$neutral-palette, 20)));
}

.error {
  @include mat.button-overrides((filled-container-color: map.get(mat.$red-palette, 30), // background
      filled-label-text-color: map.get(mat.$red-palette, 100), // text
      filled-container-shape: 4px));

  @include mat.icon-button-overrides((icon-color: map.get(mat.$red-palette, 30),
      // text
    ));

  @include mat.snack-bar-overrides((container-color: map.get(mat.$red-palette, 30), // background
      supporting-text-color: map.get(mat.$yellow-palette, 100),
      button-color : map.get(mat.$yellow-palette, 100)));

  @include mat.fab-overrides((small-container-color: map.get(mat.$red-palette, 100),
      small-foreground-color: map.get(mat.$red-palette, 30)));
}

.success {
  @include mat.button-overrides((filled-container-color: #037c91, // teal background
      filled-label-text-color: #fff, // text
      filled-container-shape: 4px));

  @include mat.snack-bar-overrides((container-color: #037c91, // background
      supporting-text-color: #fff,
      button-color : #fff)); // text

  @include mat.fab-overrides((small-container-color: #037c91,
      small-foreground-color: #fff));
}

// Global button overrides for Teal and Coral
.btn-primary {
  background-color: #ff7f50 !important; // Coral for primary actions
  border-color: #ff7f50 !important;
  color: #fff !important;
}

.btn-info,
.btn-success {
  background-color: #037c91 !important; // Teal for secondary/info actions
  border-color: #037c91 !important;
  color: #fff !important;
}

// --- Table Action Icons Redefined ---
// The user wants action icons in tables to be Coral.
// We target icon-only buttons (mat-icon-button) and individual icons in tables.

.mat-mdc-icon-button,
.mat-icon-button {
  .mat-icon {
    color: #ff7f50 !important; // Global Coral for action buttons
  }

  &:hover {
    background-color: rgba(255, 127, 80, 0.1) !important;
  }
}

// Ensure icons in solid "Action" buttons (like matMiniFab primary) are visible.
// In our case, Primary is Coral, so the icon should be white for contrast.
.mat-mdc-mini-fab.primary,
.mat-mdc-button-base.primary {
  .mat-icon {
    color: #ffffff !important;
  }
}

// Icons in table cells that are not inside solid buttons (e.g., status icons, comment icons)
td .mat-icon:not(.mat-mdc-button-base .mat-icon):not(.mat-icon-button .mat-icon) {
  color: #ff7f50 !important;
}

// Input focus states
.mat-mdc-form-field-focus-indicator {
  background-color: #037c91 !important;
}

// --- Creative & Classy Enhancements ---

// 1. Smooth transitions for all interactive elements
button,
a,
input,
.mat-mdc-card,
.mat-drawer,
.sidebar {
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
}

// 2. Modern Card Aesthetics
.mat-mdc-card,
.mat-card {
  border-radius: 12px !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03) !important;
  border: 1px solid rgba(0, 0, 0, 0.05) !important;
  background-color: #ffffff !important;
  overflow: hidden;

  &:hover {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.04) !important;
  }
}

// 3. Refined Form Inputs - Modern Minimalist
.form-control,
input.mat-mdc-input-element {
  border-radius: 8px !important;
  padding: 10px 15px !important;
  border: 1.5px solid #e2e8f0 !important;
  font-size: 0.9rem !important;
  background-color: #f8fafc !important;

  &:focus {
    border-color: #037c91 !important;
    box-shadow: 0 0 0 3px rgba(3, 124, 145, 0.1) !important;
    background-color: #fff !important;
    outline: none !important;
  }
}

// 4. Classy Breadcrumbs & Typography
.breadcrumb-item,
.breadcrumb-title,
.page-title {

  a,
  span {
    color: #037c91 !important;
    font-weight: 500;
  }

  .mat-icon {
    vertical-align: middle;
    margin: 0 4px;
    font-size: 1.2rem;
  }
}

// 5. Scrollbar Styling for a premium feel
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f5f9;
}

::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 10px;

  &:hover {
    background: #037c91;
  }
}

// 6. Header refinement
.navbar {
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.03) !important;
  border-bottom: 1px solid #f1f5f9 !important;
}