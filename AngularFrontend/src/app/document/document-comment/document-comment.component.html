<mat-dialog-content>
  <div class="d-flex">
    <div class="me-auto p-2">
      <span class="mb-3 page-title">
        {{ "COMMENT" | translate }}
        <app-page-help-text [code]="'DOCUMENT_COMMENTS'"></app-page-help-text>
      </span>
    </div>
    <div class="d-flex justify-content-end mb-2">
      <mat-icon class="close-icon text-danger cursor-pointer " (click)="closeDialog()">cancel</mat-icon>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <div class="list-group">
        @for (documentComment of documentComments; track documentComment) {
        <div class="list-group-item list-group-item-action" [attr.aria-current]="true">
          <span class="mb-1">
            <span *hasClaim="['ALL_DELETE_COMMENT','ASSIGNED_DELETE_COMMENT']" role="button" class="badge"
              (click)="onDelete(documentComment.id??'')">
              <mat-icon class="medium-icon text-danger">delete</mat-icon>
            </span>
            {{documentComment.comment}}
          </span>
          <div class="w-100">
            <small class="mr-2">
              {{'BY' | translate}} <small class="text-primary">{{documentComment?.createdBy}}
              </small>
              {{'AT' | translate}}
              {{documentComment.createdDate | utcToLocalTime:'shortDate'}}
            </small>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <form [formGroup]="commentForm" class="mt-3">
        <div class="form-group">
          <textarea class="form-control" formControlName="comment" rows="3"></textarea>
          @if (commentForm.get('comment')?.touched && commentForm.get('comment')?.errors) {
          <div>
            @if (commentForm.get('comment')?.errors?.['required']) {
            <div class="text-danger">
              {{'COMMENT_IS_REQUIRED' | translate}}
            </div>
            }
          </div>
          }
        </div>
        <div class="col-md-12 mt-2">
          <button *hasClaim="['ALL_ADD_COMMENT','ASSIGNED_ADD_COMMENT']" (click)="addComment()" type="submit"
            class="btn btn-success">
            <mat-icon class="medium-icon fs-5 align-middle">message</mat-icon>
            {{'ADD_COMMENT' | translate}}
          </button>
        </div>
      </form>
    </div>
  </div>
</mat-dialog-content>
