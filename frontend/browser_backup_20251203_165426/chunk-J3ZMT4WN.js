import{a as Ne}from"./chunk-TVXBOX2R.js";import{a as xe,b as ge,c as Se,d as Te,e as Fe,f as Ie}from"./chunk-3ULJSOY5.js";import{a as be,b as ke,c as Me,d as Ae}from"./chunk-KBYUC6BL.js";import"./chunk-7UZYWCAJ.js";import{a as Re,b as Ee}from"./chunk-55DV7QCW.js";import{a as he,b as De,c as ye}from"./chunk-SJIWHW3R.js";import"./chunk-ZL3HBFEV.js";import"./chunk-PT2JM3JA.js";import"./chunk-4U6IWAJM.js";import"./chunk-73AGG5TT.js";import"./chunk-BEIMTKK4.js";import{a as ee,b as te}from"./chunk-YCBFVA3Y.js";import{a as K}from"./chunk-ZXWR2MAY.js";import"./chunk-G4LST2RF.js";import"./chunk-NJY6F3LT.js";import{c as Ce}from"./chunk-GYIDN45C.js";import"./chunk-G5E2PA5H.js";import"./chunk-DXL7FQB3.js";import"./chunk-F2N2VWHU.js";import"./chunk-AHHITDV2.js";import"./chunk-QPRQJRAS.js";import{c as ve}from"./chunk-PJSVLHWR.js";import"./chunk-546GNQSA.js";import{b as O,c as Q,e as L,f as G}from"./chunk-2DXU6Z77.js";import{b as X}from"./chunk-WC3ZMFX5.js";import{b as Z}from"./chunk-UFOTACYY.js";import{a as z}from"./chunk-RKRBEXQJ.js";import"./chunk-C3OPHOKD.js";import{e as fe}from"./chunk-F3ENXN4Q.js";import{C as ue,E as _e,c as ie,e as A,h as ne,i as re,o as ae,r as oe,s as le,t as me,u as de,v as ce,w as pe,x as se}from"./chunk-KYSGX4IW.js";import"./chunk-LCPYESOB.js";import"./chunk-BFSIXXTJ.js";import{a as H,b as P}from"./chunk-P6E4AR6Q.js";import{ta as $,va as j}from"./chunk-GDJX5AXE.js";import{$ as k,Ca as f,Da as v,Db as c,Ea as N,Eb as p,Fa as V,Ga as F,Ha as I,Ia as D,Ja as r,Ka as n,La as E,Pa as B,Pc as W,Qa as q,Rc as J,Sa as M,Ua as y,W as i,Wa as R,eb as g,ga as U,jb as m,ka as Y,kb as x,lb as u,p as S,q as T,vb as w}from"./chunk-KZMFGXDY.js";import"./chunk-W3TJXGK4.js";import"./chunk-H5HZ6YB3.js";var Ue=(t,l)=>l==null?null:l.id,qe=(t,l)=>l.id;function Ye(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"SUBJECT_IS_REQUIRED")," "))}function Oe(t,l){if(t&1&&(r(0,"div"),f(1,Ye,3,3,"div",28),n()),t&2){let e,o=R();i(),v(!((e=o.reminderForm.get("subject"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Qe(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"MESSAGE_IS_REQUIRED")," "))}function Le(t,l){if(t&1&&(r(0,"div"),f(1,Qe,3,3,"div",28),n()),t&2){let e,o=R();i(),v(!((e=o.reminderForm.get("message"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Ge(t,l){if(t&1&&(r(0,"option",33),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;D("value",e==null?null:e.id),i(),u(" ",p(2,2,e==null||e.name==null?null:e.name.toUpperCase())," ")}}function $e(t,l){t&1&&(r(0,"div")(1,"div",28),m(2),c(3,"translate"),n()()),t&2&&(i(2),u(" ",p(3,1,"FREQUENCY_IS_REQUIRED")," "))}function je(t,l){if(t&1){let e=M();r(0,"div",19)(1,"div",29)(2,"label",30),m(3),c(4,"translate"),n(),r(5,"select",31),y("change",function(){S(e);let a=R();return T(a.onFrequencyChange())}),r(6,"option",32),m(7),c(8,"translate"),n(),F(9,Ge,3,4,"option",33,Ue),n(),f(11,$e,4,3,"div"),n()()}if(t&2){let e,o=R();i(3),u(" ",p(4,3,"FREQUENCY")),i(4),u("--",p(8,5,"NONE"),"--"),i(2),I(o.reminderFrequencies),i(2),v(!((e=o.reminderForm.get("frequency"))==null||e.errors==null)&&e.errors.required?11:-1)}}function He(t,l){if(t&1&&(r(0,"div",39),B(1,40),r(2,"mat-checkbox",41),m(3),c(4,"translate"),n(),q(),n()),t&2){let e,o=l.$implicit,a=l.$index;i(),D("formGroupName",a),i(2),u(" ",p(4,2,(e=o.get("name"))==null?null:e.value.toUpperCase())," ")}}function Pe(t,l){if(t&1&&(r(0,"div",35)(1,"label",37),m(2),c(3,"translate"),n(),r(4,"div",38),F(5,He,5,4,"div",39,N),n()()),t&2){let e=R(2);i(2),x(p(3,1,"WEEK_DAYS")),i(3),I(e.dailyRemindersArray.controls)}}function We(t,l){if(t&1&&(r(0,"mat-radio-button",45),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;D("value",e.id),i(),x(p(2,2,e.name))}}function Je(t,l){if(t&1&&(r(0,"div",35)(1,"label",42),m(2),c(3,"translate"),n(),r(4,"div",43)(5,"mat-radio-group",44),F(6,We,3,4,"mat-radio-button",45,N),n()()()),t&2){let e=R(2);i(2),x(p(3,1,"WEEK_DAYS")),i(4),I(e.dayOfWeek)}}function Ke(t,l){if(t&1&&(r(0,"option",33),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;D("value",e.id),i(),u(" ",p(2,2,e.name)," ")}}function ze(t,l){if(t&1&&(r(0,"option",33),m(1),n()),t&2){let e=l.$implicit;D("value",e),i(),u(" ",e," ")}}function Xe(t,l){t&1&&(r(0,"div")(1,"div",28),m(2),c(3,"translate"),n()()),t&2&&(i(2),u(" ",p(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function Ze(t,l){if(t&1){let e=M();r(0,"tr"),B(1,40),r(2,"td"),m(3),c(4,"translate"),n(),r(5,"td")(6,"select",50),y("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(7,Ke,3,4,"option",33,qe),n()(),r(9,"td")(10,"select",51),y("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(11,ze,2,2,"option",33,V),n(),f(13,Xe,4,3,"div"),n(),q(),n()}if(t&2){let e,o,a,d=l.$implicit,C=l.$index,s=R(3);i(),D("formGroupName",C),i(2),u(" ",p(4,3,(e=d.get("name"))==null?null:e.value)," "),i(4),I((o=d.get("monthValues"))==null?null:o.value),i(4),I(s.days),i(2),v((a=d.get("day"))!=null&&a.touched&&(d!=null&&d.hasError("invalidDate"))?13:-1)}}function et(t,l){if(t&1&&(r(0,"div",36)(1,"label",46),m(2),c(3,"translate"),n(),r(4,"div",47)(5,"table",48)(6,"thead")(7,"tr"),E(8,"th"),r(9,"th"),m(10),c(11,"translate"),n(),r(12,"th"),m(13),c(14,"translate"),n()()(),r(15,"tbody",49),F(16,Ze,14,5,"tr",null,N),n()()()()),t&2){let e=R(2);i(2),x(p(3,3,"SELECT_QUARTER_DATE")),i(8),x(p(11,5,"SELECT_REMINDER_MONTH")),i(3),x(p(14,7,"SELECT_REMINDER_DAY")),i(3),I(e.quarterlyRemindersArray.controls)}}function tt(t,l){if(t&1&&(r(0,"option",33),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;D("value",e.id),i(),u(" ",p(2,2,e.name)," ")}}function it(t,l){if(t&1&&(r(0,"option",33),m(1),n()),t&2){let e=l.$implicit;D("value",e),i(),u(" ",e," ")}}function nt(t,l){t&1&&(r(0,"div")(1,"div",28),m(2),c(3,"translate"),n()()),t&2&&(i(2),u(" ",p(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function rt(t,l){if(t&1){let e=M();r(0,"tr"),B(1,40),r(2,"td"),m(3),c(4,"translate"),n(),r(5,"td")(6,"select",50),y("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(7,tt,3,4,"option",33,qe),n()(),r(9,"td")(10,"select",51),y("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(11,it,2,2,"option",33,V),n(),f(13,nt,4,3,"div"),n(),q(),n()}if(t&2){let e,o,a,d=l.$implicit,C=l.$index,s=R(3);i(),D("formGroupName",C),i(2),u(" ",p(4,3,(e=d.get("name"))==null?null:e.value)," "),i(4),I((o=d.get("monthValues"))==null?null:o.value),i(4),I(s.days),i(2),v((a=d.get("day"))!=null&&a.touched&&(d!=null&&d.hasError("invalidDate"))?13:-1)}}function at(t,l){if(t&1&&(r(0,"div",36)(1,"label",52),m(2),c(3,"translate"),n(),r(4,"div",53)(5,"table",48)(6,"thead")(7,"tr"),E(8,"th"),r(9,"th"),m(10),c(11,"translate"),n(),r(12,"th"),m(13),c(14,"translate"),n()()(),r(15,"tbody",54),F(16,rt,14,5,"tr",null,N),n()()()()),t&2){let e=R(2);i(2),x(p(3,3,"SELECT_DATE")),i(8),x(p(11,5,"SELECT_REMINDER_MONTH")),i(3),x(p(14,7,"SELECT_REMINDER_DAY")),i(3),I(e.halfYearlyRemindersArray.controls)}}function ot(t,l){if(t&1&&(r(0,"div",19)(1,"div",34),f(2,Pe,7,3,"div",35),f(3,Je,8,3,"div",35),f(4,et,18,9,"div",36),f(5,at,18,9,"div",36),n()()),t&2){let e,o,a,d,C=R();i(2),v(((e=C.reminderForm.get("frequency"))==null?null:e.value)=="0"?2:-1),i(),v(((o=C.reminderForm.get("frequency"))==null?null:o.value)=="1"?3:-1),i(),v(((a=C.reminderForm.get("frequency"))==null?null:a.value)=="3"?4:-1),i(),v(((d=C.reminderForm.get("frequency"))==null?null:d.value)=="4"?5:-1)}}function lt(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"DATE_IS_REQUIRED")," "))}function mt(t,l){if(t&1&&(r(0,"div"),f(1,lt,3,3,"div",28),n()),t&2){let e,o=R(2);i(),v(!((e=o.reminderForm.get("startDate"))==null||e.errors==null)&&e.errors.required?1:-1)}}function dt(t,l){t&1&&(r(0,"div")(1,"div",28),m(2),c(3,"translate"),n()()),t&2&&(i(2),u(" ",p(3,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function ct(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"TIME_IS_REQUIRED")," "))}function pt(t,l){if(t&1&&(r(0,"div"),f(1,ct,3,3,"div",28),n()),t&2){let e,o=R(2);i(),v(!((e=o.reminderForm.get("startTime"))==null||e.errors==null)&&e.errors.required?1:-1)}}function st(t,l){if(t&1){let e=M();r(0,"div",19)(1,"div",55)(2,"label",30),m(3),c(4,"translate"),n(),r(5,"div",56),E(6,"input",57,0),c(8,"translate"),r(9,"div",58)(10,"button",59),y("click",function(){S(e);let a=g(14);return T(a.open())}),r(11,"mat-icon",60),m(12,"calendar_today"),n()()(),E(13,"mat-datepicker",null,1),n(),f(15,mt,2,1,"div"),f(16,dt,4,3,"div"),n(),r(17,"div",55)(18,"label",61),m(19),c(20,"translate"),n(),r(21,"div",56),E(22,"input",62),r(23,"div",58)(24,"button",63),y("click",function(){S(e);let a=g(28);return T(a.open())}),r(25,"mat-icon",60),m(26,"access_time"),n()()(),E(27,"ngx-material-timepicker",null,2),n(),f(29,pt,2,1,"div"),n()()}if(t&2){let e,o,a,d=g(14),C=g(28),s=R();i(3),u(" ",p(4,11,"REMINDER_START_DATE")),i(3),D("placeholder",w(p(8,13,"REMINDER_DATE")))("matDatepicker",d),i(9),v((e=s.reminderForm.get("startDate"))!=null&&e.touched&&((e=s.reminderForm.get("startDate"))!=null&&e.errors)?15:-1),i(),v((o=s.reminderForm.get("startDate"))!=null&&o.touched&&(!((o=s.reminderForm.get("startDate"))==null||o.errors==null)&&o.errors.owlDateTimeMin)?16:-1),i(3),x(p(20,15,"REMINDER_TIME")),i(3),D("format",24)("ngxTimepicker",C)("disableClick",!0),i(7),v((a=s.reminderForm.get("startTime"))!=null&&a.touched&&((a=s.reminderForm.get("startTime"))!=null&&a.errors)?29:-1)}}function ut(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"START_DATE_IS_REQUIRED")," "))}function _t(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function ft(t,l){if(t&1&&(r(0,"div"),f(1,ut,3,3,"div",28),f(2,_t,3,3,"div",28),n()),t&2){let e,o,a=R(2);i(),v(!((e=a.reminderForm.get("startDate"))==null||e.errors==null)&&e.errors.required?1:-1),i(),v(!((o=a.reminderForm.get("startDate"))==null||o.errors==null)&&o.errors.owlDateTimeMin?2:-1)}}function vt(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"TIME_IS_REQUIRED")," "))}function Ct(t,l){if(t&1&&(r(0,"div"),f(1,vt,3,3,"div",28),n()),t&2){let e,o=R(2);i(),v(!((e=o.reminderForm.get("startTime"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Rt(t,l){t&1&&(r(0,"div",28),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",p(2,1,"ENDTIME_IS_REQUIRED")," "))}function Et(t,l){if(t&1&&(r(0,"div"),f(1,Rt,3,3,"div",28),n()),t&2){let e,o=R(2);i(),v(!((e=o.reminderForm.get("endTime"))==null||e.errors==null)&&e.errors.required?1:-1)}}function ht(t,l){if(t&1){let e=M();r(0,"div",19)(1,"div",55)(2,"label",64),m(3),c(4,"translate"),n(),r(5,"div",56),E(6,"input",57,0),c(8,"translate"),r(9,"div",58)(10,"button",59),y("click",function(){S(e);let a=g(14);return T(a.open())}),r(11,"mat-icon",60),m(12,"calendar_today"),n()()(),E(13,"mat-datepicker",null,1),n(),f(15,ft,3,2,"div"),n(),r(16,"div",55)(17,"label",61),m(18),c(19,"translate"),n(),r(20,"div",56),E(21,"input",62),r(22,"div",58)(23,"button",63),y("click",function(){S(e);let a=g(27);return T(a.open())}),r(24,"mat-icon",60),m(25,"access_time"),n()()(),E(26,"ngx-material-timepicker",null,2),n(),f(28,Ct,2,1,"div"),n(),r(29,"div",55)(30,"label",65),m(31),c(32,"translate"),n(),r(33,"div",56),E(34,"input",66,0),c(36,"translate"),r(37,"div",58)(38,"button",59),y("click",function(){S(e);let a=g(42);return T(a.open())}),r(39,"mat-icon",60),m(40,"calendar_today"),n()()(),E(41,"mat-datepicker",null,3),n()(),r(43,"div",55)(44,"label",67),m(45),c(46,"translate"),n(),r(47,"div",56),E(48,"input",68),r(49,"div",58)(50,"button",63),y("click",function(){S(e);let a=g(54);return T(a.open())}),r(51,"mat-icon",60),m(52,"access_time"),n()()()(),E(53,"ngx-material-timepicker",null,4),f(55,Et,2,1,"div"),n()()}if(t&2){let e,o,a,d=g(14),C=g(27),s=g(42),b=g(54),_=R();i(3),x(p(4,19,"REMINDER_START_DATE")),i(3),D("placeholder",w(p(8,21,"REMINDER_DATE")))("matDatepicker",d),i(9),v((e=_.reminderForm.get("startDate"))!=null&&e.touched&&((e=_.reminderForm.get("startDate"))!=null&&e.errors)?15:-1),i(3),u("",p(19,23,"REMINDER_TIME")," "),i(3),D("format",24)("ngxTimepicker",C)("disableClick",!0),i(7),v((o=_.reminderForm.get("startTime"))!=null&&o.touched&&((o=_.reminderForm.get("startTime"))!=null&&o.errors)?28:-1),i(3),x(p(32,25,"REMINDER_END_DATE")),i(3),D("placeholder",w(p(36,27,"REMINDER_DATE")))("matDatepicker",s),i(11),x(p(46,29,"REMINDER_END_TIME")),i(3),D("format",24)("ngxTimepicker",b)("disableClick",!0),i(7),v((a=_.reminderForm.get("endTime"))!=null&&a.hasError("required")&&((a=_.reminderForm.get("endDate"))!=null&&a.touched)?55:-1)}}function Dt(t,l){t&1&&(r(0,"div",27),E(1,"mat-progress-spinner",69),n())}var Be=class t extends K{constructor(e,o,a,d,C,s,b){super();this.fb=e;this.reminderService=o;this.commonService=a;this.toastrService=d;this.data=C;this.dialogRef=s;this.securityService=b}reminderFrequencies=[];reminderForm;minDate=new Date;selectedUsers=[];reminder;isLoading=!1;securityObject;dayOfWeek=Fe;months=Ie;days=[];get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}ngOnInit(){for(let e=1;e<=31;e++)this.days.push(e);this.getReminderFrequency(),this.createReminderForm(),this.getAuthObj()}getAuthObj(){this.sub$.sink=this.securityService.SecurityObject.subscribe(e=>{e&&(this.securityObject=e)})}closeDialog(){this.dialogRef.close()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>this.reminderFrequencies=[...e])}createReminderForm(){var e=new Date;this.reminderForm=this.fb.group({id:[""],subject:["",[A.required]],message:["",[A.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[e,[A.required]],startTime:["12:00",[A.required]],endDate:[null],endTime:[null],dayOfWeek:[2],documentId:[this.data.id]},{validators:this.dateAndTimeValidator})}dateAndTimeValidator(e){let o=e.get("endDate")?.value,a=e.get("endTime")?.value;return o&&!a?e.get("endTime")?.setErrors({required:!0}):e.get("endTime")?.setErrors(null),null}checkData(e){e.checked?this.reminderForm.get("frequency")?.setValidators([A.required]):this.reminderForm.get("frequency")?.setValidators([]),this.reminderForm.get("frequency")?.updateValueAndValidity(),this.reminderForm.markAllAsTouched()}createReminder(){if(!this.reminderForm.valid){this.reminderForm.markAllAsTouched();return}let e=new Date(this.reminderForm.get("startDate")?.value),o=this.reminderForm.get("startTime")?.value,[a,d]=o.split(":"),C=new Date(e.getFullYear(),e.getMonth(),e.getDate(),a,d),s=this.reminderForm.get("endDate")?.value,b;if(s){s=new Date(s);let h=this.reminderForm.get("endTime")?.value;if(h&&typeof h=="string"&&h.includes(":")){let[we,Ve]=h.split(":").map(Number);b=new Date(s.getFullYear(),s.getMonth(),s.getDate(),we,Ve)}}let _=this.reminderForm.value;_.startDate=C,_.endDate=b,_.reminderUsers=[{reminderId:_.id??"",userId:this.securityObject.id??""}],_.isRepeated||(_.dailyReminders=[],_.quarterlyReminders=[],_.halfYearlyReminders=[]),this.reminder?(_.dailyReminders&&(_.dailyReminders=_.dailyReminders.map(h=>(h.reminderId=this.reminder.id??"",h))),_.quarterlyReminders&&(_.quarterlyReminders=_.quarterlyReminders.map(h=>(h.reminderId=this.reminder.id??"",h))),_.halfYearlyReminders&&(_.halfYearlyReminders=_.halfYearlyReminders.map(h=>(h.reminderId=this.reminder.id??"",h))),this.isLoading=!0,this.sub$.sink=this.reminderService.updateReminder(_).subscribe(h=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1)):(this.isLoading=!0,this.sub$.sink=this.reminderService.addReminder(_).subscribe(h=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1))}onFrequencyChange(){let e=this.reminderForm.get("frequency")?.value;e=e==0?"0":e,e==0 .toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):e==1 .toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue(2)):e==3 .toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):e==4 .toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){var e=this.fb.array([]);e.push(this.createDailyReminderFormGroup(0)),e.push(this.createDailyReminderFormGroup(1)),e.push(this.createDailyReminderFormGroup(2)),e.push(this.createDailyReminderFormGroup(3)),e.push(this.createDailyReminderFormGroup(4)),e.push(this.createDailyReminderFormGroup(5)),e.push(this.createDailyReminderFormGroup(6)),this.reminderForm.addControl("dailyReminders",e)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){var e=this.fb.array([]),o=this.months.filter(s=>[1,2,3].indexOf(s.id)>=0),a=this.months.filter(s=>[4,5,6].indexOf(s.id)>=0),d=this.months.filter(s=>[7,8,9].indexOf(s.id)>=0),C=this.months.filter(s=>[10,11,12].indexOf(s.id)>=0);e.push(this.createQuarterlyReminderFormGroup(0,"JAN_MAR",o)),e.push(this.createQuarterlyReminderFormGroup(1,"APR_JUN",a)),e.push(this.createQuarterlyReminderFormGroup(2,"JUL_SEPT",d)),e.push(this.createQuarterlyReminderFormGroup(3,"OCT_DEC",C)),this.reminderForm.addControl("quarterlyReminders",e)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){var e=this.fb.array([]),o=this.months.filter(d=>[1,2,3,4,5,6].indexOf(d.id)>=0),a=this.months.filter(d=>[7,8,9,10,11,12].indexOf(d.id)>=0);e.push(this.createHalfYearlyReminderFormGroup(0,"JAN_JUN",o)),e.push(this.createHalfYearlyReminderFormGroup(1,"JUL_DEC",a)),this.reminderForm.addControl("halfYearlyReminders",e)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(e){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[e],isActive:[!0],name:[Te[e]]})}createQuarterlyReminderFormGroup(e,o,a){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[a[0].id],name:[o],monthValues:[a]})}createHalfYearlyReminderFormGroup(e,o,a){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[a[0].id],name:[o],monthValues:[a]})}getCurrentDay(){return new Date().getDate()}onDateChange(e){let o=e.get("day")?.value,a=e.get("month")?.value;var d=new Date(new Date().getFullYear(),Number.parseInt(a),0).getDate();o>d&&e&&(e?.setErrors({invalidDate:"Invalid Date"}),e?.markAllAsTouched())}onCancel(){this.dialogRef.close()}static \u0275fac=function(o){return new(o||t)(k(ue),k(Ne),k(Z),k(X),k(Q),k(O),k(z))};static \u0275cmp=U({type:t,selectors:[["ng-component"]],features:[Y],decls:52,vars:30,consts:[["ref",""],["startDatePicker",""],["toggleIcon",""],["endDatePicker",""],["endTimeToggleIcon",""],[1,"d-flex"],[1,"me-auto","p-2"],[1,"mb-3","page-title"],[3,"code"],[1,"d-flex","justify-content-end","mb-2"],[1,"close-icon","text-danger","cursor-pointer",3,"click"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"row","mt-2"],[1,"col-md"],["color","primary","formControlName","isRepeated",3,"change"],["color","primary","formControlName","isEmailNotification"],[1,"mt-4","col-md-12","d-flex","flex-wrap","button-group-responsive"],["type","submit","matButton","filled",1,"success","me-2",3,"click"],[1,"medium-icon"],["type","button","matButton","filled",1,"error",3,"click"],[1,"spinner-container"],[1,"text-danger"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value"],[1,"col-md-12"],[1,"form-group"],[1,"form-group","mt-2"],["for","weekDays"],["id","weekDays",1,"row"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],[1,"form-group","col-md-3"],[1,"input-group"],["formControlName","startDate",1,"form-control",3,"matDatepicker","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],[1,"medium-icon","fs-5","align-middle"],["for","startTime"],["formControlName","startTime","readonly","",1,"form-control","timepicker-input",3,"format","ngxTimepicker","disableClick"],["ngxMaterialTimepickerToggleIcon","","type","button",1,"btn","btn-primary","calendar-button",3,"click"],["for","startDate"],["for","endDate"],["formControlName","endDate",1,"form-control",3,"matDatepicker","placeholder"],["for","endTime"],["formControlName","endTime","readonly","",1,"form-control","timepicker-input",3,"format","ngxTimepicker","disableClick"],["mode","indeterminate","diameter","60","strokeWidth","5"]],template:function(o,a){if(o&1&&(r(0,"mat-dialog-content")(1,"div",5)(2,"div",6)(3,"span",7),m(4),c(5,"translate"),E(6,"app-page-help-text",8),n()(),r(7,"div",9)(8,"mat-icon",10),y("click",function(){return a.closeDialog()}),m(9,"cancel"),n()()(),r(10,"div",11)(11,"div",12)(12,"form",13)(13,"div",11)(14,"div",14)(15,"label",15),m(16),c(17,"translate"),n(),E(18,"input",16),f(19,Oe,2,1,"div"),n()(),r(20,"div",11)(21,"div",14)(22,"label",17),m(23),c(24,"translate"),n(),E(25,"textarea",18),f(26,Le,2,1,"div"),n()(),r(27,"div",19)(28,"div",20)(29,"mat-checkbox",21),y("change",function(C){return a.checkData(C)}),m(30),c(31,"translate"),n()(),r(32,"div",20)(33,"mat-checkbox",22),m(34),c(35,"translate"),n()()(),f(36,je,12,7,"div",19),f(37,ot,6,4,"div",19),f(38,st,30,17,"div",19),f(39,ht,56,31,"div",19),r(40,"div",23)(41,"button",24),y("click",function(){return a.createReminder()}),r(42,"mat-icon",25),m(43,"save"),n(),m(44),c(45,"translate"),n(),r(46,"button",26),y("click",function(){return a.onCancel()}),r(47,"mat-icon",25),m(48,"cancel"),n(),m(49),c(50,"translate"),n()()()()(),f(51,Dt,2,0,"div",27),n()),o&2){let d,C,s,b,_,h;i(4),u(" ",p(5,16,"ADD_REMINDER")," "),i(2),D("code","ADD_REMINDER"),i(6),D("formGroup",a.reminderForm),i(4),u(" ",p(17,18,"SUBJECT")),i(3),v((d=a.reminderForm.get("subject"))!=null&&d.touched&&((d=a.reminderForm.get("subject"))!=null&&d.errors)?19:-1),i(4),u(" ",p(24,20,"MESSAGE")),i(3),v((C=a.reminderForm.get("message"))!=null&&C.touched&&((C=a.reminderForm.get("message"))!=null&&C.errors)?26:-1),i(4),u(" ",p(31,22,"REPEATE_REMINDER")," "),i(4),x(p(35,24,"SEND_EMAIL")),i(2),v((s=a.reminderForm.get("isRepeated"))!=null&&s.value?36:-1),i(),v((b=a.reminderForm.get("isRepeated"))!=null&&b.value?37:-1),i(),v((_=a.reminderForm.get("isRepeated"))!=null&&_.value?-1:38),i(),v((h=a.reminderForm.get("isRepeated"))!=null&&h.value?39:-1),i(5),u(" ",p(45,26,"SAVE")," "),i(5),u(" ",p(50,28,"CANCEL")," "),i(2),v(a.isLoading?51:-1)}},dependencies:[_e,ae,pe,se,ie,ce,ne,re,oe,de,le,me,ve,Ee,Re,Ce,Se,xe,ge,Ae,be,Me,ke,ye,he,De,J,G,L,P,H,fe,j,$,te,ee,W],encapsulation:2})};export{Be as DocumentReminderComponent};
