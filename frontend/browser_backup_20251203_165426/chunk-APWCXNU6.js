import{wa as g}from"./chunk-GDJX5AXE.js";import{Dc as m,Gc as l,d as p,h as s}from"./chunk-KZMFGXDY.js";import{Da as o,Gb as u,W as a,ja as c}from"./chunk-W3TJXGK4.js";var d=class i{constructor(t,e){this.httpClient=t;this.commonHttpErrorService=e}maxRetries=2;updateDocument(t){let e=`document/${t.id}`;return this.httpClient.put(e,t).pipe(o(this.commonHttpErrorService.handleError))}addDocument(t){let e="document",n=new FormData;return n.append("files",t.file??""),n.append("name",t.name??""),n.append("categoryId",t.categoryId??""),n.append("documentStatusId",t.documentStatusId??""),n.append("clientId",t.clientId??""),n.append("storageSettingId",t.storageSettingId??""),n.append("categoryName",t.categoryName??""),n.append("description",t.description??""),n.append("extension",t.extension??""),n.append("retentionPeriodInDays",t.retentionPeriodInDays?t.retentionPeriodInDays?.toString():"0"),n.append("onExpiryAction",t.onExpiryAction?t.onExpiryAction?.toString():"0"),n.append("documentMetaDataString",JSON.stringify(t.documentMetaDatas)),n.append("documentRolePermissionString",JSON.stringify(t.documentRolePermissions??[])),n.append("documentUserPermissionString",JSON.stringify(t.documentUserPermissions??[])),this.httpClient.post(e,n)}addChunkDocument(t){t.documentMetaDatas=t.documentMetaDatas?.filter(r=>r.metatag);let e="document/chunk",n={name:t.name,categoryId:t.categoryId,documentStatusId:t.documentStatusId,clientId:t.clientId,storageSettingId:t.storageSettingId,categoryName:t.categoryName??"",description:t.description,extension:t.extension,documentMetaDataString:JSON.stringify(t.documentMetaDatas),documentRolePermissionString:JSON.stringify(t.documentRolePermissions??[]),documentUserPermissionString:JSON.stringify(t.documentUserPermissions??[]),isAssignToMe:t.isAssignToMe};return this.httpClient.post(e,n)}uploadChunkDocument(t){return this.httpClient.post("document/chunk/upload",t).pipe(u({count:this.maxRetries,delay:(n,r)=>(console.warn(`Retrying chunk... Attempt ${r}`),c(Math.pow(2,r)*1e3))}))}deleteDocument(t){let e=`document/${t}`;return this.httpClient.delete(e).pipe(o(this.commonHttpErrorService.handleError))}archiveDocument(t){let e=`document/${t}/archive`;return this.httpClient.post(e,null)}restoreDocument(t){let e=`document/${t}/restore`;return this.httpClient.post(e,null).pipe(o(this.commonHttpErrorService.handleError))}getDocumentSharedUserRoles(t){let e=`document/${t}/sharedUsersRoles`;return this.httpClient.get(e)}getDocument(t){let e=`document/${t}`;return this.httpClient.get(e)}getDocumentDetail(t){let e=`document/${t}/Detail`;return this.httpClient.get(e)}getDocuments(t){let e="documents",n=new m().set("Fields",t.fields??"").set("OrderBy",t.orderBy).set("createDate",t.createDate?t.createDate.toISOString():"").set("StartDate",t.startDate?t.startDate.toString():"").set("EndDate",t.endDate?t.endDate.toString():"").set("MetaTagsTypeId",t.metaTagsTypeId??"").set("PageSize",t.pageSize.toString()).set("Skip",t.skip.toString()).set("SearchQuery",t.searchQuery??"").set("categoryId",t.categoryId??"").set("documentStatusId",t.documentStatusId??"").set("clientId",t.clientId??"").set("storageSettingId",t.storageSettingId??"").set("name",t.name??"").set("documentNumber",t.documentNumber??"").set("metaTags",t.metaTags??"").set("id",t.id?.toString()??"");return this.httpClient.get(e,{params:n,observe:"response"})}getArchiveDocuments(t){let e="documents/archive",n=new m().set("Fields",t.fields??"").set("OrderBy",t.orderBy).set("createDate",t.createDate?t.createDate.toISOString():"").set("StartDate",t.startDate?t.startDate.toString():"").set("EndDate",t.endDate?t.endDate.toString():"").set("MetaTagsTypeId",t.metaTagsTypeId??"").set("PageSize",t.pageSize.toString()).set("Skip",t.skip.toString()).set("SearchQuery",t.searchQuery??"").set("categoryId",t.categoryId??"").set("documentStatusId",t.documentStatusId??"").set("clientId",t.clientId??"").set("storageSettingId",t.storageSettingId??"").set("documentNumber",t.documentNumber??"").set("name",t.name??"").set("metaTags",t.metaTags??"").set("id",t?.id?.toString()??"");return this.httpClient.get(e,{params:n,observe:"response"})}getDocumentsByDeepSearch(t){let e=`document/deepSearch?searchQuery=${t}`;return this.httpClient.get(e)}removePageIndexing(t){let e=`document/${t}/remove/pageindexing`;return this.httpClient.post(e,null).pipe(a(n=>n.data))}addPageIndexing(t){let e=`document/${t}/add/pageindexing`;return this.httpClient.post(e,null).pipe(a(n=>n.data))}saveNewVersionDocument(t){let e="documentVersion",n=new FormData;return n.append("file",t.file,t.url),n.append("url",t.url),n.append("extension",t.extension),n.append("documentId",t.documentId),n.append("comment",t.comment),n.append("isSignatureExists",t?.isSignatureExists?t.isSignatureExists.toString():"false"),n.append("signBy",t.signBy?t.signBy:""),n.append("signByDate",t.signByDate?t.signByDate:""),this.httpClient.post(e,n)}saveNewVersionDocumentChunk(t){let e="documentVersion/chunk",n={documentId:t.documentId,url:t.url,extension:t.extension,isSignatureExists:t?.isSignatureExists?t.isSignatureExists:!1};return this.httpClient.post(e,n)}getDocumentVersion(t){let e=`documentversion/${t}`;return this.httpClient.get(e)}restoreDocumentVersion(t,e){let n=`documentversion/${t}/restore/${e}`;return this.httpClient.post(n,{}).pipe(o(this.commonHttpErrorService.handleError))}getdocumentMetadataById(t){let e=`document/${t}/getMetatag`;return this.httpClient.get(e)}getDocumentShareableLink(t){let e=`DocumentShareableLink/${t}`;return this.httpClient.get(e)}createDocumentShareableLink(t){return this.httpClient.post("DocumentShareableLink",t)}deleteDocumentShareableLInk(t){let e=`DocumentShareableLink/${t}`;return this.httpClient.delete(e).pipe(o(this.commonHttpErrorService.handleError))}getLinkInfoByCode(t){let e=`DocumentShareableLink/${t}/info`;return this.httpClient.get(e)}getDocumentByCode(t){let e=`DocumentShareableLink/${t}/document`;return this.httpClient.get(e)}saveDocumentSignature(t){return this.httpClient.post("DocumentSignature",t)}saveDocumentSignaturePostion(t){return this.httpClient.post("DocumentSignature/position",t)}getDocumentSignature(t){let e=`DocumentSignature/${t}`;return this.httpClient.get(e)}addAIDocumentCreated(t){let e="document/aiDocumentCreated",n={name:t.name,categoryId:t.categoryId,documentStatusId:t.documentStatusId,clientId:t.clientId,storageSettingId:t.storageSettingId,categoryName:t.categoryName??"",description:t.description,extension:t.extension,documentMetaDataString:JSON.stringify(t.documentMetaDatas),documentRolePermissionString:JSON.stringify(t.documentRolePermissions??[]),documentUserPermissionString:JSON.stringify(t.documentUserPermissions??[]),isAssignToMe:t.isAssignToMe,documentContent:t.documentContent,retentionPeriodInDays:t.retentionPeriodInDays,onExpiryAction:t.onExpiryAction};return this.httpClient.post(e,n)}static \u0275fac=function(e){return new(e||i)(s(l),s(g))};static \u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
