import{b as re}from"./chunk-D63AZ2OX.js";import{c as H}from"./chunk-I43MH25B.js";import{a as Y}from"./chunk-ZXWR2MAY.js";import{c as le}from"./chunk-GYIDN45C.js";import{c as ae}from"./chunk-PJSVLHWR.js";import{b as L,c as G}from"./chunk-2DXU6Z77.js";import{a as te,b as ie,c as ne,e as oe}from"./chunk-F3ENXN4Q.js";import{C as X,D as Z,E as ee,c as Q,e as x,h as $,i as z,o as J,r as K,u as W}from"./chunk-KYSGX4IW.js";import{e as O,g as B,h as R,k}from"./chunk-BFSIXXTJ.js";import{a as V,b as j}from"./chunk-P6E4AR6Q.js";import{ta as P,va as U}from"./chunk-GDJX5AXE.js";import{$ as h,Ab as N,Ca as v,Da as g,Db as m,Eb as c,Ia as u,Ja as n,Ka as i,La as f,Pc as w,Rc as q,Sa as A,Ua as M,W as t,Wa as b,ga as F,i as _,jb as o,ka as y,kb as E,kc as T,lb as d,p as S,q as I,zb as D}from"./chunk-KZMFGXDY.js";var ce=e=>({content:e}),pe=e=>({"container-fluid":e}),de=()=>["/client"];function se(e,C){e&1&&(n(0,"span",19),o(1),m(2,"translate"),i()),e&2&&(t(),d("",c(2,1,"ADD_CLIENT")," "))}function ue(e,C){e&1&&(n(0,"span",19),o(1),m(2,"translate"),i()),e&2&&(t(),d("",c(2,1,"EDIT_CLIENT")," "))}function fe(e,C){if(e&1&&(n(0,"div",1)(1,"div",18),v(2,se,3,3,"span",19)(3,ue,3,3,"span",19),f(4,"app-page-help-text",20),i()()),e&2){let a=b();t(2),g(a.isEditMode?3:2),t(2),u("code","MANAGE_CLIENT")}}function Ce(e,C){if(e&1){let a=A();n(0,"mat-card-header")(1,"div",21)(2,"span",22),o(3),m(4,"translate"),f(5,"app-page-help-text",20),i(),n(6,"mat-icon",23),M("click",function(){S(a);let r=b();return I(r.onCancel())}),o(7,"cancel"),i()()()}e&2&&(t(3),d(" ",c(4,2,"ADD_CLIENT")," "),t(2),u("code","MANAGE_CLIENT"))}function ve(e,C){e&1&&(n(0,"div",9),o(1),m(2,"translate"),i()),e&2&&(t(),d(" ",c(2,1,"COMPANY_PERSON_NAME_IS_REQUIRED")," "))}function ge(e,C){e&1&&(n(0,"div",9),o(1),m(2,"translate"),i()),e&2&&(t(),d(" ",c(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}var me=class e extends Y{constructor(a,l){super();this.dialogRef=a;this.data=l;this.isDialogOpen=!!l,this.subscribeIsAddorUpdate()}client;clientForm;isEditMode=!1;fb=_(X);router=_(B);activeRoute=_(O);clientStore=_(re);isDialogOpen=!1;ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(a=>{let l=a;l.client&&(this.isEditMode=!0,this.clientForm.patchValue(l.client),this.client=l.client)})}createUserForm(){this.clientForm=this.fb.group({id:[""],companyName:["",[x.required]],contactPerson:[""],lastName:[""],email:["",[x.email]],phoneNumber:[""],address:[""]})}markFormGroupTouched(a){Object.values(a.controls).forEach(l=>{l.markAsTouched(),l.controls&&this.markFormGroupTouched(l)})}saveClient(){if(this.clientForm.valid){let a=this.createBuildObject();this.clientStore.addUpdateClient(a)}else this.markFormGroupTouched(this.clientForm)}createBuildObject(){return{id:this.clientForm.get("id")?.value,contactPerson:this.clientForm.get("contactPerson")?.value,email:this.clientForm.get("email")?.value,phoneNumber:this.clientForm.get("phoneNumber")?.value,address:this.clientForm.get("address")?.value,companyName:this.clientForm.get("companyName")?.value}}subscribeIsAddorUpdate(){H(this.clientStore.isAddUpdate).subscribe(a=>{a&&(this.isDialogOpen?this.dialogRef.close(this.clientStore.client()):this.router.navigate(["/client"])),this.clientStore.resetflag()})}onCancel(){this.dialogRef.close()}static \u0275fac=function(l){return new(l||e)(h(L,8),h(G,8))};static \u0275cmp=F({type:e,selectors:[["app-manage-client"]],features:[y],decls:54,vars:34,consts:[[3,"ngClass"],[1,"row","align-items-center"],[3,"ngSubmit","formGroup"],["appearance","outlined"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-label","text-danger"],["formControlName","companyName","type","text",1,"form-control"],[1,"text-danger"],["formControlName","contactPerson","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","address",1,"form-control"],[1,"col-md-12","mt-4"],["matButton","filled","cdkFocusInitial","",1,"success","me-2"],[1,"medium-icon","align-middle"],["type","button","matButton","filled",1,"error",3,"click","routerLink"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"col-md-12","mb-0","d-flex","justify-content-between"],[1,"mb-3","page-title"],[1,"close-icon","text-danger","cursor-pointer",3,"click"]],template:function(l,r){if(l&1&&(n(0,"section",0)(1,"div",0),v(2,fe,5,2,"div",1),n(3,"form",2),M("ngSubmit",function(){return r.saveClient()}),n(4,"mat-card",3),v(5,Ce,8,4,"mat-card-header"),n(6,"mat-card-content")(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),o(11),m(12,"translate"),n(13,"sup"),o(14,"*"),i()(),f(15,"input",8),v(16,ve,3,3,"div",9),i()(),n(17,"div",5)(18,"div",6)(19,"label"),o(20),m(21,"translate"),i(),f(22,"input",10),i()(),n(23,"div",5)(24,"div",6)(25,"label"),o(26),m(27,"translate"),i(),f(28,"input",11),v(29,ge,3,3,"div",9),i()(),n(30,"div",5)(31,"div",6)(32,"label"),o(33),m(34,"translate"),i(),f(35,"input",12),i()(),n(36,"div",5)(37,"div",6)(38,"label"),o(39),m(40,"translate"),i(),n(41,"textarea",13),o(42,"                "),i()()(),n(43,"div",14)(44,"button",15)(45,"mat-icon",16),o(46,"save"),i(),o(47),m(48,"translate"),i(),n(49,"button",17),M("click",function(){return r.onCancel()}),n(50,"mat-icon",16),o(51,"cancel"),i(),o(52),m(53,"translate"),i()()()()()()()()),l&2){let p,s;u("ngClass",N(29,ce,!r.isDialogOpen)),t(),u("ngClass",N(31,pe,!r.isDialogOpen)),t(),g(r.isDialogOpen?-1:2),t(),u("formGroup",r.clientForm),t(2),g(r.isDialogOpen?5:-1),t(6),d("",c(12,15,"COMPANY_PERSON_NAME")," "),t(5),g((p=r.clientForm.get("companyName"))!=null&&p.touched&&((p=r.clientForm.get("companyName"))!=null&&p.errors)&&(!((p=r.clientForm.get("companyName"))==null||p.errors==null)&&p.errors.required)?16:-1),t(4),E(c(21,17,"CONTACT_PERSON")),t(6),E(c(27,19,"EMAIL")),t(3),g((s=r.clientForm.get("email"))!=null&&s.touched&&((s=r.clientForm.get("email"))!=null&&s.errors)&&(!((s=r.clientForm.get("email"))==null||s.errors==null)&&s.errors.email)?29:-1),t(4),E(c(34,21,"MOBILE_NUMBER")),t(6),E(c(40,23,"ADDRESS")),t(8),d(" ",c(48,25,"SAVE")," "),t(2),u("routerLink",D(33,de)),t(3),d(" ",c(53,27,"CANCEL")," ")}},dependencies:[Z,J,Q,$,z,q,k,R,U,P,ee,K,W,le,j,V,ae,oe,te,ie,ne,T,w],encapsulation:2})};export{me as a};
