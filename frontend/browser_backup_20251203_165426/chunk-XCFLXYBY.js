import{c as E}from"./chunk-I43MH25B.js";import{a as n,b as o,c as S,d as h,e as R,f as U,g as y,h as u}from"./chunk-OHUA35YV.js";import{a as b}from"./chunk-APWCXNU6.js";import{b as I}from"./chunk-WC3ZMFX5.js";import{a as C}from"./chunk-LCPYESOB.js";import{i as d}from"./chunk-KZMFGXDY.js";import{Pa as D,Ub as m,Ya as g,_b as s,h as i}from"./chunk-W3TJXGK4.js";import{a as f,b as L}from"./chunk-H5HZ6YB3.js";var x={documents:[],isLoading:!1,loadList:!1,isAddUpdate:!1,documentResourceParameter:{id:"",createdBy:"",categoryId:"",documentStatusId:"",storageSettingId:"",clientId:"",createDate:void 0,fields:"",orderBy:"createdDate asc",searchQuery:"",pageSize:10,skip:0,name:"",totalCount:0,metaTags:"",documentNumber:""},commonError:null},O=S({providedIn:"root"},y(x),h(({})=>({})),U((e,a=d(b),c=d(I),p=d(C))=>({loadByQuery:u(i(D(300),s(()=>o(e,{isLoading:!0})),m(r=>a.getArchiveDocuments(r).pipe(n({next:t=>{let l=JSON.parse(t.headers.get("X-Pagination")??"{}"),A=L(f({},r),{totalCount:l.totalCount,pageSize:l.pageSize,skip:l.skip});o(e,{documents:[...t.body??[]],isLoading:!1,commonError:null,loadList:!1,isAddUpdate:!1,documentResourceParameter:f({},A)})},error:t=>{o(e,{commonError:t,isLoading:!1}),console.error(t)}}))))),archiveById:u(i(g(),s(()=>o(e,{isLoading:!0})),m(r=>a.archiveDocument(r).pipe(n({next:()=>{c.success(p.getValue("DOCUMENT_ARCHIVE_SUCCESSFULLY")),o(e,{isLoading:!1,loadList:!0})},error:t=>{o(e,{commonError:t,isLoading:!1})}}))))),addUpdateDocument:u(i(g(),s(()=>o(e,{isLoading:!0})),m(r=>r.id?a.updateDocument(r).pipe(n({next:()=>{c.success(p.getValue("DOCUMENT_SAVE_SUCCESSFULLY")),o(e,{isLoading:!1,loadList:!0,isAddUpdate:!0})},error:t=>{o(e,{commonError:t,isLoading:!1})}})):a.addDocument(r).pipe(n({next:()=>{c.success(p.getValue("DOCUMENT_SAVE_SUCCESSFULLY")),o(e,{isLoading:!1,loadList:!0,isAddUpdate:!0})},error:t=>{o(e,{commonError:t,isLoading:!1})}}))))),getArchiveDocuments(){this.loadByQuery(e.documentResourceParameter())},setLoadingFlag(r){o(e,{isLoading:r})}})),R({onInit(e){E(e.loadList).subscribe(a=>{a&&e.loadByQuery(e.documentResourceParameter())})}}));export{O as a};
