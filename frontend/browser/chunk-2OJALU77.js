import{a as C}from"./chunk-BJ2ZHXLF.js";import{Y as P,a as g,b as h}from"./chunk-GDJX5AXE.js";import{X as d,d as b,g as v,i as c,t as y}from"./chunk-KZMFGXDY.js";import{Ra as m,n,qa as f}from"./chunk-W3TJXGK4.js";import{a as u}from"./chunk-H5HZ6YB3.js";function S(r=36){let e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<r;t++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}var l=class{constructor(e){this.overlayRef=e}id=S(15);value=new n;componentRef;isOpen(){return this.overlayRef&&this.overlayRef.hasAttached()}close(){this.overlayRef&&this.overlayRef.dispose()}emitValue(e){this.value.next(e)}valueChanged(){return this.value.asObservable()}getPanelEl(){return this.overlayRef.overlayElement}updatePosition(){return this.overlayRef.updatePosition()}afterClosed(){return this.overlayRef.detachments().pipe(m(1))}};var O=new v("OVERLAY_PANEL_DATA");var p=class{attach(){}enable(){document.documentElement.classList.add("be-fullscreen-overlay-scrollblock")}disable(){document.documentElement.classList.remove("be-fullscreen-overlay-scrollblock")}};var A={hasBackdrop:!0,closeOnBackdropClick:!0,panelClass:"overlay-panel"},R=class r{overlay=c(P);injector=c(y);breakpoints=c(C);isClose$=new n;documentVersionId$=new n;setDocumentVersionId(e){this.documentVersionId$.next(e)}get documentVersionId(){return this.documentVersionId$.asObservable()}setIsClosePanelClose(e){this.isClose$.next(e)}get isClosePanelClose$(){return this.isClose$.asObservable()}open(e,o){let t=u(u({},A),o),i={positionStrategy:this.getPositionStrategy(t),hasBackdrop:t.hasBackdrop,panelClass:t.panelClass,backdropClass:t.backdropClass,scrollStrategy:this.getScrollStrategy(t),disposeOnNavigation:!0};t.width&&(i.width=t.width),t.height&&(i.height=t.height),t.maxHeight&&(i.maxHeight=t.maxHeight),t.maxWidth&&(i.maxWidth=t.maxWidth);let s=this.overlay.create(i),a=new l(s),k=e instanceof d?new h(e,t.viewContainerRef,t.data):new g(e,t.viewContainerRef,this.createInjector(t,a));return a.componentRef=s.attach(k),t.closeOnBackdropClick&&(s.backdropClick().subscribe(()=>a.close()),s.keydownEvents().pipe(f(w=>w.key==="Escape")).subscribe(()=>a.close())),a}getScrollStrategy(e){return e.fullScreen?new p:e.scrollStrategy==="close"?this.overlay.scrollStrategies.close():this.overlay.scrollStrategies.block()}createInjector(e,o){return y.create({providers:[{provide:l,useValue:o},{provide:O,useValue:e.data||null}],parent:this.injector})}getPositionStrategy(e){if(e.positionStrategy)return e.positionStrategy;let o=this.breakpoints.isMobile$.value&&e.mobilePosition||e.position;if(!o)throw new Error("OverlayPanelPosition is required but was undefined.");return e.origin==="global"||this.positionIsGlobal(o)?this.getGlobalPositionStrategy(o):this.getConnectedPositionStrategy(o,e.origin)}positionIsGlobal(e){return e==="center"||!Array.isArray(e)}getGlobalPositionStrategy(e){let o=this.overlay.position().global();return e==="center"?o.centerHorizontally().centerVertically():(e&&typeof e=="object"&&!Array.isArray(e)&&Object.entries(e).forEach(([t,i])=>{o[t](i)}),o)}getConnectedPositionStrategy(e,o){return this.overlay.position().flexibleConnectedTo(o).withPositions(e).withPush(!0).withViewportMargin(5)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a,O as b,R as c};
