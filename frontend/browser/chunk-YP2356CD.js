import{a as it}from"./chunk-UNZ3WOVS.js";import{a as Xe}from"./chunk-3DOSFE6M.js";import{a as Ye}from"./chunk-F2TJDCZR.js";import{d as Qe}from"./chunk-XUA4LWIB.js";import"./chunk-2JITEWKE.js";import"./chunk-Q64ABPSN.js";import"./chunk-ZEPKQIVA.js";import{a as Me,b as Ne,c as Re,e as Oe,f as Ae,h as Be,i as Le,k as $e,l as He,n as Pe,o as We,p as Ue}from"./chunk-32HAOKOZ.js";import{b as qe}from"./chunk-RSOKOSFJ.js";import{a as ze}from"./chunk-EENFD2QS.js";import"./chunk-6PMQMASS.js";import{a as Ke}from"./chunk-47YH7K5Q.js";import{a as Je}from"./chunk-C5E2LXAD.js";import{a as Ze}from"./chunk-VEE4XTLG.js";import"./chunk-KXR3ZNF4.js";import"./chunk-ZBYQRGLJ.js";import"./chunk-D63AZ2OX.js";import"./chunk-FYSR42NU.js";import{a as et}from"./chunk-VPEMDL3O.js";import"./chunk-W6Y3OYFO.js";import{a as Ge}from"./chunk-DP5AXSVW.js";import{a as tt}from"./chunk-MUB3U2II.js";import{a as re,b as ce}from"./chunk-XOJ77Y25.js";import{a as J,b as Z,c as ee,d as te}from"./chunk-AO6AHHEQ.js";import"./chunk-DBWWD6JI.js";import"./chunk-E4NKSOB7.js";import"./chunk-NHBDANCD.js";import"./chunk-D6HICPES.js";import"./chunk-KK3LA7D5.js";import"./chunk-PVDG46DZ.js";import{a as Ie}from"./chunk-NUIAS2S4.js";import"./chunk-DD7TOTAW.js";import"./chunk-ZPADZQPI.js";import"./chunk-I43MH25B.js";import"./chunk-OHUA35YV.js";import{c as Ee}from"./chunk-2OJALU77.js";import"./chunk-BJ2ZHXLF.js";import{a as pe}from"./chunk-APWCXNU6.js";import"./chunk-3NQBK7XS.js";import{a as oe}from"./chunk-6GBRFDEJ.js";import"./chunk-TVXBOX2R.js";import"./chunk-3ULJSOY5.js";import"./chunk-KBYUC6BL.js";import"./chunk-7UZYWCAJ.js";import{a as Fe,b as je}from"./chunk-55DV7QCW.js";import"./chunk-SJIWHW3R.js";import"./chunk-ZL3HBFEV.js";import"./chunk-PT2JM3JA.js";import"./chunk-4U6IWAJM.js";import"./chunk-73AGG5TT.js";import{b as ye}from"./chunk-BEIMTKK4.js";import{a as _e,b as he}from"./chunk-YCBFVA3Y.js";import{a as ae}from"./chunk-ZXWR2MAY.js";import"./chunk-G4LST2RF.js";import"./chunk-NJY6F3LT.js";import"./chunk-GYIDN45C.js";import"./chunk-G5E2PA5H.js";import{c as Ve}from"./chunk-DXL7FQB3.js";import"./chunk-F2N2VWHU.js";import"./chunk-AHHITDV2.js";import"./chunk-QPRQJRAS.js";import{c as ke}from"./chunk-PJSVLHWR.js";import{a as ue}from"./chunk-546GNQSA.js";import{d as X}from"./chunk-2DXU6Z77.js";import{b as se}from"./chunk-WC3ZMFX5.js";import{b as de}from"./chunk-UFOTACYY.js";import{a as le}from"./chunk-RKRBEXQJ.js";import{a as me}from"./chunk-C3OPHOKD.js";import{a as ve,b as we,e as Te}from"./chunk-F3ENXN4Q.js";import{D as ge,c as De,h as Ce,i as fe,k as Se,n as xe,o as be}from"./chunk-KYSGX4IW.js";import"./chunk-LCPYESOB.js";import"./chunk-BFSIXXTJ.js";import{a as z,b as K}from"./chunk-P6E4AR6Q.js";import{ua as Y,va as q}from"./chunk-GDJX5AXE.js";import{$ as v,Ab as j,Ca as w,Da as T,Db as d,Eb as u,Ec as Q,Fb as I,Ia as D,Ja as a,Ka as r,La as k,Pa as g,Pc as ie,Qa as E,Rc as ne,Sa as S,Ua as f,W as c,Wa as s,eb as U,ga as P,jb as l,ka as W,kb as N,lb as p,ma as x,p as _,pb as R,pc as G,q as h,qb as O,rb as A,vb as y,za as M,zb as F}from"./chunk-KZMFGXDY.js";import{I as V,Ja as H,_ as L,za as $}from"./chunk-W3TJXGK4.js";import{p as B}from"./chunk-H5HZ6YB3.js";var ot=()=>["SHARE_DOCUMENT","SHARE_FOLDER"],at=t=>({color:t});function rt(t,m){if(t&1){let e=S();a(0,"mat-checkbox",47),f("change",function(i){_(e);let n=s(2);return h(i?n.masterToggle():null)}),r()}if(t&2){let e=s(2);D("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function ct(t,m){if(t&1){let e=S();a(0,"button",49),d(1,"translate"),d(2,"translate"),f("click",function(){_(e);let i=s(3);return h(i.onSharedSelectDocument())}),a(3,"mat-icon"),l(4,"share"),r()()}t&2&&(D("matTooltip",y(u(1,3,"CLICK_HERE_TO_SHARED_SELECT_DOCUMENTS"))),M("aria-label",u(2,5,"SHARE")))}function mt(t,m){t&1&&x(0,ct,5,7,"button",48),t&2&&D("hasClaim","ALL_SHARE_DOCUMENT")}function lt(t,m){if(t&1&&(a(0,"th",44),w(1,rt,1,2,"mat-checkbox",45)(2,mt,1,1,"button",46),r()),t&2){let e=s();c(),T(e.selection.isEmpty()?1:2)}}function st(t,m){if(t&1){let e=S();a(0,"td",50)(1,"mat-checkbox",51),f("click",function(i){return _(e),h(i.stopPropagation())})("change",function(i){let n=_(e).$implicit,C=s();return h(i?C.selection.toggle(n):null)}),r()()}if(t&2){let e=m.$implicit,o=s();c(),D("checked",o.selection.isSelected(e))}}function pt(t,m){t&1&&(a(0,"th",44),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"ACTION")," "))}function dt(t,m){if(t&1){let e=S();a(0,"button",61),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.removeDocumentPageIndexing(i))}),a(1,"mat-icon"),l(2,"delete"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"REMOVE_PAGE_INDEXING")," "))}function ut(t,m){if(t&1){let e=S();a(0,"button",61),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.editDocument(i))}),a(1,"mat-icon"),l(2,"edit"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"EDIT")," "))}function _t(t,m){if(t&1){let e=S();a(0,"button",56),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.manageDocumentPermission(i))}),a(1,"mat-icon"),l(2,"share"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"SHARE")," "))}function ht(t,m){if(t&1){let e=S();a(0,"button",56),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.onCreateShareableLink(i))}),a(1,"mat-icon"),l(2,"link"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"GET_SHAREABLE_LINK")," "))}function Dt(t,m){if(t&1){let e=S();a(0,"button",56),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.downloadDocument(i))}),a(1,"mat-icon"),l(2,"download"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"DOWNLOAD")," "))}function Ct(t,m){if(t&1){let e=S();a(0,"button",56),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.uploadNewVersion(i))}),a(1,"mat-icon"),l(2,"upload"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"UPLOAD_NEW_VERSION_FILE")," "))}function ft(t,m){if(t&1){let e=S();a(0,"button",61),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.onVersionHistoryClick(i))}),a(1,"mat-icon"),l(2," history"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"VERSION_HISOTRY")," "))}function St(t,m){if(t&1){let e=S();a(0,"button",56),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.addComment(i))}),a(1,"mat-icon"),l(2," chat"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"COMMENT")," "))}function xt(t,m){if(t&1){let e=S();a(0,"button",56),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.addReminder(i))}),a(1,"mat-icon"),l(2,"notifications"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"ADD_REMINDER")," "))}function bt(t,m){if(t&1){let e=S();a(0,"button",56),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.sendEmail(i))}),a(1,"mat-icon"),l(2,"forward_to_inbox"),r(),l(3),d(4,"translate"),r()}t&2&&(c(3),p(" ",u(4,1,"SEND_EMAIL")," "))}function gt(t,m){if(t&1){let e=S();a(0,"mat-icon",62),f("click",function(){_(e);let i=s().$implicit,n=s();return h(n.addComment(i))}),l(1," comment "),r()}if(t&2){let e=s().$implicit;D("matBadge",y(e.commentCount))}}function Et(t,m){if(t&1){let e=S();a(0,"mat-icon",64),f("click",function(){_(e);let i=s(2).$implicit,n=s();return h(n.manageSharePermission(i))}),l(1," groups "),r()}}function vt(t,m){if(t&1&&(g(0),w(1,Et,2,0,"mat-icon",63),E()),t&2){let e=s().$implicit;c(),T(e.isShared?1:-1)}}function wt(t,m){if(t&1){let e=S();a(0,"td",50)(1,"div",52)(2,"button",53)(3,"mat-icon"),l(4,"more_vert"),r()(),a(5,"mat-menu",null,1),x(7,dt,5,3,"button",54)(8,ut,5,3,"button",54)(9,_t,5,3,"button",55)(10,ht,5,3,"button",55),a(11,"button",56),f("click",function(){let i=_(e).$implicit,n=s();return h(n.onDocumentView(i))}),a(12,"mat-icon"),l(13,"visibility"),r(),l(14),d(15,"translate"),r(),x(16,Dt,5,3,"button",57)(17,Ct,5,3,"button",55)(18,ft,5,3,"button",58)(19,St,5,3,"button",57)(20,xt,5,3,"button",57)(21,bt,5,3,"button",57),r(),w(22,gt,2,2,"mat-icon",59),x(23,vt,2,1,"ng-container",60),r()()}if(t&2){let e=m.$implicit,o=U(6);c(2),D("matMenuTriggerFor",o),M("aria-label","Action"),c(5),D("hasClaim","EDIT_DOCUMENT"),c(),D("hasClaim","EDIT_DOCUMENT"),c(),D("hasClaim","SHARE_DOCUMENT"),c(),D("hasClaim","CREATE_SHAREABLE_LINK"),c(4),p(" ",u(15,15,"VIEW")," "),c(2),D("hasClaim","DOWNLOAD_DOCUMENT"),c(),D("hasClaim","UPLOAD_NEW_VERSION"),c(),D("hasClaim","VIEW_VERSION_HISTORY"),c(),D("hasClaim","ADD_COMMENT"),c(),D("hasClaim","ADD_REMINDER"),c(),D("hasClaim","SEND_EMAIL"),c(),T(e.commentCount>0?22:-1),c(),D("hasClaim",F(17,ot))}}function Tt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"DOCUMENT_NO")," "))}function kt(t,m){if(t&1){let e=S();a(0,"td",50)(1,"a",66),f("click",function(){let i=_(e).$implicit,n=s();return h(n.onDocumentView(i))}),l(2),r()()}if(t&2){let e=m.$implicit;c(2),N(e.documentNumber)}}function yt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"VERSION_NO")," "))}function It(t,m){if(t&1&&(a(0,"td",50),l(1),r()),t&2){let e=m.$implicit;c(),p(" ",e.versionNumber," ")}}function Vt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"NAME")," "))}function Mt(t,m){if(t&1){let e=S();a(0,"td",50)(1,"a",66),f("click",function(){let i=_(e).$implicit,n=s();return h(n.onDocumentView(i))}),l(2),r()()}if(t&2){let e=m.$implicit;c(2),N(e.name)}}function Nt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"ISSIGN")," "))}function Rt(t,m){if(t&1&&(a(0,"span",67)(1,"mat-icon",14),l(2,"check"),r()(),l(3)),t&2){let e=s(2).$implicit;c(3),p(" ",e.signBy," ")}}function Ot(t,m){if(t&1&&w(0,Rt,4,1),t&2){let e=s().$implicit;T(e.isSignatureExists?0:-1)}}function At(t,m){if(t&1&&(a(0,"td",50),w(1,Ot,1,1),r()),t&2){let e=m.$implicit;c(),T(e.url.split(".")[1]==="pdf"?1:-1)}}function Bt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"SIGNDATE")," "))}function Lt(t,m){if(t&1&&(l(0),d(1,"utcToLocalTime")),t&2){let e=s().$implicit;p(" ",I(1,1,e==null?null:e.signByDate,"short")," ")}}function $t(t,m){if(t&1&&(a(0,"td",50),w(1,Lt,2,4),r()),t&2){let e=m.$implicit;c(),T(e.signByDate?1:-1)}}function Ht(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"DOCUMENT_CATEGORY")," "))}function Pt(t,m){if(t&1&&(a(0,"td",50),l(1),r()),t&2){let e=m.$implicit;c(),p(" ",e.categoryName," ")}}function Wt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"DOCUMENT_STATUS")," "))}function Ut(t,m){if(t&1&&(a(0,"td",68),l(1),r()),t&2){let e=m.$implicit;D("ngStyle",j(2,at,e.documentStatus==null?null:e.documentStatus.colorCode)),c(),p(" ",e.documentStatus==null?null:e.documentStatus.name," ")}}function Ft(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"STORAGE")," "))}function jt(t,m){if(t&1&&(a(0,"td",50),l(1),d(2,"storageType"),r()),t&2){let e=m.$implicit;c(),p(" ",I(2,1,e.storageType,e.storageSettingName)," ")}}function Gt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"CREATED_DATE")," "))}function Qt(t,m){if(t&1&&(a(0,"td",50),l(1),d(2,"utcToLocalTime"),r()),t&2){let e=m.$implicit;c(),p(" ",I(2,1,e==null?null:e.createdDate,"shortDate")," ")}}function Xt(t,m){t&1&&(a(0,"th",65),l(1),d(2,"translate"),r()),t&2&&(c(),p(" ",u(2,1,"CREATED_BY")," "))}function Yt(t,m){if(t&1&&(a(0,"td",50),l(1),r()),t&2){let e=m.$implicit;c(),p(" ",e==null?null:e.createdBy," ")}}function qt(t,m){t&1&&(a(0,"tr")(1,"td",69)(2,"div",70)(3,"b"),l(4),d(5,"translate"),r()()()()),t&2&&(c(4),p(" ",u(5,1,"NO_DATA_FOUND")))}function zt(t,m){t&1&&k(0,"tr",71)}function Kt(t,m){t&1&&k(0,"tr",72)}function Jt(t,m){t&1&&(a(0,"div",43),k(1,"mat-progress-spinner",73),r())}var nt=class t extends ae{constructor(e,o,i,n,C,b,Zt,ei){super();this.documentService=e;this.commonDialogService=o;this.dialog=i;this.overlay=n;this.clonerService=C;this.securityService=b;this.commonService=Zt;this.toastrService=ei}displayedColumns=["select","action","documentNumber","versionNumber","name","isSigned","signDate","categoryName","documentStatus","storageType","createdDate","createdBy"];footerToDisplayed=["footer"];isLoadingResults=!1;dataSource=[];searchQuery="";isExactMatch=!1;documentChunks=[];selectedDocument;documentChunkDownloads=[];contentType;selection=new Ve(!0,[]);ngOnInit(){}ngAfterViewInit(){}isAllSelected(){let e=this.selection.selected.length,o=this.dataSource.length;return e===o}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.forEach(e=>this.selection.select(e))}searchDocuments(){if(this.searchQuery){this.isLoadingResults=!0;let e=this.searchQuery.trim();this.isExactMatch&&(e=`"${e}"`),this.sub$.sink=this.documentService.getDocumentsByDeepSearch(e).subscribe({next:o=>{this.isLoadingResults=!1,o.length>0?this.dataSource=[...o]:(this.dataSource=[],this.toastrService.info(`${this.translationService.getValue("NO_DATA_FOUND")}`))},error:o=>{this.dataSource=[],this.isLoadingResults=!1}})}}removeDocumentPageIndexing(e){this.sub$.sink=this.commonDialogService.deleteConfirmtionDialog(`${this.translationService.getValue("ARE_YOU_SURE_WANT_TO_REMOVE_DOCUMENT_PAGE_INDEXING")} :: ${e.name}`,this.translationService.getValue("DEEP_SEARCH_REMOVE_NOTE")).subscribe(o=>{o&&(this.sub$.sink=this.documentService.removePageIndexing(e.id??"").subscribe(i=>{i&&(this.searchDocuments(),this.toastrService.success(this.translationService.getValue("DOCUMENT_PAGE_INDEXING_IS_DELETED")))}))})}editDocument(e){let o={document:e,categories:[],documentStatuses:[],clients:[]},i=this.dialog.open(Ze,{width:"60vw",data:Object.assign({},o)});this.sub$.sink=i.afterClosed().subscribe(n=>{})}addComment(e){let o=this.dialog.open(ze,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=o.afterClosed().subscribe(i=>{})}manageSharePermission(e){let i=window.innerWidth<768?"80vw":"58vw",n=this.dialog.open(Ye,{data:e,width:i,maxHeight:"80vh"});this.sub$.sink=n.afterClosed().subscribe(C=>{})}manageDocumentPermission(e){this.dialog.open(Qe,{data:e,width:"80vw",maxHeight:"80vh"})}onSharedSelectDocument(){this.dialog.open(Xe,{data:this.selection.selected,width:"100%",maxWidth:"50vw"}).afterClosed().subscribe(()=>{this.selection.clear()})}uploadNewVersion(e){let o=this.dialog.open(et,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=o.afterClosed().subscribe(i=>{})}downloadDocument(e){if(e.isChunk)this.selectedDocument=e,this.getAllDocumentChunks();else{let o={documentId:e.id,name:"",extension:e.url?.split(".")[1],isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1,isFileRequestDocument:!1,isSignatureExists:!1,documentVersionId:e.documentVersionId,documentNumber:e.documentNumber};this.sub$.sink=this.commonService.downloadDocument(o).subscribe({next:i=>{if(i.type===Q.Response)if(this.addDocumentTrail(e.id??"",8 .toString()),i.body){let n=new Blob([i.body],{type:i.body.type});this.downloadFile(n)}else this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))},error:i=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))}})}}getAllDocumentChunks(){this.sub$.sink=this.commonService.getDocumentChunks(this.selectedDocument.documentVersionId??"").subscribe({next:e=>{this.documentChunks=e,this.documentChunks.length>0&&this.startDownload()},error:e=>{this.toastrService.error(e.error.message)}})}addDocumentTrail(e,o){let i={documentId:e,operationName:o};this.sub$.sink=this.commonService.addDocumentAuditTrail(i).subscribe(n=>{})}sendEmail(e){this.dialog.open(tt,{data:e,width:"100%",maxWidth:"50vw"})}addReminder(e){this.dialog.open(it,{data:e,width:"100%",maxWidth:"50vw"})}onDocumentView(e){return B(this,null,function*(){this.isLoadingResults=!0;try{let o=e.url?.split(".")??[],i=e.extension?e.extension:o[1],n={id:e.id,documentId:e.id,name:e.name,extension:i,isVersion:(e.versionNumber??1)>1,isFromPublicPreview:!1,isPreviewDownloadEnabled:this.securityService.hasClaim("ALL_DOWNLOAD_DOCUMENT"),isFileRequestDocument:!1,isSignatureExists:!1,url:e.url,documentVersionId:e.documentVersionId,isChunk:e.isChunk,documentNumber:e.documentNumber},{BasePreviewComponent:C}=yield import("./chunk-BJ7BM7KC.js");this.overlay.open(C,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:n}),i==="pdf"&&(this.sub$.sink=this.overlay.isClosePanelClose$.subscribe(b=>{b&&i==="pdf"&&this.searchDocuments()}))}finally{this.isLoadingResults=!1}})}onVersionHistoryClick(e){let o=this.clonerService.deepClone(e);this.sub$.sink=this.documentService.getDocumentVersion(e.id??"").subscribe(i=>{o.documentVersions=i,this.dialog.open(Ke,{maxWidth:"80vw",panelClass:"full-width-dialog",data:Object.assign({},o)}).afterClosed().subscribe(C=>{})})}onCreateShareableLink(e){this.sub$.sink=this.documentService.getDocumentShareableLink(e.id??"").subscribe(o=>{this.dialog.open(Je,{width:"500px",data:{document:e,link:o}})})}startDownload(){let{chunkSize1:e,parallelCalls:o}=this.commonService.getNetworkSpeed(),i=[];for(let n=0;n<this.documentChunks.length;n++)i.push({chunkIndex:n,documentVersionId:this.documentChunks[n].documentVersionId});this.sub$.sink=V(i).pipe($(o),H(n=>V(n).pipe(L(C=>this.downloadChunk(C.chunkIndex,C.documentVersionId),o)))).subscribe({next:n=>{this.contentType=n.contentType;let C=this.base64ToBlob(n.data,n.contentType);n.blobChunk=C,this.documentChunkDownloads.push(n)},complete:()=>this.mergeChunks(),error:n=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT")),console.error("Error downloading chunks",n)}})}base64ToBlob(e,o){let i=atob(e),n=new Array(i.length);for(let b=0;b<i.length;b++)n[b]=i.charCodeAt(b);let C=new Uint8Array(n);return new Blob([C],{type:o})}downloadChunk(e,o){return this.commonService.downloadDocumentChunk(o,e)}mergeChunks(){let o=this.documentChunkDownloads.sort((n,C)=>n.chunkIndex-C.chunkIndex).map(n=>n.blobChunk).filter(n=>!!n),i=new Blob(o,{type:this.contentType});this.addDocumentTrail(this.selectedDocument.id??"",8 .toString()),this.downloadFile(i)}downloadFile(e){let o=document.createElement("a");o.setAttribute("style","display:none;"),document.body.appendChild(o),o.download=this.selectedDocument.name??"downloaded-file",o.href=URL.createObjectURL(e),o.target="_blank",o.click(),document.body.removeChild(o)}static \u0275fac=function(o){return new(o||t)(v(pe),v(Ge),v(X),v(Ee),v(me),v(le),v(de),v(se))};static \u0275cmp=P({type:t,selectors:[["app-deep-document-search"]],features:[W],decls:84,vars:27,consts:[["input",""],["menu","matMenu"],[1,"content"],[1,"container-fluid"],[1,"d-flex","mb-2"],[1,"me-auto"],[1,"mb-0","page-title"],[3,"code"],[1,"d-flex","flex-wrap","flex-column","flex-sm-row"],[1,"flex-fill"],["name","form","novalidate",""],[1,"input-group"],["name","searchText","id","txtSearch","type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["type","submit","id","txtSearch",1,"btn","btn-primary","d-none","d-sm-block",3,"click"],[1,"medium-icon","fs-5","align-middle"],["type","submit","id","txtSearch",1,"btn","btn-primary","d-block","d-sm-none",3,"click"],[1,"p-1"],["color","primary",3,"ngModelChange","ngModel"],[1,"d-flex","flex-wrap","flex-column","flex-sm-row","d-none","d-sm-block"],[1,"text-danger"],["appearance","outlined",1,"mt-3"],[1,"table-responsive"],[1,"grid-height-small"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","table-column-fix-30","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["matColumnDef","documentNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","versionNumber"],["matColumnDef","name"],["matColumnDef","isSigned"],["matColumnDef","signDate"],["matColumnDef","categoryName"],["matColumnDef","documentStatus"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","storageType"],["matColumnDef","createdDate"],["matColumnDef","createdBy"],[4,"matNoDataRow"],["class","grid-header-color","mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"spinner-container"],["mat-header-cell","",1,"table-column-fix-30"],["color","primary",3,"checked","indeterminate"],["mat-mini-fab","","matTooltipPosition","above",1,"btn","btn-primary","btn-sm",3,"matTooltip"],["color","primary",3,"change","checked","indeterminate"],["mat-mini-fab","","class","btn btn-primary btn-sm","matTooltipPosition","above",3,"matTooltip","click",4,"hasClaim"],["mat-mini-fab","","matTooltipPosition","above",1,"btn","btn-primary","btn-sm",3,"click","matTooltip"],["mat-cell",""],["color","primary",3,"click","change","checked"],[1,"d-flex","gap-2","justify-content-center"],["matMiniFab","",1,"primary",3,"matMenuTriggerFor"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["mat-menu-item","","class","btn btn-light btn-sm","type","button",3,"click",4,"hasClaim"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"click"],["class","btn btn-light btn-sm","mat-menu-item","","type","button",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["matBadgeSize","small","aria-hidden","false",2,"cursor","pointer","margin-left","8px",3,"matBadge"],[4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["matBadgeSize","small","aria-hidden","false",2,"cursor","pointer","margin-left","8px",3,"click","matBadge"],[2,"cursor","pointer","margin-left","8px"],[2,"cursor","pointer","margin-left","8px",3,"click"],["mat-header-cell",""],[1,"doc-link",3,"click"],[1,"bg-success","text-light"],["mat-cell","",3,"ngStyle"],["colspan","8"],[1,"m-2"],["mat-header-row","",1,"grid-header-color"],["mat-row",""],["mode","indeterminate","diameter","60","strokeWidth","5"]],template:function(o,i){if(o&1){let n=S();a(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),l(5),d(6,"translate"),k(7,"app-page-help-text",7),r()()(),a(8,"mat-card")(9,"mat-card-content")(10,"div",8)(11,"div",9)(12,"form",10)(13,"div",11)(14,"input",12,0),d(16,"translate"),A("ngModelChange",function(b){return _(n),O(i.searchQuery,b)||(i.searchQuery=b),h(b)}),r(),a(17,"button",13),f("click",function(){return _(n),h(i.searchDocuments())}),a(18,"mat-icon",14),l(19,"search"),r(),l(20),d(21,"translate"),r(),a(22,"button",15),f("click",function(){return _(n),h(i.searchDocuments())}),a(23,"mat-icon",14),l(24,"search"),r()()()()()(),a(25,"div",8)(26,"div",16)(27,"mat-checkbox",17),A("ngModelChange",function(b){return _(n),O(i.isExactMatch,b)||(i.isExactMatch=b),h(b)}),a(28,"b"),l(29),d(30,"translate"),r()()()(),a(31,"div",18)(32,"div",9)(33,"span",19)(34,"b"),l(35),d(36,"translate"),r(),l(37),d(38,"translate"),r()()(),a(39,"mat-card",20)(40,"mat-card-content")(41,"div",21)(42,"div",22)(43,"table",23),g(44,24),x(45,lt,3,1,"th",25)(46,st,2,1,"td",26),E(),g(47,27),x(48,pt,3,3,"th",25)(49,wt,24,18,"td",26),E(),g(50,28),x(51,Tt,3,3,"th",29)(52,kt,3,1,"td",26),E(),g(53,30),x(54,yt,3,3,"th",29)(55,It,2,1,"td",26),E(),g(56,31),x(57,Vt,3,3,"th",29)(58,Mt,3,1,"td",26),E(),g(59,32),x(60,Nt,3,3,"th",29)(61,At,2,1,"td",26),E(),g(62,33),x(63,Bt,3,3,"th",29)(64,$t,2,1,"td",26),E(),g(65,34),x(66,Ht,3,3,"th",29)(67,Pt,2,1,"td",26),E(),g(68,35),x(69,Wt,3,3,"th",29)(70,Ut,2,4,"td",36),E(),g(71,37),x(72,Ft,3,3,"th",29)(73,jt,3,4,"td",26),E(),g(74,38),x(75,Gt,3,3,"th",29)(76,Qt,3,4,"td",26),E(),g(77,39),x(78,Xt,3,3,"th",29)(79,Yt,2,1,"td",26),E(),x(80,qt,6,3,"tr",40)(81,zt,1,0,"tr",41)(82,Kt,1,0,"tr",42),r()()()()()()()()(),w(83,Jt,2,0,"div",43)}o&2&&(c(5),p("",u(6,15,"DEEP_SEARCH")," "),c(2),D("code","DEEP_SEARCH"),c(7),D("placeholder",y(u(16,17,"DEEP_SEARCH_TEXTBOX_PLACEHOLDER"))),R("ngModel",i.searchQuery),c(6),p(" ",u(21,19,"SEARCH")," "),c(7),R("ngModel",i.isExactMatch),c(2),p(" ",u(30,21,"ISEXACTMATCH")),c(6),p("",u(36,23,"NOTE"),":"),c(2),p(" ",u(38,25,"DEEP_SEARCH_NOTE")," "),c(6),D("dataSource",i.dataSource),c(38),D("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),c(),D("matRowDefColumns",i.displayedColumns),c(),T(i.isLoadingResults?83:-1))},dependencies:[ke,ge,be,De,Ce,fe,xe,Se,je,Fe,q,Y,K,z,ue,ne,Ue,Me,Re,Le,Oe,Ne,$e,Ae,Be,He,Pe,We,ce,re,te,Z,J,ee,Ie,ye,Te,ve,we,G,he,_e,ie,qe,oe],encapsulation:2})};export{nt as DeepDocumentSearchComponent};
