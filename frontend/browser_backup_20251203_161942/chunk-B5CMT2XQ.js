import{a as pe}from"./chunk-DDT6X32S.js";import{a as oe}from"./chunk-6B3EO7HE.js";import{a as P}from"./chunk-ZXWR2MAY.js";import{a as se,c as me}from"./chunk-FWRBVAV4.js";import{d as re,g as ae}from"./chunk-TQCCWZBZ.js";import{c as le}from"./chunk-756DJ4VK.js";import{b as X}from"./chunk-JSAPTJHL.js";import{a as te,b as ie,e as ne}from"./chunk-THB5JDTQ.js";import{a as V,b as G}from"./chunk-4E37NPLR.js";import{ta as O,ua as R,va as D}from"./chunk-56QOWAU7.js";import{B as J,D as K,E as ee,c as U,e as F,h as Y,i as q,o as Q,r as W,s as H,t as z,u as Z}from"./chunk-KYSGX4IW.js";import{e as N,g as B,h as k,k as L}from"./chunk-BFSIXXTJ.js";import{$ as E,Ca as x,Da as f,Db as m,Eb as p,Fa as I,Ga as _,Ha as h,Ia as u,Ja as n,Ka as o,La as S,Pc as $,Rc as j,Sa as y,Ua as v,W as i,Wa as C,ga as T,jb as a,ka as b,lb as d,p as g,q as A,vb as w,zb as M}from"./chunk-KZMFGXDY.js";var ce=()=>["/allow-file-extension"],ue=(l,c)=>c.key;function Ee(l,c){if(l&1&&(n(0,"mat-option",16),a(1),m(2,"translate"),o()),l&2){let e=c.$implicit;u("value",e.value),i(),d(" ",p(2,2,e.key)," ")}}function xe(l,c){l&1&&(n(0,"div",17),a(1),m(2,"translate"),o()),l&2&&(i(),d(" ",p(2,1,"FILE_TYPE_IS_REQUIRED")," "))}function fe(l,c){l&1&&(n(0,"div",17),a(1),m(2,"translate"),o()),l&2&&(i(),d(" ",p(2,1,"EXTENSION_IS_REQUIRED")," "))}function ve(l,c){l&1&&(n(0,"div",17),a(1),m(2,"translate"),o()),l&2&&(i(),d(" ",p(2,1,"SPECIAL_CHARACTER_NOT_ALLOWED")," "))}function Fe(l,c){if(l&1){let e=y();n(0,"div",21)(1,"div",11)(2,"div",19)(3,"div",26),S(4,"input",27),m(5,"translate"),n(6,"button",28),v("click",function(){let r=g(e).$index,s=C();return A(s.removeExtensionField(r))}),n(7,"mat-icon",10),a(8,"delete"),o()()(),x(9,fe,3,3,"div",17),x(10,ve,3,3,"div",17),o()()()}if(l&2){let e,t,r=c.$implicit,s=c.$index;u("formGroupName",s),i(4),u("placeholder",w(p(5,5,"ENTER_EXTENSION"))),i(5),f((e=r.get("extension"))!=null&&e.touched&&((e=r.get("extension"))!=null&&e.hasError("required"))?9:-1),i(),f((t=r.get("extension"))!=null&&t.touched&&((t=r.get("extension"))!=null&&t.hasError("pattern"))?10:-1)}}var de=class l extends P{constructor(e,t,r,s,_e){super();this.router=e;this.fb=t;this.activeRoute=r;this.allowFileExtensionService=s;this.toastrService=_e}isEditMode=!1;allowFileExtensionForm;fileTypes=[];get extensions(){return this.allowFileExtensionForm.get("extensions")}createAllowFileExtensionForm(){this.allowFileExtensionForm=this.fb.group({id:[],fileType:[{value:null,disabled:!1},[F.required]],extensions:this.fb.array([])})}ngOnInit(){this.fileTypes=this.getEnumValues(oe),this.createAllowFileExtensionForm(),this.sub$.sink=this.activeRoute.data.subscribe(e=>{let t=e.allowFileExtension;t?(this.isEditMode=!0,this.allowFileExtensionForm.patchValue({id:t.id,fileType:t.fileType}),t.extensions&&t.extensions.length>0&&t.extensions.forEach(r=>{this.extensions.push(this.buildExtension(r))}),this.allowFileExtensionForm.get("fileType")?.disable()):this.extensions.push(this.buildExtension())})}addExtensionField(){this.extensions.push(this.buildExtension())}buildExtension(e){return this.fb.group({extension:[e||"",[F.required,F.pattern(/^[a-zA-Z0-9,]*$/)]]})}trackByIndex(e,t){return e}getEnumValues(e){return Object.keys(e).filter(t=>isNaN(Number(t))).map(t=>({key:t,value:e[t]}))}removeExtensionField(e){if(this.extensions.length<=1){this.toastrService.error(this.translationService.getValue("AT_LEAST_ONE_EXTENSION_REQUIRED"));return}this.extensions.removeAt(e)}saveAllowFileExtension(){if(this.allowFileExtensionForm.valid){let e=this.createBuildObject();this.isEditMode?this.sub$.sink=this.allowFileExtensionService.updateAllowFileExtension(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("FILE_TYPE_EXTENSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/allow-file-extension"])}):this.sub$.sink=this.allowFileExtensionService.addAllowFileExtension(e).subscribe(()=>{this.toastrService.success(this.translationService.getValue("FILE_TYPE_EXTENSION_CREATED_SUCCESSFULLY")),this.router.navigate(["/allow-file-extension"])})}else this.allowFileExtensionForm.markAllAsTouched()}createBuildObject(){let e=this.allowFileExtensionForm.get("id")?.value,t=this.extensions.controls.map(s=>s.get("extension")?.value);return{id:e,fileType:this.allowFileExtensionForm.get("fileType")?.value,extension:t.join(","),extensions:t}}static \u0275fac=function(t){return new(t||l)(E(B),E(J),E(N),E(pe),E(X))};static \u0275cmp=T({type:l,selectors:[["app-manage-allow-file-extension"]],features:[b],decls:50,vars:26,consts:[[1,"content"],[1,"container-fluid"],[1,"d-flex","mb-2"],[1,"me-auto"],[1,"page-title"],["code","MANAGE_ALLOW_FILE_EXTENSION"],[3,"formGroup"],["appearance","outlined"],[1,"d-flex","justify-content-end","mb-2"],["type","button","matButton","filled",1,"primary","me-2",3,"click"],[1,"medium-icon","fs-5","align-middle"],[1,"row"],[1,"col-md-3"],[1,"form-group"],[1,"form-label","fw-bold","text-danger"],["panelClass","mat-select-control","formControlName","fileType",1,"form-control",3,"placeholder"],[3,"value"],[1,"text-danger"],[1,"row","mt-2"],[1,"col-md-12"],["formArrayName","extensions",1,"mb-2"],[1,"col-md-2","col-sm-3","col-xs-6","mb-2",3,"formGroupName"],[1,"m-top-10","col-md-12"],["matButton","filled","cdkFocusInitial","",1,"success","me-2",3,"click"],[1,"medium-icon","align-middle"],["type","button","matButton","filled",1,"error",3,"routerLink"],[1,"d-flex","justify-content-between"],["formControlName","extension","type","text",1,"form-control",3,"placeholder"],["matMiniFab","","type","button",1,"error","ml-1",3,"click"]],template:function(t,r){if(t&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),a(5),m(6,"translate"),S(7,"app-page-help-text",5),o()()(),n(8,"form",6)(9,"mat-card",7)(10,"mat-card-content")(11,"div",8)(12,"button",9),v("click",function(){return r.addExtensionField()}),n(13,"mat-icon",10),a(14,"add"),o(),a(15),m(16,"translate"),o()(),n(17,"div",11)(18,"div",12)(19,"div",13)(20,"label",14),a(21),m(22,"translate"),n(23,"sup"),a(24,"*"),o()(),n(25,"mat-select",15),m(26,"translate"),_(27,Ee,3,4,"mat-option",16,ue),o(),x(29,xe,3,3,"div",17),o()()(),n(30,"div",18)(31,"div",19)(32,"label"),a(33),m(34,"translate"),o(),n(35,"div",20)(36,"div",11),_(37,Fe,11,7,"div",21,I),o()()()(),n(39,"div",22)(40,"button",23),v("click",function(){return r.saveAllowFileExtension()}),n(41,"mat-icon",24),a(42,"save"),o(),a(43),m(44,"translate"),o(),n(45,"button",25)(46,"mat-icon",24),a(47,"cancel"),o(),a(48),m(49,"translate"),o()()()()()()()),t&2){let s;i(5),d(" ",p(6,11,"MANAGE_ALLOW_FILE_EXTENSIONS")," "),i(3),u("formGroup",r.allowFileExtensionForm),i(7),d(" ",p(16,13,"ADD_EXTENSION")," "),i(6),d(" ",p(22,15,"FILE_TYPE")," "),i(4),u("placeholder",w(p(26,17,"FILE_TYPE"))),i(2),h(r.fileTypes),i(2),f((s=r.allowFileExtensionForm.get("fileType"))!=null&&s.touched&&((s=r.allowFileExtensionForm.get("fileType"))!=null&&s.hasError("required"))?29:-1),i(4),d(" ",p(34,19,"EXTENSIONS")),i(4),h(r.extensions.controls),i(6),d(" ",p(44,21,"SAVE")," "),i(2),u("routerLink",M(25,ce)),i(3),d(" ",p(49,23,"CANCEL")," ")}},dependencies:[K,Q,U,Y,q,j,L,k,D,O,R,ee,W,Z,H,z,me,se,re,ae,G,V,ne,te,ie,le,$],encapsulation:2})};export{de as a};
