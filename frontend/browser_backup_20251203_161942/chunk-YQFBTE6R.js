import{c as me}from"./chunk-756DJ4VK.js";import"./chunk-JYYDN77K.js";import"./chunk-BQ4MMRNN.js";import{b as $}from"./chunk-JSAPTJHL.js";import"./chunk-UFOTACYY.js";import{a as re,b as ae,d as le,e as pe}from"./chunk-THB5JDTQ.js";import{a as H,b as Y}from"./chunk-4E37NPLR.js";import{ta as k,va as D}from"./chunk-56QOWAU7.js";import{a as Z}from"./chunk-77WXBMFN.js";import"./chunk-XFBX5CPU.js";import"./chunk-C3OPHOKD.js";import{B as ie,D as ne,E as oe,c as J,e as L,h as K,i as W,o as X,r as ee,u as te}from"./chunk-KYSGX4IW.js";import{a as j}from"./chunk-LCPYESOB.js";import{h as V,k as G}from"./chunk-BFSIXXTJ.js";import{a as z}from"./chunk-DGFNMOMG.js";import{$ as B,$a as b,Ca as C,Da as v,Db as d,Eb as s,Gc as A,Ia as E,Ja as a,Ka as o,La as U,Pc as Q,R as P,Rc as q,Sa as w,Ua as y,W as r,Wa as h,_a as S,ab as F,d as N,eb as T,ga as M,i as f,jb as m,kb as O,lb as u,p as g,q as _,zb as R}from"./chunk-KZMFGXDY.js";import"./chunk-W3TJXGK4.js";import"./chunk-H5HZ6YB3.js";var x=class l{commonHttpErrorService=f(z);httpClient=f(A);updateCompanyProfile(e,n,t,i){let c=`companyprofile/${e.id}`,p=new FormData;return p.append("id",e.id??""),p.append("name",e.name??""),n&&p.append("logoFile",n),t&&p.append("bannerFile",t),i&&p.append("logoIconFile",i),this.httpClient.post(c,p)}static \u0275fac=function(n){return new(n||l)};static \u0275prov=N({token:l,factory:l.\u0275fac,providedIn:"root"})};var ue=["logoUpload"],fe=["logoIconUpload"],ge=["bannerUpload"],_e=()=>["/dashboard"];function Ce(l,e){l&1&&(a(0,"div",17),m(1),d(2,"translate"),o()),l&2&&(r(),u(" ",s(2,1,"COMPANY_TITLE_IS_REQUIRED")," "))}function ve(l,e){if(l&1&&U(0,"img",21),l&2){let n=h();E("src",n.logoUrl,P)}}function ye(l,e){l&1&&(a(0,"div",17),m(1),d(2,"translate"),o()),l&2&&(r(),u(" ",s(2,1,"COMPANY_LOGO_IS_REQUIRED")," "))}function Ie(l,e){if(l&1&&U(0,"img",30),l&2){let n=h();E("src",n.logoIconUrl,P)}}function Ee(l,e){l&1&&(a(0,"div",17),m(1),d(2,"translate"),o()),l&2&&(r(),u(" ",s(2,1,"COMPANY_ICON_LOGO_IS_REQUIRED")," "))}function Ue(l,e){if(l&1&&U(0,"img",33),l&2){let n=h();E("src",n.bannerUrl,P)}}function Pe(l,e){l&1&&(a(0,"div",17),m(1),d(2,"translate"),o()),l&2&&(r(),u(" ",s(2,1,"COMPANY_BANNER_IS_REQUIRED")," "))}var ce=class l{constructor(e){this.fb=e}logoUploadInput;logoIconUploadInput;bannerUploadInput;companyProfileForm;companyProfileService=f(x);toastrService=f($);translationService=f(j);securityService=f(Z);companyId="";logoUrl=null;logoIconUrl=null;bannerUrl=null;ngOnInit(){this.createFormGroup(),this.getCompanyProfile()}createFormGroup(){this.companyProfileForm=this.fb.group({companyTitle:["",[L.required,L.maxLength(100)]],logo:[this.logoUrl],logoIcon:[this.logoIconUrl],banner:[this.bannerUrl]})}triggerLogoUpload(e){e.click()}triggerLogoIconUpload(e){e.click()}triggerBannerUpload(e){e.click()}onLogoUpload(e){let n=e.target.files[0];if(n){let t=new FileReader;t.onload=i=>{this.companyProfileForm.patchValue({logo:i.target?.result}),this.logoUrl=i.target?.result??""},t.readAsDataURL(n)}}onLogoIconUpload(e){let n=e.target;if(n.files&&n.files[0]){let t=n.files[0],i=new FileReader;i.onload=()=>{let c=i.result;this.logoIconUrl=c},i.readAsDataURL(t)}}onBannerUpload(e){let n=e.target.files[0];if(n){let t=new FileReader;t.onload=i=>{this.companyProfileForm.patchValue({banner:i.target?.result}),this.bannerUrl=i.target?.result??""},t.readAsDataURL(n)}}onSave(){if(this.companyProfileForm.invalid)return;let e={id:this.companyId,name:this.companyProfileForm.get("companyTitle")?.value},n=this.logoUploadInput?.nativeElement,t=this.logoIconUploadInput?.nativeElement,i=this.bannerUploadInput?.nativeElement,c=n.files?.item(0)||null,p=i.files?.item(0)||null,I=t.files?.item(0)||null;this.companyProfileService.updateCompanyProfile(e,c??void 0,p??void 0,I??void 0).subscribe({next:de=>{this.securityService.setCompany(de),this.toastrService.success(this.translationService.getValue("COMPANY_PROFILE_UPDATED_SUCCESSFULLY"))},error:()=>{this.toastrService.error(this.translationService.getValue("FAILED_TO_SAVE_COMPANY_PROFILE"))}})}getCompanyProfile(){this.securityService.companyProfile.subscribe(e=>{e&&(this.companyProfileForm.patchValue({companyTitle:e.name,logoUrl:e.logoUrl,logoIconUrl:e.logoIconUrl,bannerUrl:e.bannerUrl,companyId:e.id}),this.logoUrl=e.logoUrl??"",this.logoIconUrl=e.logoIconUrl??"",this.bannerUrl=e.bannerUrl??"",this.companyId=e.id??"")})}static \u0275fac=function(n){return new(n||l)(B(ie))};static \u0275cmp=M({type:l,selectors:[["app-company-profile"]],viewQuery:function(n,t){if(n&1&&(S(ue,5),S(fe,5),S(ge,5)),n&2){let i;b(i=F())&&(t.logoUploadInput=i.first),b(i=F())&&(t.logoIconUploadInput=i.first),b(i=F())&&(t.bannerUploadInput=i.first)}},decls:96,vars:50,consts:[["logoUpload",""],["logoIconUpload",""],["bannerUpload",""],[1,"content"],[1,"container-fluid"],[1,"d-flex","mb-2"],[1,"me-auto"],[1,"mb-0","page-title"],["code","COMPANY_PROFILE"],[3,"formGroup"],["appearance","outlined"],[1,"row"],[1,"col-md-6"],[1,"col-md-12"],[1,"form-group"],["for","companyTitle"],["type","text","id","companyTitle","formControlName","companyTitle","placeholder","Enter company title",1,"form-control"],[1,"text-danger"],[1,"col-md-12","mt-3"],["for","logoUpload",1,"form-label"],["appearance","outlined",1,"example-card","p-4"],["mat-card-image","","alt","Company Logo","width","200","height","55",1,"mb-4",3,"src"],["type","file","accept","image/*","hidden","",3,"change"],["matButton","filled",1,"success","me-2",3,"click"],[1,"medium-icon","fs-5","align-middle"],[1,"row","mt-3"],[1,"col-sm-12"],[1,"font-weight-bold","text-danger"],[1,"form-group","mt-3"],["for","logoIconUpload",1,"form-label"],["mat-card-image","","alt","Company Icon Logo","width","48","height","48",1,"mb-4",3,"src"],["for","bannerUpload",1,"form-label"],["appearance","outlined",1,"example-card"],["mat-card-image","","alt","Company Banner","width","1000","height","500",3,"src"],["matButton","filled","color","primary",1,"success","me-2","mt-2",3,"click"],[1,"m-top-10"],["matButton","filled",1,"success","me-2",3,"click","disabled"],[1,"medium-icon","align-middle"],["matButton","filled",1,"error",3,"routerLink"]],template:function(n,t){if(n&1){let i=w();a(0,"section",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),m(5),d(6,"translate"),U(7,"app-page-help-text",8),o()()(),a(8,"form",9)(9,"mat-card",10)(10,"mat-card-content")(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"label",15),m(16),d(17,"translate"),o(),U(18,"input",16),C(19,Ce,3,3,"div",17),o()(),a(20,"div",18)(21,"div",14)(22,"label",19),m(23),d(24,"translate"),o(),a(25,"mat-card",20),C(26,ve,1,1,"img",21),a(27,"mat-card-content")(28,"div",14)(29,"input",22,0),y("change",function(p){return g(i),_(t.onLogoUpload(p))}),o(),a(31,"button",23),y("click",function(){g(i);let p=T(30);return _(t.triggerLogoUpload(p))}),a(32,"mat-icon",24),m(33,"image"),o(),m(34),d(35,"translate"),o()(),a(36,"div",25)(37,"div",26)(38,"span",27),m(39),d(40,"translate"),o()()(),C(41,ye,3,3,"div",17),o()()(),a(42,"div",28)(43,"label",29),m(44),d(45,"translate"),o(),a(46,"mat-card",20),C(47,Ie,1,1,"img",30),a(48,"mat-card-content")(49,"div",14)(50,"input",22,1),y("change",function(p){return g(i),_(t.onLogoIconUpload(p))}),o(),a(52,"button",23),y("click",function(){g(i);let p=T(51);return _(t.triggerLogoIconUpload(p))}),a(53,"mat-icon",24),m(54,"image"),o(),m(55),d(56,"translate"),o()(),a(57,"div",25)(58,"div",26)(59,"span",27),m(60),d(61,"translate"),o()()(),C(62,Ee,3,3,"div",17),o()()()()(),a(63,"div",12)(64,"div",14)(65,"label",31),m(66),d(67,"translate"),o(),a(68,"mat-card",32),C(69,Ue,1,1,"img",33),a(70,"mat-card-content")(71,"div",14)(72,"input",22,2),y("change",function(p){return g(i),_(t.onBannerUpload(p))}),o(),a(74,"button",34),y("click",function(){g(i);let p=T(73);return _(t.triggerBannerUpload(p))}),a(75,"mat-icon",24),m(76,"image"),o(),m(77),d(78,"translate"),o()(),a(79,"div",11)(80,"div",26)(81,"span",27),m(82),d(83,"translate"),o()()(),C(84,Pe,3,3,"div",17),o()()()(),a(85,"div",35)(86,"button",36),y("click",function(){return g(i),_(t.onSave())}),a(87,"mat-icon",37),m(88,"save"),o(),m(89),d(90,"translate"),o(),a(91,"button",38)(92,"mat-icon",37),m(93,"cancel"),o(),m(94),d(95,"translate"),o()()()()()()()()}if(n&2){let i,c,p,I;r(5),O(s(6,23,"COMPANY_PROFILE")),r(3),E("formGroup",t.companyProfileForm),r(8),O(s(17,25,"COMPANY_TITLE")),r(3),v((i=t.companyProfileForm.get("companyTitle"))!=null&&i.touched&&(!((i=t.companyProfileForm.get("companyTitle"))==null||i.errors==null)&&i.errors.required)?19:-1),r(4),u(" ",s(24,27,"COMPANY_LOGO")),r(3),v(t.logoUrl?26:-1),r(8),u(" ",s(35,29,"CHANGE_LOGO")," "),r(5),u(" ",s(40,31,"THE_LOGO_SIZE_NOTE")," "),r(2),v((c=t.companyProfileForm.get("logo"))!=null&&c.touched&&(!((c=t.companyProfileForm.get("logo"))==null||c.errors==null)&&c.errors.required)?41:-1),r(3),u(" ",s(45,33,"COMPANY_ICON_LOGO")),r(3),v(t.logoIconUrl?47:-1),r(8),u(" ",s(56,35,"CHANGE_ICON_LOGO")," "),r(5),u(" ",s(61,37,"THE_ICON_LOGO_SIZE_NOTE")," "),r(2),v((p=t.companyProfileForm.get("logoIcon"))!=null&&p.touched&&(!((p=t.companyProfileForm.get("logoIcon"))==null||p.errors==null)&&p.errors.required)?62:-1),r(4),u(" ",s(67,39,"COMPANY_BANNER")),r(3),v(t.bannerUrl?69:-1),r(8),u(" ",s(78,41,"CHANGE_BANNER")," "),r(5),u(" ",s(83,43,"THE_BANNER_SIZE_NOTE")," "),r(2),v((I=t.companyProfileForm.get("banner"))!=null&&I.touched&&(!((I=t.companyProfileForm.get("banner"))==null||I.errors==null)&&I.errors.required)?84:-1),r(2),E("disabled",t.companyProfileForm.invalid),r(3),u(" ",s(90,45,"SAVE")," "),r(2),E("routerLink",R(49,_e)),r(3),u(" ",s(95,47,"CANCEL")," ")}},dependencies:[ne,X,J,K,W,q,G,V,D,k,oe,ee,te,Y,H,pe,re,ae,le,me,Q],encapsulation:2})};export{ce as CompanyProfileComponent};
