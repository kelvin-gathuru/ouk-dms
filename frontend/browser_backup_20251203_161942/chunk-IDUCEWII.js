import{c as v}from"./chunk-I43MH25B.js";import{a as m,b as o,c as A,d as I,e as T,f as O,g as w,h as p}from"./chunk-OHUA35YV.js";import{b as j}from"./chunk-JSAPTJHL.js";import{b as D}from"./chunk-UFOTACYY.js";import{a as x}from"./chunk-77WXBMFN.js";import{a as U}from"./chunk-LCPYESOB.js";import{g as b}from"./chunk-BFSIXXTJ.js";import{a as H}from"./chunk-DGFNMOMG.js";import{Gc as S,d as h,h as f,i as l}from"./chunk-KZMFGXDY.js";import{Da as c,Pa as L,Ub as s,Ya as g,_b as C,h as a}from"./chunk-W3TJXGK4.js";var u=class t{constructor(r,i,d){this.httpClient=r;this.commonHttpErrorService=i;this.commonService=d}getClients(){return this.httpClient.get("Client")}getClient(r){let i=`Client/${r}`;return this.httpClient.get(i)}addClient(r){return this.httpClient.post("Client",r).pipe(c(this.commonHttpErrorService.handleError))}updateClient(r){let i=`Client/${r.id}`;return this.httpClient.put(i,r).pipe(c(this.commonHttpErrorService.handleError))}deleteClient(r){let i=`Client/${r}`;return this.httpClient.delete(i).pipe(c(this.commonHttpErrorService.handleError))}static \u0275fac=function(i){return new(i||t)(f(S),f(H),f(D))};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};var _={clients:[],client:null,isLoading:!1,loadList:!1,isAddUpdate:!1,commonError:null},Z=A({providedIn:"root"},w(_),I(({})=>({})),O((t,r=l(u),i=l(j),d=l(U),y=l(b))=>({loadClients:p(a(L(300),C(()=>o(t,{isLoading:!0})),s(()=>r.getClients().pipe(m({next:n=>{o(t,{clients:[...n],isLoading:!1,commonError:null})},error:n=>{o(t,{commonError:n,isLoading:!1}),console.error(n)}}))))),deleteClientById:p(a(g(),C(()=>o(t,{isLoading:!0})),s(n=>r.deleteClient(n).pipe(m({next:()=>{i.success(d.getValue("CLIENT_DELETED_SUCCESSFULLY")),o(t,{clients:t.clients().filter(e=>e.id!==n),isLoading:!1})},error:e=>{o(t,{commonError:e,isLoading:!1}),console.error(e)}}))))),addUpdateClient:p(a(g(),C(()=>o(t,{isLoading:!0})),s(n=>n.id?r.updateClient(n).pipe(m({next:e=>{let E=e;i.success(d.getValue("CLIENT_UPDATED_SUCCESSFULLY")),o(t,{isLoading:!1,loadList:!0,isAddUpdate:!0,client:E})},error:e=>{o(t,{commonError:e,isLoading:!1})}})):r.addClient(n).pipe(m({next:e=>{let E=e;i.success(d.getValue("CLIENT_CREATED_SUCCESSFULLY")),o(t,{isLoading:!1,loadList:!0,isAddUpdate:!0,client:E})},error:e=>{o(t,{commonError:e,isLoading:!1})}}))))),getClientById:p(a(C(()=>o(t,{isLoading:!0})),s(n=>r.getClient(n).pipe(m({next:e=>{o(t,{client:e,isLoading:!1,commonError:null})},error:e=>{o(t,{commonError:e,isLoading:!1}),console.error(e)}}))))),resetflag(){o(t,{isAddUpdate:!1})}})),T({onInit(t,r=l(x)){v(t.loadList).subscribe(i=>{i&&t.loadClients()}),r.isUserAuthenticate()&&r.hasClaim("ALL_VIEW_DOCUMENTS")&&t.loadClients()}}));export{u as a,Z as b};
