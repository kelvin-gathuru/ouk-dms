import{c as C}from"./chunk-I43MH25B.js";import{a as p,b as o,c as S,d as b,e as U,f as v,g as x,h as g}from"./chunk-OHUA35YV.js";import{b as H}from"./chunk-JSAPTJHL.js";import{a as L}from"./chunk-LCPYESOB.js";import{a as P}from"./chunk-DGFNMOMG.js";import{Gc as h,d as E,i as s}from"./chunk-KZMFGXDY.js";import{Da as d,Pa as u,Ub as l,Ya as f,_b as m,h as c}from"./chunk-W3TJXGK4.js";var I=class e{httpClient=s(h);commonHttpErrorService=s(P);getAllActions(){return this.httpClient.get("action").pipe(d(this.commonHttpErrorService.handleError))}addAction(t){return this.httpClient.post("Action",t).pipe(d(this.commonHttpErrorService.handleError))}updateAction(t){let i=`Action/${t.id}`;return this.httpClient.put(i,t).pipe(d(this.commonHttpErrorService.handleError))}deleteAction(t){let i=`Action/${t}`;return this.httpClient.delete(i).pipe(d(this.commonHttpErrorService.handleError))}getActionsByPageId(t){let i=`Action/${t}`;return this.httpClient.get(i).pipe(d(this.commonHttpErrorService.handleError))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})};var D={actions:[],selectedPageAction:[],isLoading:!1,loadList:!0,isAddUpdate:!1},K=S({providedIn:"root"},x(D),b(({})=>({})),v((e,t=s(I),i=s(H),a=s(L))=>({loadActions:g(c(u(300),m(()=>o(e,{isLoading:!0})),l(()=>t.getAllActions().pipe(p({next:r=>{o(e,{actions:r,isLoading:!1,loadList:!1})},error:r=>{o(e,{isLoading:!1,loadList:!1}),console.error(r)}}))))),deleteActionById:g(c(f(),m(()=>o(e,{isLoading:!0})),l(r=>t.deleteAction(r).pipe(p({next:()=>{i.success(a.getValue("ACTION_DELETED_SUCCESSFULLY")),o(e,{isLoading:!1,selectedPageAction:e.selectedPageAction().filter(n=>n.id!==r)})},error:n=>{o(e,{isLoading:!1}),console.error(n)}}))))),addUpdateAction:g(c(f(),m(()=>o(e,{isLoading:!0})),l(r=>r.id?t.updateAction(r).pipe(p({next:()=>{i.success(a.getValue("ACTION_UPDATED_SUCCESSFULLY")),o(e,{isLoading:!1,isAddUpdate:!0,selectedPageAction:e.selectedPageAction().map(n=>n.id===r.id?r:n)})},error:n=>{o(e,{isLoading:!1})}})):t.addAction(r).pipe(p({next:n=>{let A=n;A&&(i.success(a.getValue("ACTION_CREATED_SUCCESSFULLY")),o(e,{isLoading:!1,selectedPageAction:[...e.selectedPageAction(),A],isAddUpdate:!0}))},error:n=>{o(e,{isLoading:!1})}}))))),getActionByPageId:g(c(f(),m(()=>o(e,{isLoading:!0})),l(r=>t.getActionsByPageId(r).pipe(p({next:n=>{let A=n;A.length>0&&(i.success(a.getValue("ACTION_DELETED_SUCCESSFULLY")),o(e,{selectedPageAction:A,isLoading:!1}))},error:n=>{o(e,{isLoading:!1}),console.error(n)}}))))),resetflag:()=>{o(e,{isAddUpdate:!1})}})),U({onInit(e){C(e.loadList).subscribe(t=>{t&&e.loadActions()})}}));var w=class e{httpClient=s(h);commonHttpErrorService=s(P);getAllPages(){return this.httpClient.get("Screen").pipe(d(i=>this.commonHttpErrorService.handleError(i)))}deletePage(t){let i=`Screen/${t}`;return this.httpClient.delete(i).pipe(d(a=>this.commonHttpErrorService.handleError(a)))}addPage(t){return this.httpClient.post("Screen",t).pipe(d(a=>this.commonHttpErrorService.handleError(a)))}updatePage(t){let i=`Screen/${t.id}`;return this.httpClient.put(i,t).pipe(d(a=>this.commonHttpErrorService.handleError(a)))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})};var O={pages:[],isLoading:!1,loadList:!0,isAddUpdate:!1},me=S({providedIn:"root"},x(O),b(({})=>({})),v((e,t=s(w),i=s(H),a=s(L))=>({loadPages:g(c(u(300),m(()=>o(e,{isLoading:!0})),l(()=>t.getAllPages().pipe(p({next:r=>{o(e,{pages:[...r],isLoading:!1,loadList:!1})},error:r=>{o(e,{isLoading:!1,loadList:!1}),console.error(r)}}))))),deletePageById:g(c(f(),m(()=>o(e,{isLoading:!0})),l(r=>t.deletePage(r).pipe(p({next:()=>{i.success(a.getValue("PAGE_DELETED_SUCCESSFULLY")),o(e,{pages:e.pages().filter(n=>n.id!==r),isLoading:!1})},error:n=>{o(e,{isLoading:!1}),console.error(n)}}))))),addUpdatePage:g(c(f(),m(()=>o(e,{isLoading:!0})),l(r=>r.id?t.updatePage(r).pipe(p({next:()=>{i.success(a.getValue("PAGE_UPDATED_SUCCESSFULLY")),o(e,{isLoading:!1,isAddUpdate:!0,pages:e.pages().map(n=>n.id===r.id?r:n)})},error:n=>{o(e,{isLoading:!1})}})):t.addPage(r).pipe(p({next:()=>{i.success(a.getValue("PAGE_ADDED_SUCCESSFULLY")),o(e,{isLoading:!1,loadList:!0,isAddUpdate:!0})},error:n=>{o(e,{isLoading:!1})}}))))),resetflag:()=>{o(e,{isAddUpdate:!1})}})),U({onInit(e){C(e.loadList).subscribe(t=>{t&&e.loadPages()})}}));export{I as a,K as b,w as c,me as d};
