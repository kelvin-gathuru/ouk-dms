import{a as se}from"./chunk-3MHHJSMB.js";import{b as pe}from"./chunk-RSOKOSFJ.js";import{a as V}from"./chunk-DFMNWGTU.js";import"./chunk-PVDG46DZ.js";import{a as ne}from"./chunk-TC5US2P6.js";import{b as re}from"./chunk-WFK47GYZ.js";import{a as de}from"./chunk-BIHV7ZGQ.js";import"./chunk-NJY6F3LT.js";import{a as le,b as me,c as ce}from"./chunk-FWRBVAV4.js";import"./chunk-NH2LHIRZ.js";import"./chunk-DTECNCC4.js";import"./chunk-2FSKRITI.js";import{d as ae}from"./chunk-TQCCWZBZ.js";import"./chunk-QPRQJRAS.js";import{c as ie}from"./chunk-756DJ4VK.js";import"./chunk-JYYDN77K.js";import{f as O}from"./chunk-BQ4MMRNN.js";import{b as $}from"./chunk-JSAPTJHL.js";import"./chunk-UFOTACYY.js";import{a as ee,b as te,e as oe}from"./chunk-THB5JDTQ.js";import{a as L,b as U}from"./chunk-4E37NPLR.js";import{ta as b,va as B}from"./chunk-56QOWAU7.js";import"./chunk-77WXBMFN.js";import"./chunk-XFBX5CPU.js";import{a as j}from"./chunk-C3OPHOKD.js";import{B as X,E as Z,c as H,e as D,h as P,i as K,o as Y,r as z,u as J}from"./chunk-KYSGX4IW.js";import{a as Q}from"./chunk-LCPYESOB.js";import{h as M,k as N}from"./chunk-BFSIXXTJ.js";import"./chunk-DGFNMOMG.js";import{$ as u,Ab as y,Ca as v,Da as S,Db as m,Ea as T,Eb as c,Fb as R,Ga as h,Ha as C,Ia as s,Ja as a,Ka as n,La as k,Pc as A,Rc as G,Ua as x,W as r,Wa as I,ga as W,jb as l,kb as _,lb as p,pc as F,vb as E,zb as q}from"./chunk-KZMFGXDY.js";import"./chunk-W3TJXGK4.js";import"./chunk-H5HZ6YB3.js";var fe=()=>["/workflow-settings"],ge=o=>({"margin-left.px":o}),ve=(o,e)=>e.id;function Se(o,e){if(o&1&&(a(0,"mat-option",11),l(1),n()),o&2){let t=e.$implicit;s("value",t.id),r(),p(" ",t.name," ")}}function we(o,e){o&1&&(a(0,"div",12),l(1),m(2,"translate"),n()),o&2&&(r(),p(" ",c(2,1,"WORKFLOW_IS_REQUIRED")," "))}function he(o,e){if(o&1&&(a(0,"div",14)(1,"mat-icon",15),l(2,"folder"),n(),a(3,"b"),l(4),n()()),o&2){let t=I().$implicit;r(4),_(t.name)}}function Ce(o,e){if(o&1&&(a(0,"div",28)(1,"mat-icon",15),l(2,"folder"),n(),l(3),n()),o&2){let t=I().$implicit;s("matTooltip",t.name),r(3),p(" ",t.name," ")}}function ke(o,e){if(o&1&&(a(0,"mat-option",11)(1,"div",27),v(2,he,5,1,"div",14)(3,Ce,4,2,"div",28),n()()),o&2){let t=e.$implicit;s("value",t),r(),s("ngStyle",y(3,ge,(t.deafLevel??0)*20)),r(),S(t.deafLevel==0?2:3)}}function _e(o,e){o&1&&(a(0,"div",12),l(1),m(2,"translate"),n()),o&2&&(r(),p(" ",c(2,1,"CATEGORY_IS_REQUIRED")," "))}function Ee(o,e){if(o&1&&(a(0,"mat-option",11),l(1),m(2,"storageType"),n()),o&2){let t=e.$implicit;s("value",t.id),r(),p(" ",R(2,2,t.storageType,t.name)," ")}}function De(o,e){o&1&&(a(0,"div",12),l(1),m(2,"translate"),n()),o&2&&(r(),p(" ",c(2,1,"DOCUMENT_NAME_IS_REQUIRED")," "))}var ue=class o{constructor(e,t,i,d,w,f,g){this.fb=e;this.workflowService=t;this.storageSettingService=i;this.categoryService=d;this.clonerService=w;this.toastrService=f;this.translationService=g}reqDocumentWorkflowForm;workflows=[];allCategories=[];storageSettings=[];categories=[];ngOnInit(){this.getReqDocumentWorkflows(),this.getCategories(),this.getStorageSetting(),this.createReqDocumentWorkflowForm()}getReqDocumentWorkflows(){this.workflowService.getReqDocumentWorkflows().subscribe(e=>{this.workflows=e})}createReqDocumentWorkflowForm(){this.reqDocumentWorkflowForm=this.fb.group({workflowId:[null,[D.required]],categoryId:[null,[D.required]],storageSettingId:[""],comment:[""],name:["",[D.required]]})}getCategories(){this.categoryService.getAllCategories().subscribe(e=>{this.categories=[...e],this.categories.filter(i=>i.parentId==null).forEach((i,d)=>{i.deafLevel=0,i.index=d*Math.pow(.1,i.deafLevel),i.displayName=i.name,this.allCategories.push(i),this.setDeafLevel(i)}),this.allCategories=this.clonerService.deepClone(this.allCategories)})}setDeafLevel(e){return e?.children&&e.children.length>0&&e.children.map((t,i)=>{t.displayName=e.displayName+" > "+t.name,t.deafLevel=e?(e.deafLevel??0)+1:0,t.index=e?(e.index??0)+i*Math.pow(.1,t.deafLevel):0,this.allCategories.push(t),this.setDeafLevel(t)}),e}getCategoryNameById(e){return this.allCategories?.find(i=>i.id===e)?.name||""}getStorageSetting(){this.storageSettingService.getStorageSettings().subscribe(e=>{if(e&&e.length>0){this.storageSettings=e;let t=this.storageSettings.find(i=>i.isDefault);t&&this.reqDocumentWorkflowForm.patchValue({storageSettingId:t.id})}})}createReqDocumentWorkflow(){if(!this.reqDocumentWorkflowForm.valid){this.reqDocumentWorkflowForm.markAllAsTouched();return}let e={workflowId:this.reqDocumentWorkflowForm.get("workflowId").value,categoryId:this.reqDocumentWorkflowForm.get("categoryId").value,storageSettingId:this.reqDocumentWorkflowForm.get("storageSettingId").value,comment:this.reqDocumentWorkflowForm.get("comment").value,name:this.reqDocumentWorkflowForm.get("name").value};this.workflowService.createReqDocumentWorkflow(e).subscribe(t=>{t&&this.toastrService.success(`${this.translationService.getValue("DOCUMENT_REQUEST_IS_SUCCESSFULLY_CREATED")}`)})}static \u0275fac=function(t){return new(t||o)(u(X),u(de),u(se),u(V),u(j),u($),u(Q))};static \u0275cmp=W({type:o,selectors:[["app-request-document-through-workflow"]],decls:65,vars:37,consts:[[1,"content"],[1,"container-fluid"],[1,"d-flex","mb-2"],[1,"me-auto"],[1,"mb-0","page-title"],["code","REQUEST_DOCUMENT_THROUGH_WORKFLOW"],[3,"formGroup"],["appearance","outlined"],[1,"row"],[1,"col-sm-4","mt-2"],["panelClass","mat-select-control","formControlName","workflowId",1,"form-control",3,"placeholder"],[3,"value"],[1,"text-danger"],["panelClass","mat-select-control","formControlName","categoryId",1,"form-control",3,"placeholder"],[1,"d-flex","align-items-center"],[1,"text-warning","me-1"],["value",""],["panelClass","mat-select-control","formControlName","storageSettingId",1,"form-control",3,"placeholder"],[1,"col-sm-12","mt-2"],["for","name",1,"form-label","text-danger"],["formControlName","name","name","name","type","text",1,"form-control"],["for","comment",1,"form-label"],["formControlName","comment","name","comment","type","text",1,"form-control"],[1,"mt-2","col-md-12"],["matButton","filled",1,"success","me-2",3,"click"],[1,"medium-icon","align-middle"],["type","button","matButton","filled",1,"error",3,"routerLink"],[1,"country-item",3,"ngStyle"],[1,"d-flex","align-items-center",3,"matTooltip"]],template:function(t,i){if(t&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),l(5),m(6,"translate"),k(7,"app-page-help-text",5),n()()(),a(8,"form",6)(9,"mat-card",7)(10,"mat-card-content")(11,"div",8)(12,"div",9)(13,"mat-select",10),m(14,"translate"),h(15,Se,2,2,"mat-option",11,ve),n(),v(17,we,3,3,"div",12),n(),a(18,"div",9)(19,"mat-select",13),m(20,"translate"),a(21,"mat-select-trigger")(22,"div",14)(23,"mat-icon",15),l(24,"folder"),n(),a(25,"span"),l(26),n()()(),a(27,"mat-option",16),l(28),m(29,"translate"),n(),h(30,ke,4,5,"mat-option",11,T),n(),v(32,_e,3,3,"div",12),n(),a(33,"div",9)(34,"mat-select",17),m(35,"translate"),h(36,Ee,3,5,"mat-option",11,T),n()(),a(38,"div",8)(39,"div",18)(40,"label",19),l(41),m(42,"translate"),a(43,"sup"),l(44,"*"),n()(),k(45,"input",20),v(46,De,3,3,"div",12),n()()(),a(47,"div",8)(48,"div",18)(49,"label",21),l(50),m(51,"translate"),n(),k(52,"textarea",22),n()(),a(53,"div",8)(54,"div",23)(55,"button",24),x("click",function(){return i.createReqDocumentWorkflow()}),a(56,"mat-icon",25),l(57,"save"),n(),l(58),m(59,"translate"),n(),a(60,"button",26)(61,"mat-icon",25),l(62,"cancel"),n(),l(63),m(64,"translate"),n()()()()()()()()),t&2){let d,w,f,g;r(5),p(" ",c(6,18,"REQUEST_DOCUMENT_THROUGH_WORKFLOW")," "),r(3),s("formGroup",i.reqDocumentWorkflowForm),r(5),s("placeholder",E(c(14,20,"SELECT_WORKFLOW"))),r(2),C(i.workflows),r(2),S((d=i.reqDocumentWorkflowForm.get("workflowId"))!=null&&d.touched&&(!((d=i.reqDocumentWorkflowForm.get("workflowId"))==null||d.errors==null)&&d.errors.required)?17:-1),r(2),s("placeholder",E(c(20,22,"REQUESTED_DOCUMENT_CATEGORY"))),r(7),_((w=i.reqDocumentWorkflowForm.get("categoryId"))==null||w.value==null?null:w.value.name),r(2),p("-- ",c(29,24,"NONE")," --"),r(2),C(i.allCategories),r(2),S((f=i.reqDocumentWorkflowForm.get("categoryId"))!=null&&f.touched&&(!((f=i.reqDocumentWorkflowForm.get("categoryId"))==null||f.errors==null)&&f.errors.required)?32:-1),r(2),s("placeholder",E(c(35,26,"SELECT_STORAGE"))),r(2),C(i.storageSettings),r(5),p("",c(42,28,"REQUESTED_DOCUMENT_NAME")," "),r(5),S((g=i.reqDocumentWorkflowForm.get("name"))!=null&&g.touched&&(!((g=i.reqDocumentWorkflowForm.get("name"))==null||g.errors==null)&&g.errors.required)?46:-1),r(4),_(c(51,30,"INSTRUCTION_TO_UPLOAD_DOCUMENT")),r(8),p(" ",c(59,32,"SAVE")," "),r(2),s("routerLink",q(36,fe)),r(3),p(" ",c(64,34,"CANCEL")," ")}},dependencies:[O,U,L,B,b,Z,Y,H,P,K,z,J,ne,re,N,M,ce,le,me,ae,G,ie,oe,ee,te,F,pe,A],encapsulation:2})};export{ue as RequestDocumentThroughWorkflowComponent};
