import{A as b,Mb as D,Nb as v,Ob as w,Pb as x,a as d,i as a,t as y,v as u}from"./chunk-KZMFGXDY.js";import{Yb as m,i as l,p as g}from"./chunk-W3TJXGK4.js";function h(n){n||(n=a(u));let e=new l(t=>{if(n.destroyed){t.next();return}return n.onDestroy(t.next.bind(t))});return t=>t.pipe(m(e))}var f=class{source;destroyed=!1;destroyRef=a(u);constructor(e){this.source=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(e){if(this.destroyed)throw new d(953,!1);let t=this.source.pipe(h(this.destroyRef)).subscribe({next:r=>e(r)});return{unsubscribe:()=>t.unsubscribe()}}};function F(n,e){return new f(n)}function L(n){let e=D(n);return new l(t=>{let r=e?.onDestroy(()=>t.complete()),i=n.subscribe(o=>t.next(o));return()=>{i.unsubscribe(),r?.()}})}function N(n,e){let t=e?.injector??a(y),r=new g(1),i=x(()=>{let o;try{o=n()}catch(c){v(()=>r.error(c));return}v(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(u).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function P(n,e){let r=!e?.manualCleanup?e?.injector?.get(u)??a(u):null,i=k(e?.equal),o;e?.requireSync?o=b({kind:0},{equal:i}):o=b({kind:1,value:e?.initialValue},{equal:i});let c,p=n.subscribe({next:s=>o.set({kind:1,value:s}),error:s=>{o.set({kind:2,error:s}),c?.()},complete:()=>{c?.()}});if(e?.requireSync&&o().kind===0)throw new d(601,!1);return c=r?.onDestroy(p.unsubscribe.bind(p)),w(()=>{let s=o();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new d(601,!1)}},{equal:e?.equal})}function k(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}export{F as a,L as b,N as c,P as d};
