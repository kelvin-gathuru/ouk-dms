import{a as _e,b as he,c as ve,d as Ce,e as Re,f as xe}from"./chunk-UIYGQSTF.js";import{a as ue,b as fe}from"./chunk-6QK67EK5.js";import{c as ye}from"./chunk-NAYIGTW2.js";import{a as z,b as X}from"./chunk-GE3TJVIQ.js";import{a as J}from"./chunk-ZXWR2MAY.js";import{b as G,c as V,e as W,f as w}from"./chunk-BQ4MMRNN.js";import{b as K}from"./chunk-UFOTACYY.js";import{e as ce}from"./chunk-THB5JDTQ.js";import{a as H,b as P}from"./chunk-4E37NPLR.js";import{va as $}from"./chunk-56QOWAU7.js";import{C as se,E as pe,c as Z,e as g,h as ee,i as te,o as ie,r as re,s as ne,t as ae,u as oe,v as le,w as me,x as de}from"./chunk-KYSGX4IW.js";import{$ as E,Ca as h,Da as v,Db as d,Eb as s,Fa as F,Ga as R,Ha as x,Ia as f,Ja as n,Ka as r,La as D,Pa as S,Pc as j,Qa as b,Rc as L,Sa as O,Ua as I,W as i,Wa as _,ga as Q,jb as m,ka as Y,kb as y,lb as c,p as k,q as B,tc as T,vb as A,yb as U}from"./chunk-KZMFGXDY.js";import{a as q}from"./chunk-H5HZ6YB3.js";var N=(t,l)=>l.id;function Ee(t,l){if(t&1&&(n(0,"option",22),m(1),d(2,"translate"),r()),t&2){let e=l.$implicit;f("value",e==null?null:e.id),i(),c(" ",s(2,2,e==null||e.name==null?null:e.name.toUpperCase())," ")}}function Fe(t,l){t&1&&(n(0,"div",23),m(1),d(2,"translate"),r()),t&2&&(i(),c(" ",s(2,1,"FREQUENCY_IS_REQUIRED")," "))}function ge(t,l){if(t&1){let e=O();n(0,"div",5)(1,"div",17)(2,"label",19),m(3),d(4,"translate"),r(),n(5,"select",20),I("change",function(){k(e);let a=_();return B(a.onFrequencyChange())}),n(6,"option",21),m(7),d(8,"translate"),r(),R(9,Ee,3,4,"option",22,N),r(),h(11,Fe,3,3,"div",23),r()()}if(t&2){let e,o=_();i(3),c(" ",s(4,3,"FREQUENCY")),i(4),c("--",s(8,5,"NONE"),"--"),i(2),x(o.reminderFrequencies),i(2),v(!((e=o.reminderForm.get("frequency"))==null||e.errors==null)&&e.errors.required?11:-1)}}function Se(t,l){if(t&1&&(n(0,"div",28),S(1,29),n(2,"mat-checkbox",30),m(3),d(4,"translate"),r(),b(),r()),t&2){let e,o=l.$implicit,a=l.$index;i(),f("formGroupName",a),i(2),c(" ",s(4,2,(e=o.get("name"))==null?null:e.value.toUpperCase())," ")}}function be(t,l){if(t&1&&(n(0,"div",25)(1,"label",26),m(2),d(3,"translate"),r(),n(4,"div",27),R(5,Se,5,4,"div",28,F),r()()),t&2){let e=_(2);i(2),y(s(3,1,"WEEK_DAYS")),i(3),x(e.dailyRemindersArray.controls)}}function Ie(t,l){if(t&1&&(n(0,"mat-radio-button",34),m(1),d(2,"translate"),r()),t&2){let e=l.$implicit;f("value",e.id),i(),c(" ",s(2,2,e.name)," ")}}function Ae(t,l){if(t&1&&(n(0,"div",25)(1,"label",31),m(2),d(3,"translate"),r(),n(4,"div",32)(5,"mat-radio-group",33),R(6,Ie,3,4,"mat-radio-button",34,N),r()()()),t&2){let e=_(2);i(2),y(s(3,1,"WEEK_DAYS")),i(4),x(e.dayOfWeek)}}function Te(t,l){if(t&1&&(n(0,"option",22),m(1),d(2,"translate"),r()),t&2){let e=l.$implicit;f("value",e.id),i(),c(" ",s(2,2,e.name.toUpperCase())," ")}}function Ne(t,l){if(t&1&&(n(0,"option",22),m(1),r()),t&2){let e=l.$implicit;f("value",e),i(),c(" ",e," ")}}function Me(t,l){if(t&1&&(n(0,"tr"),S(1,29),n(2,"td"),m(3),d(4,"translate"),r(),n(5,"td")(6,"select",39),R(7,Te,3,4,"option",22,N),r()(),n(9,"td")(10,"select",40),R(11,Ne,2,2,"option",22,F),r()(),b(),r()),t&2){let e,o,a=l.$implicit,p=l.$index,u=_(3);i(),f("formGroupName",p),i(2),y(s(4,2,(e=a.get("name"))==null||e.value==null?null:e.value.toUpperCase())),i(4),x((o=a.get("monthValues"))==null?null:o.value),i(4),x(u.days)}}function qe(t,l){if(t&1&&(n(0,"div",25)(1,"label",35),m(2),d(3,"translate"),r(),n(4,"div",36)(5,"table",37)(6,"thead")(7,"tr"),D(8,"th"),n(9,"th"),m(10),d(11,"translate"),r(),n(12,"th"),m(13),d(14,"translate"),r()()(),n(15,"tbody",38),R(16,Me,13,4,"tr",null,F),r()()()()),t&2){let e=_(2);i(2),y(s(3,3,"SELECT_QUARTER_DATE")),i(8),y(s(11,5,"MONTH")),i(3),y(s(14,7,"DAY")),i(3),x(e.quarterlyRemindersArray.controls)}}function ke(t,l){if(t&1&&(n(0,"option",22),m(1),d(2,"translate"),r()),t&2){let e=l.$implicit;f("value",e.id),i(),c(" ",s(2,2,e.name)," ")}}function Be(t,l){if(t&1&&(n(0,"option",22),m(1),r()),t&2){let e=l.$implicit;f("value",e),i(),c(" ",e," ")}}function Qe(t,l){if(t&1&&(n(0,"tr"),S(1,29),n(2,"td"),m(3),d(4,"translate"),r(),n(5,"td")(6,"select",39),R(7,ke,3,4,"option",22,N),r()(),n(9,"td")(10,"select",40),R(11,Be,2,2,"option",22,F),r()(),b(),r()),t&2){let e,o,a=l.$implicit,p=l.$index,u=_(3);i(),f("formGroupName",p),i(2),y(s(4,2,(e=a.get("name"))==null?null:e.value)),i(4),x((o=a.get("monthValues"))==null?null:o.value),i(4),x(u.days)}}function Ye(t,l){if(t&1&&(n(0,"div",25)(1,"label",41),m(2),d(3,"translate"),r(),n(4,"div",42)(5,"table",37)(6,"thead")(7,"tr"),D(8,"th"),n(9,"th"),m(10),d(11,"translate"),r(),n(12,"th"),m(13),d(14,"translate"),r()()(),n(15,"tbody",43),R(16,Qe,13,4,"tr",null,F),r()()()()),t&2){let e=_(2);i(2),y(s(3,3,"SELECT_DATE")),i(8),y(s(11,5,"MONTH")),i(3),y(s(14,7,"DAY")),i(3),x(e.halfYearlyRemindersArray.controls)}}function Oe(t,l){if(t&1&&(n(0,"div",5)(1,"div",24),h(2,be,7,3,"div",25),h(3,Ae,8,3,"div",25),h(4,qe,18,9,"div",25),h(5,Ye,18,9,"div",25),r()()),t&2){let e,o,a,p,u=_();i(2),v(((e=u.reminderForm.get("frequency"))==null?null:e.value)=="0"?2:-1),i(),v(((o=u.reminderForm.get("frequency"))==null?null:o.value)=="1"?3:-1),i(),v(((a=u.reminderForm.get("frequency"))==null?null:a.value)=="3"?4:-1),i(),v(((p=u.reminderForm.get("frequency"))==null?null:p.value)=="4"?5:-1)}}function Ue(t,l){if(t&1&&(n(0,"div",17)(1,"label"),m(2),d(3,"translate"),r(),D(4,"input",44),d(5,"translate"),r()),t&2){let e=_();i(2),c(" ",s(3,4,"REMINDER_DATE")),i(2),f("placeholder",A(s(5,6,"DATE")))("min",e.minDate)}}function Ge(t,l){if(t&1&&(n(0,"div",17)(1,"label"),m(2),d(3,"translate"),r(),D(4,"input",44),d(5,"translate"),r(),n(6,"div",17)(7,"label"),m(8),d(9,"translate"),r(),D(10,"input",45),d(11,"translate"),r()),t&2){let e=_();i(2),c(" ",s(3,7,"REMINDER_START_DATE")),i(2),f("placeholder",A(s(5,9,"START_DATE")))("min",e.minDate),i(4),y(s(9,11,"REMINDER_END_DATE")),i(2),f("placeholder",A(s(11,13,"END_DATE")))}}function Ve(t,l){t&1&&(n(0,"div",18),D(1,"mat-progress-spinner",46),r())}var De=class t extends J{constructor(e,o,a,p,u){super();this.fb=e;this.commonService=o;this.data=a;this.dialogRef=p;this.datePipe=u}reminderFrequencies=[];reminderForm;minDate=new Date;selectedUsers=[];reminder;isLoading=!1;dayOfWeek=Re;months=xe;days=[];get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}ngOnInit(){for(let e=1;e<=31;e++)this.days.push(e);this.createReminderForm(),this.getReminderFrequency()}closeDialog(){this.dialogRef.close()}getReminder(){this.sub$.sink=this.commonService.getReminder(this.data).subscribe(e=>{this.reminder=q({},e),this.reminder.dailyReminders&&(this.reminder.dailyReminders=this.reminder.dailyReminders.sort((o,a)=>o.dayOfWeek-a.dayOfWeek)),this.reminder.quarterlyReminders&&(this.reminder.quarterlyReminders=this.reminder.quarterlyReminders.sort((o,a)=>o.quarter-a.quarter)),this.reminder.halfYearlyReminders&&(this.reminder.halfYearlyReminders=this.reminder.halfYearlyReminders.sort((o,a)=>o.quarter-a.quarter)),this.reminderForm.patchValue({frequency:this.reminder.frequency}),this.onFrequencyChange(),this.reminderForm.patchValue(this.reminder),this.reminderForm.patchValue({startDate:this.datePipe.transform(this.reminder.startDate,"dd/MM/yyyy hh:mm:ss a"),endDate:this.datePipe.transform(this.reminder.endDate,"dd/MM/yyyy hh:mm:ss a")})})}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>{this.reminderFrequencies=[...e],this.getReminder()})}createReminderForm(){let e=new Date;this.reminderForm=this.fb.group({id:[""],subject:[{value:"",disabled:!0},[g.required]],message:[{value:"",disabled:!0},[g.required]],frequency:[{value:"",disabled:!0}],isRepeated:[{value:!1,disabled:!0}],isEmailNotification:[{value:!1,disabled:!0}],startDate:[{value:e,disabled:!0},[g.required]],endDate:[{value:null,disabled:!0}],dayOfWeek:[{value:null,disabled:!0}],documentId:[{value:null,disabled:!0}]})}checkData(e){e.checked?this.reminderForm.get("frequency")?.setValidators([g.required]):this.reminderForm.get("frequency")?.setValidators([]),this.reminderForm.updateValueAndValidity()}onFrequencyChange(){let e=this.reminderForm.get("frequency")?.value;e=e==0?"0":e,e==0 .toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):e==1 .toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue(2)):e==3 .toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):e==4 .toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){let e=this.fb.array([]);e.push(this.createDailyReminderFormGroup(0)),e.push(this.createDailyReminderFormGroup(1)),e.push(this.createDailyReminderFormGroup(2)),e.push(this.createDailyReminderFormGroup(3)),e.push(this.createDailyReminderFormGroup(4)),e.push(this.createDailyReminderFormGroup(5)),e.push(this.createDailyReminderFormGroup(6)),this.reminderForm.addControl("dailyReminders",e)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){let e=this.fb.array([]),o=this.months.filter(C=>[1,2,3].indexOf(C.id)>=0),a=this.months.filter(C=>[4,5,6].indexOf(C.id)>=0),p=this.months.filter(C=>[7,8,9].indexOf(C.id)>=0),u=this.months.filter(C=>[10,11,12].indexOf(C.id)>=0);e.push(this.createQuarterlyReminderFormGroup(0,"JAN_MAR",o)),e.push(this.createQuarterlyReminderFormGroup(1,"APR_JUN",a)),e.push(this.createQuarterlyReminderFormGroup(2,"JUL_SEPT",p)),e.push(this.createQuarterlyReminderFormGroup(3,"OCT_DEC",u)),this.reminderForm.addControl("quarterlyReminders",e)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){let e=this.fb.array([]),o=this.months.filter(p=>[1,2,3,4,5,6].indexOf(p.id)>=0),a=this.months.filter(p=>[7,8,9,10,11,12].indexOf(p.id)>=0);e.push(this.createHalfYearlyReminderFormGroup(0,"JAN_JUN",o)),e.push(this.createHalfYearlyReminderFormGroup(1,"JUL_DEC",a)),this.reminderForm.addControl("halfYearlyReminders",e)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(e){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[e],isActive:[{value:!0,disabled:!0}],name:[Ce[e]]})}createQuarterlyReminderFormGroup(e,o,a){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[{value:this.getCurrentDay(),disabled:!0}],month:[{value:a[0],disabled:!0}],name:[o],monthValues:[a]})}createHalfYearlyReminderFormGroup(e,o,a){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[{value:this.getCurrentDay(),disabled:!0}],month:[{value:a[0],disabled:!0}],name:[o],monthValues:[a]})}getCurrentDay(){return new Date().getDate()}onDateChange(e){let o=e.get("day")?.value,a=e.get("month")?.value,p=new Date(new Date().getFullYear(),Number.parseInt(a),0).getDate();o>p&&(e.setErrors({invalidDate:"Invalid Date"}),e.markAllAsTouched())}static \u0275fac=function(o){return new(o||t)(E(se),E(K),E(V),E(G),E(T))};static \u0275cmp=Q({type:t,selectors:[["app-reminder-detail"]],features:[U([T]),Y],decls:40,vars:21,consts:[[1,"d-flex"],[1,"me-auto","p-2"],[1,"mb-3","page-title"],[1,"d-flex","justify-content-end","mb-2"],[1,"close-icon","text-danger","cursor-pointer",3,"click"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-4"],["color","primary","formControlName","isRepeated",3,"change"],[1,"col-md-2"],["color","primary","formControlName","isEmailNotification"],[1,"form-group","col-md-6"],[1,"spinner-container"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value"],[1,"text-danger"],[1,"col-md-12"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],["formControlName","month",1,"form-control"],["formControlName","day",1,"form-control"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate",1,"form-control",3,"min","placeholder"],["formControlName","endDate",1,"form-control",3,"placeholder"],["mode","indeterminate","diameter","60","strokeWidth","5"]],template:function(o,a){if(o&1&&(n(0,"mat-dialog-content")(1,"div",0)(2,"div",1)(3,"span",2),m(4),d(5,"translate"),r()(),n(6,"div",3)(7,"mat-icon",4),I("click",function(){return a.closeDialog()}),m(8,"cancel"),r()()(),n(9,"div",5)(10,"div",6)(11,"form",7)(12,"div",5)(13,"div",8)(14,"label",9),m(15),d(16,"translate"),r(),D(17,"input",10),r()(),n(18,"div",5)(19,"div",8)(20,"label",11),m(21),d(22,"translate"),r(),D(23,"textarea",12),r()(),n(24,"div",5)(25,"div",13)(26,"mat-checkbox",14),I("change",function(u){return a.checkData(u)}),m(27),d(28,"translate"),r()(),n(29,"div",15)(30,"mat-checkbox",16),m(31),d(32,"translate"),r()(),D(33,"div",13),r(),h(34,ge,12,7,"div",5),h(35,Oe,6,4,"div",5),n(36,"div",5),h(37,Ue,6,8,"div",17),h(38,Ge,12,15),r()()()(),h(39,Ve,2,0,"div",18),r()),o&2){let p,u,C,M;i(4),c(" ",s(5,11,"REMINDER_DETAIL")," "),i(7),f("formGroup",a.reminderForm),i(4),c(" ",s(16,13,"SUBJECT")),i(6),c(" ",s(22,15,"MESSAGE")),i(6),c(" ",s(28,17,"REPEATE_REMINDER")," "),i(4),y(s(32,19,"SEND_EMAIL")),i(3),v((p=a.reminderForm.get("isRepeated"))!=null&&p.value?34:-1),i(),v((u=a.reminderForm.get("isRepeated"))!=null&&u.value?35:-1),i(2),v((C=a.reminderForm.get("isRepeated"))!=null&&C.value?-1:37),i(),v((M=a.reminderForm.get("isRepeated"))!=null&&M.value?38:-1),i(),v(a.isLoading?39:-1)}},dependencies:[ye,L,fe,ue,ve,_e,he,pe,ie,me,de,Z,le,ee,te,re,oe,ne,ae,P,H,w,W,$,ce,X,z,j],encapsulation:2})};export{De as a};
