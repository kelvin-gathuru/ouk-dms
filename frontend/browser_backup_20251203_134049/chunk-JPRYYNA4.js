import{a as bt}from"./chunk-C62NKWNL.js";import"./chunk-GVGC473E.js";import{a as H}from"./chunk-PM3ZOWUF.js";import{a as w}from"./chunk-XA5EPKK2.js";import{a as lt,b as st,c as mt,d as pt,e as dt,f as ut,g as ct,h as gt,i as ft,j as St,k as ht,l as Ct,m as At,n as _t,o as Lt,p as vt}from"./chunk-O4QTDGQI.js";import{a as et}from"./chunk-UCAGIDEK.js";import"./chunk-TC5US2P6.js";import"./chunk-WFK47GYZ.js";import{a as X}from"./chunk-6GBRFDEJ.js";import{a as Z,b as tt}from"./chunk-GE3TJVIQ.js";import{a as Y}from"./chunk-ZXWR2MAY.js";import"./chunk-G4LST2RF.js";import"./chunk-FWRBVAV4.js";import"./chunk-NH2LHIRZ.js";import"./chunk-DTECNCC4.js";import"./chunk-2FSKRITI.js";import"./chunk-TQCCWZBZ.js";import"./chunk-QPRQJRAS.js";import{c as rt}from"./chunk-756DJ4VK.js";import"./chunk-JYYDN77K.js";import"./chunk-BQ4MMRNN.js";import"./chunk-JSAPTJHL.js";import"./chunk-UFOTACYY.js";import{a as it,b as nt,c as ot,e as at}from"./chunk-THB5JDTQ.js";import"./chunk-4E37NPLR.js";import"./chunk-56QOWAU7.js";import"./chunk-77WXBMFN.js";import"./chunk-XFBX5CPU.js";import"./chunk-C3OPHOKD.js";import"./chunk-KYSGX4IW.js";import"./chunk-LCPYESOB.js";import"./chunk-BFSIXXTJ.js";import{a as K}from"./chunk-DGFNMOMG.js";import{$ as k,$a as b,Ca as A,Da as _,Db as s,Dc as V,Eb as m,Fb as Q,Gc as q,Ia as c,Ja as o,Ka as a,La as g,Pa as f,Pc as W,Qa as S,Rc as J,W as n,Wa as L,_a as v,ab as R,d as N,ga as $,h as I,jb as r,ka as F,kb as y,lb as l,ma as u,rc as G,vb as z,zb as U}from"./chunk-KZMFGXDY.js";import{Pa as j,Ya as B,_b as E,fa as M,gb as P,la as O,o as C}from"./chunk-W3TJXGK4.js";import"./chunk-H5HZ6YB3.js";var x=class{constructor(i){this.loginAuditService=i}loginAuditSubject=new C([]);responseHeaderSubject=new C({});loadingSubject=new C(!1);loading$=this.loadingSubject.asObservable();_count=0;get count(){return this._count}responseHeaderSubject$=this.responseHeaderSubject.asObservable();connect(){return this.loginAuditSubject.asObservable()}disconnect(){this.loginAuditSubject.complete(),this.loadingSubject.complete()}loadLoginAudits(i){this.loadingSubject.next(!0),this.loginAuditService.getLoginAudits(i).pipe(P(()=>this.loadingSubject.next(!1))).subscribe(e=>{let d=JSON.parse(e.headers.get("X-Pagination")??"{}");this.responseHeaderSubject.next(d);let p=[...e.body??[]];this._count=p.length,this.loginAuditSubject.next(p)})}};var T=class t{constructor(i,e){this.httpClient=i;this.commonHttpErrorService=e}getLoginAudits(i){let e="LoginAudit",d=new V().set("Fields",i.fields??"").set("OrderBy",i.orderBy).set("PageSize",i.pageSize.toString()).set("Skip",i.skip.toString()).set("SearchQuery",i.searchQuery??"").set("id",i?.id?.toString()??"").set("userName",i?.userName?.toString()??"");return this.httpClient.get(e,{params:d,observe:"response"})}static \u0275fac=function(e){return new(e||t)(I(q),I(K))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})};var Tt=["input"],Dt=()=>[10,20,30];function Et(t,i){t&1&&(o(0,"th",29),r(1),s(2,"translate"),a()),t&2&&(n(),l(" ",m(2,1,"DATE_TIME")," "))}function It(t,i){if(t&1&&(o(0,"td",30),r(1),s(2,"utcToLocalTime"),a()),t&2){let e=i.$implicit;n(),l(" ",Q(2,1,e==null?null:e.loginTime,"full")," ")}}function yt(t,i){t&1&&(o(0,"th",29),r(1),s(2,"translate"),a()),t&2&&(n(),l(" ",m(2,1,"EMAIL")," "))}function wt(t,i){if(t&1&&(o(0,"td",30),r(1),a()),t&2){let e=i.$implicit;n(),l(" ",e.userName," ")}}function Ht(t,i){t&1&&(o(0,"th",29),r(1),s(2,"translate"),a()),t&2&&(n(),l(" ",m(2,1,"STATUS")," "))}function Mt(t,i){if(t&1&&(o(0,"span",31),r(1),s(2,"translate"),a()),t&2){let e=L().$implicit;n(),y(m(2,1,e==null||e.status==null?null:e.status.toUpperCase()))}}function Ot(t,i){if(t&1&&(o(0,"span",32),r(1),s(2,"translate"),a()),t&2){let e=L().$implicit;n(),y(m(2,1,e==null||e.status==null?null:e.status.toUpperCase()))}}function jt(t,i){if(t&1&&(o(0,"td",30),A(1,Mt,3,3,"span",31),A(2,Ot,3,3,"span",32),a()),t&2){let e=i.$implicit;n(),_((e==null?null:e.status)=="Success"?1:-1),n(),_((e==null?null:e.status)=="Error"?2:-1)}}function Bt(t,i){t&1&&(o(0,"th",29),r(1),s(2,"translate"),a()),t&2&&(n(),l(" ",m(2,1,"IP_ADDRESS")," "))}function Pt(t,i){if(t&1&&(o(0,"td",30),r(1),a()),t&2){let e=i.$implicit;n(),l(" ",e.remoteIP," ")}}function Nt(t,i){t&1&&(o(0,"th",33),r(1),s(2,"translate"),a()),t&2&&(n(),l("",m(2,1,"LATITUDE")," "))}function kt(t,i){if(t&1&&(o(0,"td",30),r(1),a()),t&2){let e=i.$implicit;n(),l(" ",e.latitude," ")}}function $t(t,i){t&1&&(o(0,"th",33),r(1),s(2,"translate"),a()),t&2&&(n(),l(" ",m(2,1,"LONGITUDE")," "))}function Ft(t,i){if(t&1&&(o(0,"td",30),r(1),a()),t&2){let e=i.$implicit;n(),l(" ",e.longitude," ")}}function zt(t,i){if(t&1&&(o(0,"td",34),g(1,"mat-paginator",35),a()),t&2){let e=L();n(),c("length",e.loginAuditResource.totalCount)("pageSize",e.loginAuditResource.pageSize)("pageSizeOptions",U(3,Dt))}}function Ut(t,i){t&1&&g(0,"tr",36)}function Qt(t,i){t&1&&g(0,"tr",37)}function Gt(t,i){t&1&&g(0,"tr",38)}function Vt(t,i){t&1&&(o(0,"tr")(1,"td")(2,"div",39)(3,"b"),r(4),s(5,"translate"),a()()()()),t&2&&(n(4),l(" ",m(5,1,"NO_DATA_FOUND")))}function qt(t,i){t&1&&(o(0,"div",28),g(1,"mat-progress-spinner",40),a())}var D=class t extends Y{constructor(e){super();this.loginAuditService=e;this.loginAuditResource=new bt,this.loginAuditResource.pageSize=10,this.loginAuditResource.orderBy="loginTime desc"}dataSource;loginAudits=[];displayedColumns=["loginTime","userName","remoteIP","status","latitude","longitude"];isLoadingResults=!0;loginAuditResource;loading$;paginator;sort;input;footerToDisplayed=["footer"];ngOnInit(){this.dataSource=new x(this.loginAuditService),this.dataSource.loadLoginAudits(this.loginAuditResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=O(this.sort.sortChange,this.paginator.page).pipe(E(e=>{this.loginAuditResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.loginAuditResource.pageSize=this.paginator.pageSize,this.loginAuditResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe(),this.sub$.sink=M(this.input.nativeElement,"keyup").pipe(j(1e3),B(),E(()=>{this.paginator.pageIndex=0,this.loginAuditResource.skip=0,this.loginAuditResource.userName=this.input.nativeElement.value,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.loginAuditResource.pageSize=e.pageSize,this.loginAuditResource.skip=e.skip,this.loginAuditResource.totalCount=e.totalCount)})}static \u0275fac=function(d){return new(d||t)(k(T))};static \u0275cmp=$({type:t,selectors:[["app-login-audit-list"]],viewQuery:function(d,p){if(d&1&&(v(w,5),v(H,5),v(Tt,5)),d&2){let h;b(h=R())&&(p.paginator=h.first),b(h=R())&&(p.sort=h.first),b(h=R())&&(p.input=h.first)}},features:[F],decls:44,vars:17,consts:[["input",""],[1,"content"],[1,"container-fluid"],[1,"d-flex","mb-2"],[1,"me-auto"],[1,"mb-0","page-title"],[3,"code"],["appearance","outlined"],[1,"m-2","col-sm-5"],[1,"form-control",3,"placeholder"],[1,"table-responsive"],[1,"grid-height-medium"],["mat-table","","matSort","","matSortActive","loginTime","matSortDirection","desc",3,"dataSource"],["matColumnDef","loginTime"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","status"],["matColumnDef","remoteIP"],["matColumnDef","latitude"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","longitude"],["matColumnDef","footer"],["mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["class","grid-header-color","mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[4,"matNoDataRow"],[1,"spinner-container"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"badge","bg-success"],[1,"badge","bg-danger"],["mat-header-cell",""],["mat-footer-cell","","colspan","6"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row","",1,"grid-header-color"],["mat-row",""],["mat-footer-row",""],[1,"m-2"],["mode","indeterminate","diameter","60","strokeWidth","5"]],template:function(d,p){d&1&&(o(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),r(5),s(6,"translate"),g(7,"app-page-help-text",6),a()()(),o(8,"mat-card",7)(9,"mat-card-header")(10,"div",8),g(11,"input",9,0),s(13,"translate"),a()(),o(14,"mat-card-content")(15,"div",10)(16,"div",11)(17,"table",12),f(18,13),u(19,Et,3,3,"th",14)(20,It,3,4,"td",15),S(),f(21,16),u(22,yt,3,3,"th",14)(23,wt,2,1,"td",15),S(),f(24,17),u(25,Ht,3,3,"th",14)(26,jt,3,2,"td",15),S(),f(27,18),u(28,Bt,3,3,"th",14)(29,Pt,2,1,"td",15),S(),f(30,19),u(31,Nt,3,3,"th",20)(32,kt,2,1,"td",15),S(),f(33,21),u(34,$t,3,3,"th",20)(35,Ft,2,1,"td",15),S(),f(36,22),u(37,zt,2,4,"td",23),S(),u(38,Ut,1,0,"tr",24)(39,Qt,1,0,"tr",25)(40,Gt,1,0,"tr",26)(41,Vt,6,3,"tr",27),a()()()()()()(),A(42,qt,2,0,"div",28),s(43,"async")),d&2&&(n(5),l("",m(6,11,"LOGIN_AUDIT_LOGS")," "),n(2),c("code","LOGIN_AUDIT_LOGS"),n(4),c("placeholder",z(m(13,13,"SEARCH_BY_USERNAME"))),n(6),c("dataSource",p.dataSource),n(21),c("matHeaderRowDef",p.displayedColumns)("matHeaderRowDefSticky",!0),n(),c("matRowDefColumns",p.displayedColumns),n(),c("matFooterRowDef",p.footerToDisplayed)("matFooterRowDefSticky",!0),n(2),_(m(43,15,p.dataSource.loading$)?42:-1))},dependencies:[w,H,vt,lt,mt,ft,dt,st,ht,pt,St,ut,gt,ct,Ct,_t,At,Lt,J,rt,at,it,nt,ot,tt,Z,W,X,G],styles:[".badge[_ngcontent-%COMP%]{font-weight:400;padding:.5em .6em}"]})};var Ee=[{path:"",component:D,data:{claimType:"VIEW_LOGIN_AUDIT_LOGS"},canActivate:[et]}];export{Ee as LOGIN_AUDIT_ROUTES};
