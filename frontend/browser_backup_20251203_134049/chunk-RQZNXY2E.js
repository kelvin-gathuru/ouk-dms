import{a as R}from"./chunk-XAYCIFZD.js";import{a as Ze}from"./chunk-R3FXUCTS.js";import{a as et}from"./chunk-3CL6ZVO7.js";import{a as Je}from"./chunk-FJIKVMJE.js";import{a as He}from"./chunk-3MHHJSMB.js";import{b as Qe}from"./chunk-RSOKOSFJ.js";import{a as tt}from"./chunk-KXR3ZNF4.js";import{b as Ke}from"./chunk-GZWDELLY.js";import{b as We}from"./chunk-IDUCEWII.js";import{a as Xe}from"./chunk-GNSE3KGA.js";import{a as ze,b as Ye,c as qe}from"./chunk-NAYIGTW2.js";import"./chunk-ZL3HBFEV.js";import"./chunk-73AGG5TT.js";import{a as Te}from"./chunk-YYODLXEO.js";import{a as Se}from"./chunk-DFMNWGTU.js";import"./chunk-C2FLN6YV.js";import"./chunk-KK3LA7D5.js";import"./chunk-PVDG46DZ.js";import{a as Re}from"./chunk-TC5US2P6.js";import{b as Be}from"./chunk-WFK47GYZ.js";import{a as fe}from"./chunk-DD7TOTAW.js";import{b as Ce}from"./chunk-VX5UXB3Q.js";import"./chunk-I43MH25B.js";import"./chunk-OHUA35YV.js";import{a as he}from"./chunk-6MWAWDLF.js";import{a as Pe}from"./chunk-3NQBK7XS.js";import{a as xe,b as Ee}from"./chunk-GE3TJVIQ.js";import{a as ue}from"./chunk-ZXWR2MAY.js";import"./chunk-G4LST2RF.js";import"./chunk-NJY6F3LT.js";import{a as Ge,b as je,c as $e}from"./chunk-FWRBVAV4.js";import"./chunk-NH2LHIRZ.js";import"./chunk-DTECNCC4.js";import"./chunk-2FSKRITI.js";import{d as Ue}from"./chunk-TQCCWZBZ.js";import"./chunk-QPRQJRAS.js";import{c as Le}from"./chunk-756DJ4VK.js";import{a as De}from"./chunk-JYYDN77K.js";import{b as ie,c as ne,d as oe,e as ae,f as re}from"./chunk-BQ4MMRNN.js";import{b as _e}from"./chunk-JSAPTJHL.js";import{b as ve}from"./chunk-UFOTACYY.js";import{e as Oe}from"./chunk-THB5JDTQ.js";import{a as me,b as ce}from"./chunk-4E37NPLR.js";import{ta as le,va as de}from"./chunk-56QOWAU7.js";import"./chunk-77WXBMFN.js";import"./chunk-XFBX5CPU.js";import{a as ge}from"./chunk-C3OPHOKD.js";import{C as Ne,E as we,c as ye,e as N,h as Ie,i as Ae,o as Me,r as be,s as Fe,t as Ve,u as ke}from"./chunk-KYSGX4IW.js";import"./chunk-LCPYESOB.js";import"./chunk-BFSIXXTJ.js";import"./chunk-DGFNMOMG.js";import{$ as E,Ab as j,Ca as _,Da as h,Db as d,Ea as G,Eb as m,Fb as Z,Ga as F,Ha as V,Ia as f,Ja as r,Ka as a,La as M,Pa as X,Pc as se,Qa as H,Rc as pe,Sa as b,Ua as y,W as o,Wa as C,Yb as ee,eb as B,ga as W,i as O,jb as l,ka as K,kb as T,lb as p,ma as L,oa as Q,p as D,pc as te,q as x,vb as k,yb as J}from"./chunk-KZMFGXDY.js";import{I as U,Ja as Y,_ as $,_b as q,za as z}from"./chunk-W3TJXGK4.js";import{p as w}from"./chunk-H5HZ6YB3.js";var nt=n=>({"margin-left.px":n}),ot=n=>({color:n}),P=(n,c)=>c.id;function at(n,c){n&1&&(r(0,"div",45),l(1),d(2,"translate"),a()),n&2&&(o(),p(" ",m(2,1,"DOCUMENT_IS_REQUIRED")," "))}function rt(n,c){if(n&1&&_(0,at,3,3,"div",45),n&2){let e,t=C();h(!((e=t.documentForm.get("url"))==null||e.errors==null)&&e.errors.required?0:-1)}}function lt(n,c){n&1&&(r(0,"div",45),l(1),d(2,"translate"),a()),n&2&&(o(),p(" ",m(2,1,"DOCUMENT_TYPE_IS_NOT_ALLOW")," "))}function dt(n,c){if(n&1&&_(0,lt,3,3,"div",45),n&2){let e,t=C();h(!((e=t.documentForm.get("extension"))==null||e.errors==null)&&e.errors.required?0:-1)}}function mt(n,c){n&1&&(r(0,"div",45),l(1),d(2,"translate"),a()),n&2&&(o(),p(" ",m(2,1,"NAME_IS_REQUIRED")," "))}function ct(n,c){if(n&1&&_(0,mt,3,3,"div",45),n&2){let e,t=C();h(!((e=t.documentForm.get("name"))==null||e.errors==null)&&e.errors.required?0:-1)}}function st(n,c){if(n&1&&(r(0,"div",52)(1,"mat-icon",54),l(2,"folder"),a(),r(3,"b"),l(4),a()()),n&2){let e=C().$implicit;o(4),T(e.name)}}function pt(n,c){if(n&1&&(r(0,"div",53)(1,"mat-icon",54),l(2,"folder"),a(),l(3),a()),n&2){let e=C().$implicit;f("matTooltip",e.name),o(3),p(" ",e.name," ")}}function ut(n,c){if(n&1&&(r(0,"mat-option",18)(1,"div",51),_(2,st,5,1,"div",52)(3,pt,4,2,"div",53),a()()),n&2){let e=c.$implicit;f("value",e.id),o(),f("ngStyle",j(3,nt,(e.deafLevel??0)*20)),o(),h(e.deafLevel==0?2:3)}}function gt(n,c){if(n&1){let e=b();r(0,"button",24),y("click",function(){D(e);let i=C();return x(i.addFolder())}),r(1,"mat-icon",25),l(2,"add"),a()()}}function ft(n,c){n&1&&(r(0,"div",45),l(1),d(2,"translate"),a()),n&2&&(o(),p(" ",m(2,1,"CATEGORY_IS_REQUIRED")," "))}function _t(n,c){if(n&1&&_(0,ft,3,3,"div",45),n&2){let e,t=C();h(!((e=t.documentForm.get("categoryId"))==null||e.errors==null)&&e.errors.required?0:-1)}}function ht(n,c){if(n&1&&(r(0,"mat-option",18),l(1),d(2,"storageType"),a()),n&2){let e=c.$implicit;f("value",e.id),o(),p(" ",Z(2,2,e.storageType,e.name)," ")}}function vt(n,c){if(n&1&&(r(0,"mat-option",22),l(1),a()),n&2){let e=c.$implicit;f("value",e.id)("ngStyle",j(3,ot,e==null?null:e.colorCode)),o(),p(" ",e.name," ")}}function Ct(n,c){if(n&1){let e=b();r(0,"button",24),y("click",function(){D(e);let i=C();return x(i.addDocumentStatus())}),r(1,"mat-icon",25),l(2,"add"),a()()}}function St(n,c){if(n&1&&(r(0,"mat-option",18)(1,"span"),l(2),a()()),n&2){let e=c.$implicit;f("value",e.id),o(2),T(e.companyName)}}function Tt(n,c){if(n&1&&(r(0,"mat-select",55)(1,"mat-option"),l(2),d(3,"translate"),a(),F(4,St,3,2,"mat-option",18,P),a()),n&2){let e=C();o(2),p("-- ",m(3,1,"NONE")," --"),o(2),V(e.clientStore.clients())}}function Dt(n,c){n&1&&(r(0,"label"),l(1),d(2,"translate"),a()),n&2&&(o(),T(m(2,1,"META_TAGS")))}function xt(n,c){if(n&1&&(r(0,"mat-option",18),l(1),a()),n&2){let e=c.$implicit;f("value",e.id),o(),T(e.name)}}function Et(n,c){n&1&&(r(0,"div",45),l(1),d(2,"translate"),a()),n&2&&(o(),p(" ",m(2,1,"META_TAG_VALUE_REQUIRED")," "))}function yt(n,c){if(n&1&&(r(0,"div",61),M(1,"input",65),d(2,"translate"),_(3,Et,3,3,"div",45),a()),n&2){let e,t=C().$implicit;o(),f("placeholder",k(m(2,3,"ENTER_META_TAG_VALUE"))),o(2),h((e=t.get("metatag"))!=null&&e.hasError("required")&&((e=t.get("metatag"))!=null&&e.touched)?3:-1)}}function It(n,c){n&1&&(r(0,"div",45),l(1),d(2,"translate"),a()),n&2&&(o(),p(" ",m(2,1,"META_TAG_VALUE_REQUIRED")," "))}function At(n,c){if(n&1){let e=b();r(0,"div",61)(1,"div",15),M(2,"input",66,1),d(4,"translate"),r(5,"div",67)(6,"button",68),y("click",function(){D(e);let i=B(10);return x(i.open())}),r(7,"mat-icon",69),l(8,"calendar_today"),a()()(),M(9,"mat-datepicker",null,2),a(),_(11,It,3,3,"div",45),a()}if(n&2){let e,t=B(10),i=C().$implicit;o(2),f("placeholder",k(m(4,4,"CHOOSE_A_DATE")))("matDatepicker",t),o(9),h((e=i.get("metaTagDate"))!=null&&e.hasError("required")&&((e=i.get("metaTagDate"))!=null&&e.touched)?11:-1)}}function Mt(n,c){if(n&1){let e=b();r(0,"button",70),y("click",function(){D(e);let i=C(2);return x(i.onAddAnotherMetaTag())}),r(1,"mat-icon"),l(2,"add"),a()()}}function bt(n,c){if(n&1){let e=b();r(0,"button",71),y("click",function(){D(e);let i=C().$index,s=C();return x(s.onDeleteMetaTag(i))}),r(1,"mat-icon"),l(2,"delete"),a()()}}function Ft(n,c){if(n&1){let e=b();X(0,29),_(1,Dt,3,3,"label"),r(2,"div",56)(3,"div",30)(4,"div",57)(5,"mat-select",58),d(6,"translate"),y("selectionChange",function(i){let s=D(e).$index,u=C();return x(u.onMetaTagKeyChange(i,s))}),r(7,"mat-option"),l(8),d(9,"translate"),a(),F(10,xt,2,2,"mat-option",18,P),a()(),r(12,"div",59)(13,"div",60),_(14,yt,4,5,"div",61),_(15,At,12,6,"div",61),r(16,"div",62),_(17,Mt,3,0,"button",63)(18,bt,3,0,"button",64),a()()()()(),H()}if(n&2){let e,t,i=c.$implicit,s=c.$index,u=C();f("formGroupName",s),o(),h(s==0?1:-1),o(4),f("placeholder",k(m(6,8,"SELECT_META_TAG"))),o(3),p("-- ",m(9,10,"NONE")," --"),o(2),V(u.metaTags()),o(4),h(((e=i.get("metaTagType"))==null?null:e.value)==0?14:-1),o(),h(((t=i.get("metaTagType"))==null?null:t.value)==1?15:-1),o(2),h(s==0?17:18)}}function Vt(n,c){n&1&&(r(0,"div",45),l(1),d(2,"translate"),a()),n&2&&(o(),p(" ",m(2,1,"SELECT_RETENTION_PERIOD")," "))}function kt(n,c){n&1&&(r(0,"div",50),M(1,"mat-progress-spinner",72),a())}var it=class n extends ue{constructor(e,t,i,s,u,g,S,v,I,A,Nt,wt){super();this.fb=e;this.cd=t;this.categoryService=i;this.dialogRef=s;this.commonService=u;this.toastrService=g;this.documentStatusService=S;this.clonerService=v;this.StorageSettingService=I;this.pptxMetadataService=A;this.documentService=Nt;this.categoryId=wt}isLoadingResults=!1;document;documentForm;extension="";categories=[];allCategories=[];allStorageSetting=[];allDocumentStatus=[];allowFileExtension=[];onSaveDocument=new Q;fileData;documentId="";isLoading=!1;mode="determinate";progress=0;documentStore=O(Ce);chunkSize=fe.chunkSize;foldersViewStore=O(Te);dialog=O(oe);get documentMetaTagsArray(){return this.documentForm.get("documentMetaTags")}clientStore=O(We);documentMetaTagStore=O(Ke);metaTags=this.documentMetaTagStore.documentMetaTags;selectedCategory;ngOnInit(){this.getCategories(),this.getDocumentStatus(),this.getStorageSetting(),this.createDocumentForm(),this.getAllAllowFileExtension(),this.documentMetaTagsArray.push(this.buildDocumentMetaTag())}getCategories(){this.categoryService.getAllAssignToMeCategoriesForDropDown().subscribe(e=>{if(this.categories=[...e],this.categories.forEach((t,i)=>{t.deafLevel=0,t.index=i*Math.pow(.1,t.deafLevel),t.displayName=t.name,this.allCategories.push(t),this.setDeafLevel(t)}),this.allCategories=this.clonerService.deepClone(this.allCategories),this.categoryId){let t=this.allCategories.find(i=>i.id===this.categoryId);t&&this.onCategoryChange({value:t.id})}})}onCategoryChange(e){this.selectedCategory=this.allCategories.find(t=>t.id===e.value)}setDeafLevel(e){return e?.children&&e.children.length>0&&e.children.map((t,i)=>{t.displayName=e.displayName+" > "+t.name,t.deafLevel=e?(e.deafLevel??0)+1:0,t.index=e?(e.index??0)+i*Math.pow(.1,t.deafLevel):0,this.allCategories.push(t),this.setDeafLevel(t)}),e}getDocumentStatus(){this.documentStatusService.getDocumentStatuss().subscribe(e=>{Array.isArray(e)&&(this.allDocumentStatus=e)})}getStorageSetting(){this.StorageSettingService.getStorageSettings().subscribe(e=>{if(Array.isArray(e)){this.allStorageSetting=e;let t=this.allStorageSetting.find(i=>i.isDefault);t&&this.documentForm.patchValue({storageSettingId:t.id})}})}getAllAllowFileExtension(){this.commonService.getAllowFileExtensions().subscribe(e=>{this.allowFileExtension=e})}fileUploadValidation(e){this.documentForm.patchValue({url:e}),this.documentForm?.get("url").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadExtensionValidation(e){this.documentForm.patchValue({extension:e}),this.documentForm?.get("extension").markAsTouched(),this.documentForm.updateValueAndValidity()}fileExtesionValidation(e){return!!this.allowFileExtension.find(i=>i.extensions?.find(s=>s.toLowerCase()===e.toLowerCase()))}createDocumentForm(){this.documentForm=this.fb.group({name:["",[N.required]],description:[""],categoryId:[this.categoryId,[N.required]],documentStatusId:[""],storageSettingId:[""],clientId:[""],url:["",[N.required]],extension:["",[N.required]],documentMetaTags:this.fb.array([]),retentionPeriodInDays:["0"],onExpiryAction:["0"]},{validators:tt})}buildDocumentMetaTag(){return this.fb.group({id:[""],documentId:[""],documentMetaTagId:[""],metatag:[""],metaTagDate:[null],metaTagType:[0]})}onMetaTagKeyChange(e,t){let i=e.value;if(this.documentMetaTagsArray.value.map(I=>I.documentMetaTagId).filter(I=>I===i).length>1){this.toastrService.error(this.translationService.getValue("DUPLICATE_META_TAG_NOT_ALLOWED")),this.documentMetaTagsArray.at(t).get("documentMetaTagId")?.setValue(null);return}let u=this.metaTags().find(I=>I.id===i);if(!u)return;let g=this.documentMetaTagsArray.at(t),S=g.get("metatag"),v=g.get("metaTagDate");g.get("metaTagType")?.setValue(u.type),u.type===0?(S?.setValidators([N.required]),S?.updateValueAndValidity(),v?.clearValidators(),v?.setValue(null),v?.updateValueAndValidity()):u.type===1&&(v?.setValidators([N.required]),v?.updateValueAndValidity(),S?.clearValidators(),S?.setValue(null),S?.updateValueAndValidity())}editDocmentMetaData(e){return this.fb.group({id:[e.id],documentId:[e.documentId],documentMetaTagId:[e.documentMetaTagId],metatag:[e.metatag],metaTagDate:[e.metaTagDate],metaTagType:[e.metaTagType]})}saveDocument(){if(this.documentForm.valid){this.isLoading=!0,this.cd.detectChanges();let e=this.commonService.getInternetSpeed();this.fileData.size>this.chunkSize?this.saveDocumentChunk():this.saveIndividualDocument()}else this.markFormGroupTouched(this.documentForm)}saveDocumentChunk(){this.documentService.addChunkDocument(this.buildDocumentObject()).subscribe(e=>{this.documentId=e.id??"",this.document=e,this.uploadFileInChunks(e.documentVersionId??"")})}uploadFileInChunks(e){if(!this.fileData)return;let{chunkSize1:t,parallelCalls:i}=this.commonService.getNetworkSpeed(),s=Math.ceil(this.fileData.size/this.chunkSize),u=[];for(let g=0;g<s;g++){let S=g*this.chunkSize,v=Math.min(S+this.chunkSize,this.fileData.size),I=this.fileData.slice(S,v),A=new FormData;A.append("file",I),A.append("chunkIndex",g.toString()),A.append("size",this.chunkSize.toString()),A.append("totalChunks",s.toString()),A.append("extension",this.extension),A.append("documentVersionId",e),u.push(A)}this.isLoading=!0,this.sub$.sink=U(u).pipe(z(i),Y(g=>U(g).pipe(q(()=>console.log("Processing batch:",g)),$(S=>this.uploadChunk(S),i)))).subscribe({next:g=>{this.progress=Math.min(this.progress+100/u.length,100)},complete:()=>{this.progress=100,this.isLoading=!1,this.markChunkAsUploaded(),this.addDocumentTrail(this.documentId),this.documentStore.loadDocuments(),this.foldersViewStore.selectedCategoryId()==this.document.categoryId&&(this.foldersViewStore.setDocumentsEmpty(),this.foldersViewStore.loadDocumentsByCategory(this.foldersViewStore.selectedCategoryId()))},error:g=>{this.isLoading=!1,this.markChunkAsUploaded(!1)}})}markChunkAsUploaded(e=!0){this.isLoading=!0,this.commonService.markChunkAsUploaded(this.documentId,e).subscribe({next:t=>{this.isLoading=!1},error:t=>{this.isLoading=!1}})}uploadChunk(e){return this.documentService.uploadChunkDocument(e)}saveIndividualDocument(){if(this.isLoading=!0,this.cd.detectChanges(),this.documentForm.valid){let e=this.buildDocumentObject();this.sub$.sink=this.commonService.addDocumentWithAssign(e).subscribe({next:t=>{this.addDocumentTrail(t.id??""),this.toastrService.success(this.translationService.getValue("DOCUMENT_SAVE_SUCCESSFULLY")),this.isLoading=!1},error:t=>{this.isLoading=!1}})}else this.markFormGroupTouched(this.documentForm),this.isLoading=!1}onAddAnotherMetaTag(){let t=this.documentMetaTagsArray.value.map(i=>i.documentMetaTagId).filter(i=>i!=="");if(new Set(t).size!==t.length){this.toastrService.error(this.translationService.getValue("DUPLICATE_META_TAG_NOT_ALLOWED"));return}this.documentMetaTagsArray.push(this.buildDocumentMetaTag()),this.documentForm.updateValueAndValidity(),this.cd.detectChanges()}onDeleteMetaTag(e){this.documentMetaTagsArray.removeAt(e),this.documentForm.updateValueAndValidity(),this.cd.detectChanges()}closeDialog(){this.dialogRef.close()}addDocumentTrail(e){let t={documentId:e,operationName:2 .toString()};this.documentStore.addDocumentAudit(t),this.dialogRef.close(!0)}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched(),t.controls&&this.markFormGroupTouched(t)})}buildMetaTagObject(){return(this.documentMetaTagsArray.getRawValue().length>0?this.documentMetaTagsArray.getRawValue():[]).map(i=>({id:i.id,documentId:i.documentId,documentMetaTagId:i.documentMetaTagId,metatag:i.metatag,metaTagDate:i.metaTagDate?.toString()==="Invalid Date"?void 0:i.metaTagDate?new Date(i.metaTagDate).toISOString():void 0,metaTagType:i.metaTagType}))}buildDocumentObject(){return{categoryId:this.documentForm?.get("categoryId")?.value??"",documentStatusId:this.documentForm?.get("documentStatusId")?.value??"",storageSettingId:this.documentForm?.get("storageSettingId")?.value??"",clientId:this.documentForm?.get("clientId")?.value??"",description:this.documentForm?.get("description")?.value,name:this.documentForm?.get("name")?.value,url:this.fileData.fileName,documentMetaDatas:[...this.buildMetaTagObject()],file:this.fileData,extension:this.extension,isAssignToMe:!0,retentionPeriodInDays:this.documentForm?.get("retentionPeriodInDays")?.value??null,onExpiryAction:this.documentForm?.get("onExpiryAction")?.value??null}}upload(e){return w(this,null,function*(){if(!(!e||e.length===0)){if(!(yield Pe(e[0]))){this.fileUploadValidation(""),this.toastrService.error(this.translationService.getValue("INVALID_EXTENSION_OR_CORRUPT_INVALID_SIGNATURE")),this.cd.markForCheck();return}if(this.extension=e[0].name.split(".").pop()??"",this.fileExtesionValidation(this.extension))this.fileUploadExtensionValidation("valid"),this.cd.markForCheck();else{this.fileUploadExtensionValidation(""),this.cd.markForCheck();return}if(this.fileData=e[0],this.extension==="pdf")yield this.getPDFMetadata(e[0]);else if(this.extension==="docx"||this.extension==="doc"){let t=yield this.readWordMetadata(e[0])}else this.extension==="ppt"||this.extension==="pptx"?this.readPPTXMetadata(e[0]):(this.extension==="xls"||this.extension==="xlsx")&&this.readXlsMetadata(e[0]);this.documentForm?.get("url").setValue(e[0].name),this.documentForm?.get("name").setValue(e[0].name)}})}readWordMetadata(e){return w(this,null,function*(){let t=yield this.pptxMetadataService.extractMetadata(e);t&&(this.populateMetadataTags(t),console.log("Metadata:",t))})}readPPTXMetadata(e){return w(this,null,function*(){let t=yield this.pptxMetadataService.extractMetadata(e);t&&(this.populateMetadataTags(t),console.log("Metadata:",t))})}readXlsMetadata(e){return w(this,null,function*(){let t=yield this.pptxMetadataService.extractMetadata(e);t&&(this.populateMetadataTags(t),console.log("Metadata:",t))})}populateMetadataTags(e){this.documentMetaTagsArray.clear(),Object.keys(e).forEach(t=>{let i=this.metaTags().find(u=>u?.name.toLocaleLowerCase()===t),s=t.toLocaleLowerCase()==="title"&&(!e[t]||e[t].toLocaleLowerCase()==="n/a")?this.fileData.name.split(".")[0]:e[t];i&&s&&this.documentMetaTagsArray.push(this.fb.group({id:[""],documentId:[""],documentMetaTagId:[i.id],metatag:[i.type==0?s:""],metaTagDate:[i.type==1&&s?new Date(s):null],metaTagType:[i.type]}))}),this.documentForm.updateValueAndValidity(),this.cd.detectChanges()}getPDFMetadata(e){return w(this,null,function*(){let t=yield this.pptxMetadataService.getPDFMetadata(e);t&&this.populateMetadataTags(t)})}addFolder(){this.dialog.open(Je,{width:"400px",data:Object.assign({},null)}).afterClosed().subscribe(t=>{t&&(this.categories=[...this.categories,t],this.categories.forEach((i,s)=>{i.deafLevel=0,i.index=s*Math.pow(.1,i.deafLevel),i.displayName=i.name,this.allCategories.push(i),this.setDeafLevel(i)}),this.allCategories=this.clonerService.deepClone(this.allCategories),this.documentForm.get("categoryId")?.setValue(t.id))})}addClient(){this.dialog.open(Ze,{maxWidth:"50vw",width:"100%",data:!0}).afterClosed().subscribe(t=>{t&&this.documentForm.get("clientId")?.setValue(t.id)})}addDocumentStatus(){this.dialog.open(et,{width:"500px"}).afterClosed().subscribe(t=>{t&&(this.allDocumentStatus=[...this.allDocumentStatus,t],this.documentForm.get("documentStatusId")?.setValue(t.id))})}static \u0275fac=function(t){return new(t||n)(E(Ne),E(ee),E(Se),E(ie),E(ve),E(_e),E(Xe),E(ge),E(He),E(R),E(he),E(ne))};static \u0275cmp=W({type:n,selectors:[["app-add-document"]],outputs:{onSaveDocument:"onSaveDocument"},features:[J([R]),K],decls:153,vars:105,consts:[["file",""],["ref",""],["picker",""],[1,"d-flex"],[1,"me-auto","p-2"],[1,"mb-3","page-title"],[3,"code"],[1,"d-flex","justify-content-end","mb-2"],[1,"close-icon","text-danger","cursor-pointer",3,"click"],[3,"formGroup"],[1,"row","gy-3"],[1,"col-sm-12","col-md-6"],[1,"form-group"],["type","file",1,"form-control",3,"change"],["formControlName","name","type","text",1,"form-control"],[1,"input-group"],["panelClass","mat-select-control","formControlName","categoryId",1,"form-control",3,"selectionChange","placeholder"],[3,"matTooltip"],[3,"value"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"hasClaim"],["panelClass","mat-select-control","formControlName","storageSettingId",1,"form-control"],["panelClass","mat-select-control","formControlName","documentStatusId",1,"form-control"],[3,"value","ngStyle"],["panelClass","mat-select-control","class","form-control","formControlName","clientId",4,"hasClaim"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"medium-icon","fs-5","align-middle"],[1,"col-sm-12","col-md-12"],["formControlName","description",1,"form-control"],["formArrayName","documentMetaTags"],[3,"formGroupName"],[1,"row"],[1,"col-md-6"],["panelClass","mat-select-control","formControlName","retentionPeriodInDays",1,"form-control",3,"placeholder"],["value","0"],["value","30"],["value","60"],["value","90"],["value","180"],["value","365"],["value","730"],["value","1095"],["value","1825"],["panelClass","mat-select-control","formControlName","onExpiryAction",1,"form-control",3,"placeholder"],["value","1"],["value","2"],[1,"text-danger"],[1,"mt-2","col-md-12"],["matButton","filled","cdkFocusInitial","",1,"success","me-2",3,"click"],[1,"medium-icon"],["type","button","matButton","filled",1,"error",3,"click"],[1,"spinner-overlay"],[1,"country-item",3,"ngStyle"],[1,"d-flex","align-items-center"],[1,"d-flex","align-items-center",3,"matTooltip"],[1,"text-warning","me-1"],["panelClass","mat-select-control","formControlName","clientId",1,"form-control"],[1,"form-group","mb-3","meta-tag-item"],[1,"col-12","col-md-4","mb-2","mb-md-0"],["panelClass","mat-select-control","formControlName","documentMetaTagId",1,"form-control",3,"selectionChange","placeholder"],[1,"col-12","col-md-8"],[1,"row","align-items-center"],[1,"col-9","col-md-9"],[1,"col-3","col-md-auto","text-end","ps-0"],["type","button",1,"btn","btn-outline-success"],["type","button",1,"btn","btn-outline-danger"],["formControlName","metatag","type","text",1,"form-control",3,"placeholder"],["formControlName","metaTagDate",1,"form-control",3,"placeholder","matDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],[1,"medium-icon","fs-6","align-middle"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["mode","indeterminate","diameter","60","strokeWidth","5"]],template:function(t,i){if(t&1){let s=b();r(0,"mat-dialog-content")(1,"div",3)(2,"div",4)(3,"span",5),l(4),d(5,"translate"),M(6,"app-page-help-text",6),a()(),r(7,"div",7)(8,"mat-icon",8),y("click",function(){return D(s),x(i.closeDialog())}),l(9,"cancel"),a()()(),r(10,"form",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label"),l(15),d(16,"translate"),a(),r(17,"input",13,0),y("change",function(){D(s);let g=B(18);return x(i.upload(g.files))}),a(),_(19,rt,1,1),_(20,dt,1,1),a()(),r(21,"div",11)(22,"div",12)(23,"label"),l(24),d(25,"translate"),a(),M(26,"input",14),_(27,ct,1,1),a()(),r(28,"div",11)(29,"div",12)(30,"label"),l(31),d(32,"translate"),a(),r(33,"div",15)(34,"mat-select",16),d(35,"translate"),y("selectionChange",function(g){return D(s),x(i.onCategoryChange(g))}),r(36,"mat-select-trigger")(37,"span",17),l(38),d(39,"translate"),a()(),r(40,"mat-option",18),l(41),d(42,"translate"),a(),F(43,ut,4,5,"mat-option",18,G),a(),L(45,gt,3,0,"button",19),a(),_(46,_t,1,1),a()(),r(47,"div",11)(48,"div",12)(49,"label"),l(50),d(51,"translate"),a(),r(52,"mat-select",20),F(53,ht,3,5,"mat-option",18,P),a()()(),r(55,"div",11)(56,"div",12)(57,"label"),l(58),d(59,"translate"),a(),r(60,"div",15)(61,"mat-select",21)(62,"mat-option"),l(63),d(64,"translate"),a(),F(65,vt,2,5,"mat-option",22,P),a(),L(67,Ct,3,0,"button",19),a()()(),r(68,"div",11)(69,"div",12)(70,"label"),l(71),d(72,"translate"),a(),r(73,"div",15),L(74,Tt,6,3,"mat-select",23),r(75,"button",24),y("click",function(){return D(s),x(i.addClient())}),r(76,"mat-icon",25),l(77,"add"),a()()()()(),r(78,"div",26)(79,"div",12)(80,"label"),l(81),d(82,"translate"),a(),M(83,"textarea",27),a()(),r(84,"div",26)(85,"div",28),F(86,Ft,19,12,"ng-container",29,G),a()(),r(88,"div",30)(89,"div",31)(90,"div",12)(91,"label"),l(92),d(93,"translate"),a(),r(94,"mat-select",32),d(95,"translate"),r(96,"mat-option",33),l(97),d(98,"translate"),a(),r(99,"mat-option",34),l(100),d(101,"translate"),a(),r(102,"mat-option",35),l(103),d(104,"translate"),a(),r(105,"mat-option",36),l(106),d(107,"translate"),a(),r(108,"mat-option",37),l(109),d(110,"translate"),a(),r(111,"mat-option",38),l(112),d(113,"translate"),a(),r(114,"mat-option",39),l(115),d(116,"translate"),a(),r(117,"mat-option",40),l(118),d(119,"translate"),a(),r(120,"mat-option",41),l(121),d(122,"translate"),a()()()(),r(123,"div",31)(124,"div",12)(125,"label"),l(126),d(127,"translate"),a(),r(128,"mat-select",42),d(129,"translate"),r(130,"mat-option",33),l(131),d(132,"translate"),a(),r(133,"mat-option",43),l(134),d(135,"translate"),a(),r(136,"mat-option",44),l(137),d(138,"translate"),a()(),_(139,Vt,3,3,"div",45),a()()()(),r(140,"div",30)(141,"div",46)(142,"button",47),y("click",function(){return D(s),x(i.saveDocument())}),r(143,"mat-icon",48),l(144,"save"),a(),l(145),d(146,"translate"),a(),r(147,"button",49),y("click",function(){return D(s),x(i.closeDialog())}),r(148,"mat-icon",48),l(149,"cancel"),a(),l(150),d(151,"translate"),a()()()(),_(152,kt,2,0,"div",50),a()}if(t&2){let s,u,g,S,v;o(4),p(" ",m(5,45,"ADD_DOCUMENT")," "),o(2),f("code","ADD_DOCUMENT"),o(4),f("formGroup",i.documentForm),o(5),T(m(16,47,"DOCUMENT_UPLOAD")),o(4),h(((s=i.documentForm.get("url"))!=null&&s.touched||(s=i.documentForm.get("url"))!=null&&s.dirty)&&((s=i.documentForm.get("url"))!=null&&s.errors)?19:-1),o(),h(((u=i.documentForm.get("extension"))!=null&&u.touched||(u=i.documentForm.get("extension"))!=null&&u.dirty)&&((u=i.documentForm.get("url"))!=null&&u.errors)?20:-1),o(4),T(m(25,49,"NAME")),o(3),h((g=i.documentForm.get("name"))!=null&&g.touched&&((g=i.documentForm.get("name"))!=null&&g.errors)?27:-1),o(4),T(m(32,51,"CATEGORY")),o(3),f("placeholder",k(m(35,53,"SELECT_CATEGORY"))),o(3),f("matTooltip",i.selectedCategory==null?null:i.selectedCategory.displayName),o(),p(" ",m(39,55,(i.selectedCategory==null?null:i.selectedCategory.displayName)||"NONE")," "),o(3),p("-- ",m(42,57,"NONE")," --"),o(2),V(i.allCategories),o(2),f("hasClaim","CREATE_CATEGORY"),o(),h((S=i.documentForm.get("categoryId"))!=null&&S.touched&&((S=i.documentForm.get("categoryId"))!=null&&S.errors)?46:-1),o(4),T(m(51,59,"STORAGE")),o(3),V(i.allStorageSetting),o(5),T(m(59,61,"DOCUMENT_STATUS")),o(5),p("-- ",m(64,63,"NONE")," --"),o(2),V(i.allDocumentStatus),o(2),f("hasClaim","MANAGE_DOCUMENT_STATUS"),o(4),T(m(72,65,"CLIENT")),o(3),f("hasClaim","ADD_CLIENTS"),o(7),T(m(82,67,"DESCRIPTION")),o(5),V(i.documentMetaTagsArray.controls),o(6),T(m(93,69,"RETENTION_PERIOD")),o(2),f("placeholder",k(m(95,71,"RETENTION_PERIOD"))),o(3),p("-- ",m(98,73,"NONE")," --"),o(3),p(" ",m(101,75,"30_DAYS")," "),o(3),p(" ",m(104,77,"60_DAYS")," "),o(3),p(" ",m(107,79,"90_DAYS")," "),o(3),p(" ",m(110,81,"180_DAYS")," "),o(3),p(" ",m(113,83,"365_DAYS")," "),o(3),p(" ",m(116,85,"2_YEARS")," "),o(3),p(" ",m(119,87,"3_YEARS")," "),o(3),p(" ",m(122,89,"5_YEARS")," "),o(5),T(m(127,91,"RETENTION_PERIOD_ACTION")),o(2),f("placeholder",k(m(129,93,"RETENTION_PERIOD_ACTION"))),o(3),p("-- ",m(132,95,"NONE")," --"),o(3),p(" ",m(135,97,"ARCHIVE")," "),o(3),p(" ",m(138,99,"DELETE")," "),o(2),h(((v=i.documentForm.get("retentionPeriodInDays"))!=null&&v.touched||(v=i.documentForm.get("retentionPeriodInDays"))!=null&&v.dirty||(v=i.documentForm.get("onExpiryAction"))!=null&&v.touched||(v=i.documentForm.get("onExpiryAction"))!=null&&v.dirty)&&(i.documentForm.errors!=null&&i.documentForm.errors.retentionPeriodAndAction)?139:-1),o(6),p(" ",m(146,101,"SAVE")," "),o(5),p(" ",m(151,103,"CANCEL")," "),o(2),h(i.isLoading?152:-1)}},dependencies:[Le,we,Me,ye,Ie,Ae,be,ke,Fe,Ve,re,ae,Ee,xe,qe,ze,Ye,$e,Ge,je,Ue,pe,de,le,Re,Be,ce,me,Oe,te,De,se,Qe],styles:[".spinner-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#ffffffb3;display:flex;justify-content:center;align-items:center;z-index:1000}"]})};export{it as AddDocumentComponent};
