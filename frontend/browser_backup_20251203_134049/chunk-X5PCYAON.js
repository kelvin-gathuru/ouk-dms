import{a as Le}from"./chunk-K745AODG.js";import{a as De,b as Ie,c as ye}from"./chunk-DFQZAZAP.js";import{a as we,b as _e,c as Ce,e as ve,f as ke,h as xe,i as ge,k as he,l as Se,n as Te,o as We,p as be}from"./chunk-O4QTDGQI.js";import"./chunk-7UZYWCAJ.js";import{a as Ee}from"./chunk-LTSUZ232.js";import{a as ae}from"./chunk-FEGUHXJM.js";import"./chunk-RVLTDB3N.js";import"./chunk-SNGHJ5LW.js";import"./chunk-VYDQFFXG.js";import"./chunk-UAZBTE34.js";import"./chunk-PT2JM3JA.js";import"./chunk-YYODLXEO.js";import"./chunk-DFMNWGTU.js";import{a as se}from"./chunk-D6HICPES.js";import"./chunk-PVDG46DZ.js";import{a as ue}from"./chunk-TC5US2P6.js";import{b as fe}from"./chunk-WFK47GYZ.js";import"./chunk-DD7TOTAW.js";import"./chunk-VX5UXB3Q.js";import"./chunk-I43MH25B.js";import"./chunk-OHUA35YV.js";import{c as me}from"./chunk-BBTJI4ZO.js";import"./chunk-L52YSXRC.js";import"./chunk-6MWAWDLF.js";import{a as Me}from"./chunk-BIHV7ZGQ.js";import"./chunk-DTECNCC4.js";import{c as ce}from"./chunk-756DJ4VK.js";import{a as re}from"./chunk-JYYDN77K.js";import{b as X,c as q,d as J,e as Q,f as Z}from"./chunk-BQ4MMRNN.js";import{b as ne}from"./chunk-JSAPTJHL.js";import"./chunk-UFOTACYY.js";import{a as pe,b as de,e as B}from"./chunk-THB5JDTQ.js";import{a as O,b as N}from"./chunk-4E37NPLR.js";import{ta as ee,ua as te,va as R}from"./chunk-56QOWAU7.js";import"./chunk-77WXBMFN.js";import"./chunk-XFBX5CPU.js";import{a as oe}from"./chunk-C3OPHOKD.js";import{D as le}from"./chunk-KYSGX4IW.js";import{a as ie}from"./chunk-LCPYESOB.js";import{h as Y,k as z}from"./chunk-BFSIXXTJ.js";import"./chunk-DGFNMOMG.js";import{$ as S,Ab as U,Ca as C,Da as v,Db as p,Eb as d,Fa as V,Fb as K,Ga as $,Ha as H,Ia as c,Ib as L,Ja as a,Ka as o,La as k,Pa as T,Pc as G,Qa as W,Rc as F,Sa as b,Ua as E,W as i,Wa as s,fb as j,ga as D,i as _,jb as r,kb as u,lb as m,ma as f,p as g,q as h,r as M,za as I,zb as y}from"./chunk-KZMFGXDY.js";import"./chunk-W3TJXGK4.js";import{a as P}from"./chunk-H5HZ6YB3.js";var Be=()=>[1e3,300];function Ae(e,n){e&1&&(M(),a(0,"marker",19),k(1,"path",20),o())}function Pe(e,n){if(e&1&&(M(),a(0,"g",21),k(1,"rect"),a(2,"text",22),r(3),o()()),e&2){let t=n.$implicit;i(),I("width",(t.dimension==null?null:t.dimension.width)||100)("height",(t.dimension==null?null:t.dimension.height)||50)("fill",(t.data==null?null:t.data.color)||"#ccc"),i(),I("fill","#fff")("x",10)("y",((t.dimension==null?null:t.dimension.height)||50)/2),i(),m(" ",t.label," ")}}function Ve(e,n){if(e&1&&(M(),a(0,"g",23),k(1,"path",24),a(2,"text",25)(3,"textPath",26),r(4),o()()()),e&2){let t=s().$implicit;i(3),j("dominant-baseline",t.dominantBaseline),I("fill",t.status===1?"green":"black")("href","#"+t.id),i(),m(" ",t.label," ")}}function $e(e,n){if(e&1&&C(0,Ve,5,5,":svg:g",23),e&2){let t=n.$implicit;v(t.source&&t.target?0:-1)}}function He(e,n){if(e&1&&(a(0,"p",18)(1,"strong"),r(2),p(3,"translate"),o(),r(4),o()),e&2){let t=s();i(2),m("",d(3,2,"DESCRIPTION"),":"),i(2),m(" ",t.data.workflowDescription," ")}}function je(e,n){if(e&1&&(a(0,"p",18),r(1),o()),e&2){let t=s().$implicit;i(),m("Assigned To Roles: ",t.assignRoles)}}function Ue(e,n){if(e&1&&(a(0,"p",18),r(1),o()),e&2){let t=s().$implicit;i(),m("Assigned To Users: ",t.assignUsers)}}function Ke(e,n){if(e&1&&(a(0,"div",13)(1,"div",27)(2,"mat-icon",28),r(3,"schedule"),o(),a(4,"div")(5,"span",29),r(6),o()()(),a(7,"div",16)(8,"div",30)(9,"div",31)(10,"span",32),r(11),o()(),a(12,"div",31)(13,"mat-icon",33),r(14,"arrow_right"),o()(),a(15,"div",34)(16,"span",32),r(17),o()()(),C(18,je,2,1,"p",18),C(19,Ue,2,1,"p",18),o()()),e&2){let t=n.$implicit;i(6),u(t.name),i(5),u(t.fromStepName),i(6),u(t.toStepName),i(),v(t!=null&&t.assignRoles?18:-1),i(),v(t!=null&&t.assignUsers?19:-1)}}function Ye(e,n){if(e&1&&(a(0,"div",12)(1,"div",8)(2,"div",9)(3,"span",15),r(4),p(5,"translate"),o()()(),$(6,Ke,20,5,"div",13,V),o()),e&2){let t=s();i(4),u(d(5,1,"TRANSITIONS")),i(2),H(t.data.pendingWorkflowTransitions)}}var A=class e{constructor(n,t,l,w){this.dialogRef=n;this.data=t;this.clonerService=l;this.overlay=w;this.nodes=this.clonerService.deepClone(t.nodes),this.links=this.clonerService.deepClone(t.links),this.customColors=this.clonerService.deepClone(t.customColors)}nodes=[];links=[];curve=De;customColors=[];onDocumentCancel(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||e)(S(X),S(q),S(oe),S(me))};static \u0275cmp=D({type:e,selectors:[["app-workflow-graph"]],decls:36,vars:22,consts:[["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],[1,"d-flex"],[1,"me-auto","p-2"],[1,"mb-3","page-title",3,"matTooltip"],[1,"d-flex","justify-content-end","mb-2"],[1,"close-icon","text-danger","cursor-pointer",3,"click"],[1,"row"],[1,"col"],[1,"graph-container",2,"width","100%"],[1,"ngx-graph-container",3,"nodes","links","view","autoCenter","customColors","curve","layout"],[1,"col-md-6"],[1,"card","shadow","mt-2"],[1,"card-header"],[1,"px-2","h5","font-weight-bold","mb-0"],[1,"card-body"],[1,"col-6"],[1,"h6"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"],[1,"card-header","d-flex","align-items-center"],[1,"text-primary"],[1,"px-2","h6","font-weight-bold","mb-0"],[1,"d-flex","align-items-center","justify-content-left","mb-2"],[1,"text-center","me-3"],[1,"h6","mb-1"],[1,"black"],[1,"text-center"]],template:function(t,l){if(t&1){let w=b();a(0,"mat-dialog-content")(1,"div",3)(2,"div",4)(3,"span",5),r(4),p(5,"limitTo"),o()(),a(6,"div",6)(7,"mat-icon",7),E("click",function(){return g(w),h(l.onDocumentCancel())}),r(8,"cancel"),o()()(),a(9,"div",8)(10,"div",9)(11,"div",10)(12,"ngx-graph",11),f(13,Ae,2,0,"ng-template",null,0,L)(15,Pe,4,7,"ng-template",null,1,L)(17,$e,1,1,"ng-template",null,2,L),o()()()(),a(19,"div",8)(20,"div",12)(21,"div",13)(22,"div",14)(23,"span",15),r(24),p(25,"translate"),o()(),a(26,"div",16)(27,"div",8)(28,"div",17)(29,"p",18)(30,"strong"),r(31),p(32,"translate"),o(),r(33),o(),C(34,He,5,4,"p",18),o()()()()(),C(35,Ye,8,3,"div",12),o()()}t&2&&(i(3),c("matTooltip",l.data.workflowName),i(),m(" ",K(5,14,l.data.workflowName,"100")," "),i(8),c("nodes",l.nodes)("links",l.links)("view",y(21,Be))("autoCenter",!0)("customColors",l.customColors)("curve",l.curve)("layout","dagreCluster"),i(12),u(d(25,17,"WORKFLOW_DETAILS")),i(7),m("",d(32,19,"NAME"),":"),i(2),m(" ",l.data.workflowName),i(),v(l.data.workflowDescription?34:-1),i(),v(l.data&&l.data.pendingWorkflowTransitions&&l.data.pendingWorkflowTransitions.length>0?35:-1))},dependencies:[ye,Ie,R,N,O,Z,Q,F,B,ue,fe,G,se],styles:["@media (max-width: 768px){.graph-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.dialog-title[_ngcontent-%COMP%]{font-size:1rem;word-break:break-word}.edge-label[_ngcontent-%COMP%]{font-size:12px}.ngx-graph-container[_ngcontent-%COMP%]{display:flex;justify-content:center}}"]})};var ze=()=>["/workflow-settings/manage/add"],Xe=e=>["/workflow-settings/manage",e];function qe(e,n){e&1&&(a(0,"button",23)(1,"mat-icon",24),r(2,"add"),o(),a(3,"span",25),r(4),p(5,"translate"),o()()),e&2&&(c("routerLink",y(4,ze)),i(4),u(d(5,2,"ADD_WORKFLOW")))}function Je(e,n){e&1&&(a(0,"th",26),r(1),p(2,"translate"),o()),e&2&&(i(),m(" ",d(2,1,"ACTION")," "))}function Qe(e,n){if(e&1&&(a(0,"button",32)(1,"mat-icon",24),r(2,"edit"),o()()),e&2){let t=s().$implicit;c("routerLink",U(1,Xe,t.id))}}function Ze(e,n){if(e&1){let t=b();a(0,"button",33),E("click",function(){g(t);let w=s().$implicit,x=s();return h(x.deleteWorkflow(w))}),a(1,"mat-icon",24),r(2,"delete"),o()()}}function et(e,n){if(e&1){let t=b();a(0,"button",34),E("click",function(){g(t);let w=s().$implicit,x=s();return h(x.viewVisualWorkflow(w))}),a(1,"mat-icon",24),r(2,"visibility"),o()()}}function tt(e,n){if(e&1&&(a(0,"td",27)(1,"div",28),f(2,Qe,3,3,"button",29)(3,Ze,3,0,"button",30),C(4,et,3,0,"button",31),o()()),e&2){let t=n.$implicit;i(2),c("hasClaim","EDIT_WORKFLOW_SETTINGS"),i(),c("hasClaim","DELETE_WORKFLOW_SETTINGS"),i(),v(t.isWorkflowSetup?4:-1)}}function it(e,n){e&1&&(a(0,"th",35),r(1),p(2,"translate"),o()),e&2&&(i(),m(" ",d(2,1,"NAME")," "))}function ot(e,n){if(e&1&&(a(0,"td",36),r(1),o()),e&2){let t=n.$implicit;i(),u(t.name)}}function nt(e,n){e&1&&(a(0,"th",35),r(1),p(2,"translate"),o()),e&2&&(i(),m(" ",d(2,1,"DESCRIPTION")," "))}function at(e,n){if(e&1&&(a(0,"td",36),r(1),o()),e&2){let t=n.$implicit;i(),m(" ",t.description," ")}}function rt(e,n){e&1&&(a(0,"th",35),r(1),p(2,"translate"),o()),e&2&&(i(),m(" ",d(2,1,"SETUP_STATUS")," "))}function lt(e,n){if(e&1&&(a(0,"td",36),r(1),p(2,"translate"),p(3,"translate"),o()),e&2){let t=n.$implicit;i(),m(" ",t.isWorkflowSetup?d(2,1,"COMPLETED"):d(3,3,"DRAFT")," ")}}function mt(e,n){e&1&&(a(0,"tr")(1,"td",37)(2,"div",38)(3,"b"),r(4),p(5,"translate"),o()()()()),e&2&&(i(4),m(" ",d(5,1,"NO_DATA_FOUND")))}function pt(e,n){e&1&&k(0,"tr",39)}function dt(e,n){e&1&&k(0,"tr",40)}var Re=class e{workflows=[];displayedColumns=["action","name","description","setupStatus"];dialog=_(J);workflowStore=_(Le);commonDialogService=_(Ee);translationService=_(ie);signalrService=_(ae);workflowService=_(Me);toastrService=_(ne);ngOnInit(){this.getWorkflows(),this.signalrService.refreshWorkflowSettings$.subscribe(()=>{this.getWorkflows()})}getWorkflows(){this.workflowStore.loadWorkflows()}deleteWorkflow(n){this.commonDialogService.deleteConfirmtionDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${n.name}`).subscribe(t=>{t&&this.workflowStore.deleteWorkflowById(n.id??"")})}viewVisualWorkflow(n){this.workflowService.getvisualWorkflow(n.id??"").subscribe({next:t=>{let w=(window.innerWidth<768,"90vw"),x=this.dialog.open(A,{maxWidth:w,data:P({},t)})},error:t=>{console.error("Error loading workflow:",t)}})}ngOnDestroy(){this.workflowStore.isLoading(),this.workflowStore.setCurrentStep(0),this.workflowStore.commonError}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-workflow-list"]],decls:30,vars:8,consts:[[1,"content"],[1,"container-fluid"],[1,"d-flex","mb-2"],[1,"me-auto"],[1,"mb-0","page-title"],["code","WORKFLOW_SETTINGS"],[1,"d-flex","justify-content-end"],["class","primary me-2","matButton","filled",3,"routerLink",4,"hasClaim"],["appearance","outlined"],[1,"table-responsive"],[1,"grid-height-large"],["mat-table","",3,"dataSource"],["matColumnDef","action"],["class","table-column-fix-270","mat-header-cell","",4,"matHeaderCellDef"],["class","d-flex gap-2","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","setupStatus"],[4,"matNoDataRow"],["class","grid-header-color","mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matButton","filled",1,"primary","me-2",3,"routerLink"],[1,"medium-icon","fs-5","align-middle"],[1,"d-none","d-lg-inline","ms-1"],["mat-header-cell","",1,"table-column-fix-270"],["mat-cell","",1,"d-flex","gap-2"],[1,"d-flex","gap-2","my-2"],["matMiniFab","","class","primary",3,"routerLink",4,"hasClaim"],["matMiniFab","","class","error","type","button",3,"click",4,"hasClaim"],["matMiniFab","",1,"success"],["matMiniFab","",1,"primary",3,"routerLink"],["matMiniFab","","type","button",1,"error",3,"click"],["matMiniFab","",1,"success",3,"click"],["mat-header-cell",""],["mat-cell",""],["colspan","5"],[1,"m-2"],["mat-header-row","",1,"grid-header-color"],["mat-row",""]],template:function(t,l){t&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),r(5),p(6,"translate"),k(7,"app-page-help-text",5),o()(),a(8,"div",6),f(9,qe,6,5,"button",7),o()(),a(10,"mat-card",8)(11,"mat-card-content")(12,"div",9)(13,"div",10)(14,"table",11),T(15,12),f(16,Je,3,3,"th",13)(17,tt,5,3,"td",14),W(),T(18,15),f(19,it,3,3,"th",16)(20,ot,2,1,"td",17),W(),T(21,18),f(22,nt,3,3,"th",16)(23,at,2,1,"td",17),W(),T(24,19),f(25,rt,3,3,"th",16)(26,lt,4,5,"td",17),W(),f(27,mt,6,3,"tr",20)(28,pt,1,0,"tr",21)(29,dt,1,0,"tr",22),o()()()()()()()),t&2&&(i(5),m(" ",d(6,6,"WORKFLOW_SETTINGS")," "),i(4),c("hasClaim","ADD_WORKFLOW_SETTINGS"),i(5),c("dataSource",l.workflowStore.workflows()),i(14),c("matHeaderRowDef",l.displayedColumns)("matHeaderRowDefSticky",!0),i(),c("matRowDefColumns",l.displayedColumns))},dependencies:[le,F,z,Y,be,we,Ce,ge,ve,_e,he,ke,xe,Se,Te,We,re,ce,N,O,B,pe,de,R,ee,te,G],encapsulation:2})};export{Re as WorkflowListComponent};
