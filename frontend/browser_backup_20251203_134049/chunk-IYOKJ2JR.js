import{a as be}from"./chunk-Q64ABPSN.js";import{a as Le}from"./chunk-7OSTZELI.js";import{a as Me,b as Ne,c as Ae,d as Be,e as qe,f as Ue}from"./chunk-UIYGQSTF.js";import{a as we,b as Ve,c as Ye,d as Qe}from"./chunk-KBYUC6BL.js";import{a as Se,b as Te}from"./chunk-6QK67EK5.js";import{a as Fe,b as Ie,c as ke}from"./chunk-NAYIGTW2.js";import{a as re,b as ae}from"./chunk-GE3TJVIQ.js";import{a as te}from"./chunk-ZXWR2MAY.js";import{a as De,b as ye,c as ge}from"./chunk-FWRBVAV4.js";import{d as xe}from"./chunk-TQCCWZBZ.js";import{c as he}from"./chunk-756DJ4VK.js";import{b as H,c as P,e as W,f as j}from"./chunk-BQ4MMRNN.js";import{b as ie}from"./chunk-JSAPTJHL.js";import{b as ne}from"./chunk-UFOTACYY.js";import{e as Ee}from"./chunk-THB5JDTQ.js";import{a as z,b as X}from"./chunk-4E37NPLR.js";import{ta as J,va as K}from"./chunk-56QOWAU7.js";import{C as ve,E as Re,c as oe,e as A,h as le,i as me,o as de,r as ce,s as se,t as pe,u as ue,v as _e,w as fe,x as Ce}from"./chunk-KYSGX4IW.js";import{$ as b,Ca as _,Da as f,Db as c,Ea as M,Eb as s,Fa as V,Ga as F,Ha as I,Ia as h,Ja as r,Ka as n,La as x,Pa as q,Pc as Z,Qa as U,Rc as ee,Sa as N,Ua as D,W as i,Wa as R,eb as g,ga as Q,i as Y,jb as m,ka as L,kb as y,lb as u,mb as w,p as S,pb as O,q as T,qb as G,rb as $,vb as B}from"./chunk-KZMFGXDY.js";var Pe=(t,l)=>l==null?null:l.id,Ge=(t,l)=>l.id;function We(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"SUBJECT_IS_REQUIRED")," "))}function je(t,l){if(t&1&&(r(0,"div"),_(1,We,3,3,"div",31),n()),t&2){let e,o=R();i(),f(!((e=o.reminderForm.get("subject"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Je(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"MESSAGE_IS_REQUIRED")," "))}function Ke(t,l){if(t&1&&(r(0,"div"),_(1,Je,3,3,"div",31),n()),t&2){let e,o=R();i(),f(!((e=o.reminderForm.get("message"))==null||e.errors==null)&&e.errors.required?1:-1)}}function ze(t,l){if(t&1&&(r(0,"span"),m(1),n()),t&2){let e=R();i(),w(" ",e.selectedUsers[0].firstName," ",e.selectedUsers[0].lastName," ")}}function Xe(t,l){if(t&1&&(r(0,"span",24),m(1),n()),t&2){let e=R();i(),w(" (+",e.selectedUsers.length-1," ",e.selectedUsers.length===2?"other":"others",") ")}}function Ze(t,l){if(t&1&&(r(0,"mat-option",25),m(1),n()),t&2){let e=l.$implicit;h("value",e),i(),w(" ",e.firstName," ",e.lastName," ")}}function et(t,l){if(t&1&&(r(0,"option",25),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;h("value",e==null?null:e.id),i(),u(" ",s(2,2,e==null||e.name==null?null:e.name.toUpperCase())," ")}}function tt(t,l){t&1&&(r(0,"div")(1,"div",31),m(2),c(3,"translate"),n()()),t&2&&(i(2),u(" ",s(3,1,"FREQUENCY_IS_REQUIRED")," "))}function it(t,l){if(t&1){let e=N();r(0,"div",18)(1,"div",32)(2,"label",33),m(3),c(4,"translate"),n(),r(5,"select",34),D("change",function(){S(e);let a=R();return T(a.onFrequencyChange())}),r(6,"option",35),m(7),c(8,"translate"),n(),F(9,et,3,4,"option",25,Pe),n(),_(11,tt,4,3,"div"),n()()}if(t&2){let e,o=R();i(3),u(" ",s(4,3,"FREQUENCY")),i(4),u("--",s(8,5,"NONE"),"--"),i(2),I(o.reminderFrequencies),i(2),f(!((e=o.reminderForm.get("frequency"))==null||e.errors==null)&&e.errors.required?11:-1)}}function nt(t,l){if(t&1&&(r(0,"div",41),q(1,42),r(2,"mat-checkbox",43),m(3),c(4,"translate"),n(),U(),n()),t&2){let e,o=l.$implicit,a=l.$index;i(),h("formGroupName",a),i(2),u(" ",s(4,2,(e=o.get("name"))==null?null:e.value.toUpperCase())," ")}}function rt(t,l){if(t&1&&(r(0,"div",37)(1,"label",39),m(2),c(3,"translate"),n(),r(4,"div",40),F(5,nt,5,4,"div",41,M),n()()),t&2){let e=R(2);i(2),y(s(3,1,"WEEK_DAYS")),i(3),I(e.dailyRemindersArray.controls)}}function at(t,l){if(t&1&&(r(0,"mat-radio-button",47),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;h("value",e.id),i(),y(s(2,2,e.name))}}function ot(t,l){if(t&1&&(r(0,"div",37)(1,"label",44),m(2),c(3,"translate"),n(),r(4,"div",45)(5,"mat-radio-group",46),F(6,at,3,4,"mat-radio-button",47,M),n()()()),t&2){let e=R(2);i(2),y(s(3,1,"WEEK_DAYS")),i(4),I(e.dayOfWeek)}}function lt(t,l){if(t&1&&(r(0,"option",25),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;h("value",e.id),i(),u(" ",s(2,2,e.name)," ")}}function mt(t,l){if(t&1&&(r(0,"option",25),m(1),n()),t&2){let e=l.$implicit;h("value",e),i(),u(" ",e," ")}}function dt(t,l){t&1&&(r(0,"div")(1,"div",31),m(2),c(3,"translate"),n()()),t&2&&(i(2),u(" ",s(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function ct(t,l){if(t&1){let e=N();r(0,"tr"),q(1,42),r(2,"td"),m(3),c(4,"translate"),n(),r(5,"td")(6,"select",52),D("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(7,lt,3,4,"option",25,Ge),n()(),r(9,"td")(10,"select",53),D("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(11,mt,2,2,"option",25,V),n(),_(13,dt,4,3,"div"),n(),U(),n()}if(t&2){let e,o,a,d=l.$implicit,v=l.$index,p=R(3);i(),h("formGroupName",v),i(2),u(" ",s(4,3,(e=d.get("name"))==null?null:e.value)," "),i(4),I((o=d.get("monthValues"))==null?null:o.value),i(4),I(p.days),i(2),f((a=d.get("day"))!=null&&a.touched&&(d!=null&&d.hasError("invalidDate"))?13:-1)}}function st(t,l){if(t&1&&(r(0,"div",38)(1,"label",48),m(2),c(3,"translate"),n(),r(4,"div",49)(5,"table",50)(6,"thead")(7,"tr"),x(8,"th"),r(9,"th"),m(10),c(11,"translate"),n(),r(12,"th"),m(13),c(14,"translate"),n()()(),r(15,"tbody",51),F(16,ct,14,5,"tr",null,M),n()()()()),t&2){let e=R(2);i(2),y(s(3,3,"SELECT_QUARTER_DATE")),i(8),y(s(11,5,"SELECT_REMINDER_MONTH")),i(3),y(s(14,7,"SELECT_REMINDER_DAY")),i(3),I(e.quarterlyRemindersArray.controls)}}function pt(t,l){if(t&1&&(r(0,"option",25),m(1),c(2,"translate"),n()),t&2){let e=l.$implicit;h("value",e.id),i(),u(" ",s(2,2,e.name)," ")}}function ut(t,l){if(t&1&&(r(0,"option",25),m(1),n()),t&2){let e=l.$implicit;h("value",e),i(),u(" ",e," ")}}function _t(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"PLEASE_SELECT_VALID_DAY")," "))}function ft(t,l){if(t&1){let e=N();r(0,"tr"),q(1,42),r(2,"td"),m(3),c(4,"translate"),n(),r(5,"td")(6,"select",52),D("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(7,pt,3,4,"option",25,Ge),n()(),r(9,"td")(10,"select",53),D("change",function(){let a=S(e).$implicit,d=R(3);return T(d.onDateChange(a))}),F(11,ut,2,2,"option",25,V),n(),_(13,_t,3,3,"div",31),n(),U(),n()}if(t&2){let e,o,a,d=l.$implicit,v=l.$index,p=R(3);i(),h("formGroupName",v),i(2),u(" ",s(4,3,(e=d.get("name"))==null?null:e.value)," "),i(4),I((o=d.get("monthValues"))==null?null:o.value),i(4),I(p.days),i(2),f((a=d.get("day"))!=null&&a.touched&&(d!=null&&d.hasError("invalidDate"))?13:-1)}}function Ct(t,l){if(t&1&&(r(0,"div",38)(1,"label",54),m(2),c(3,"translate"),n(),r(4,"div",55)(5,"table",50)(6,"thead")(7,"tr"),x(8,"th"),r(9,"th"),m(10),c(11,"translate"),n(),r(12,"th"),m(13),c(14,"translate"),n()()(),r(15,"tbody",56),F(16,ft,14,5,"tr",null,M),n()()()()),t&2){let e=R(2);i(2),y(s(3,3,"SELECT_DATE")),i(8),y(s(11,5,"SELECT_REMINDER_MONTH")),i(3),y(s(14,7,"SELECT_REMINDER_DAY")),i(3),I(e.halfYearlyRemindersArray.controls)}}function vt(t,l){if(t&1&&(r(0,"div",18)(1,"div",36),_(2,rt,7,3,"div",37),_(3,ot,8,3,"div",37),_(4,st,18,9,"div",38),_(5,Ct,18,9,"div",38),n()()),t&2){let e,o,a,d,v=R();i(2),f(((e=v.reminderForm.get("frequency"))==null?null:e.value)=="0"?2:-1),i(),f(((o=v.reminderForm.get("frequency"))==null?null:o.value)=="1"?3:-1),i(),f(((a=v.reminderForm.get("frequency"))==null?null:a.value)=="3"?4:-1),i(),f(((d=v.reminderForm.get("frequency"))==null?null:d.value)=="4"?5:-1)}}function Rt(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"DATE_IS_REQUIRED")," "))}function Et(t,l){if(t&1&&(r(0,"div"),_(1,Rt,3,3,"div",31),n()),t&2){let e,o=R(2);i(),f(!((e=o.reminderForm.get("startDate"))==null||e.errors==null)&&e.errors.required?1:-1)}}function ht(t,l){t&1&&(r(0,"div")(1,"div",31),m(2),c(3,"translate"),n()()),t&2&&(i(2),u(" ",s(3,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function xt(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"TIME_IS_REQUIRED")," "))}function Dt(t,l){if(t&1&&(r(0,"div"),_(1,xt,3,3,"div",31),n()),t&2){let e,o=R(2);i(),f(!((e=o.reminderForm.get("startTime"))==null||e.errors==null)&&e.errors.required?1:-1)}}function yt(t,l){if(t&1){let e=N();r(0,"div",18)(1,"div",57)(2,"label",33),m(3),c(4,"translate"),n(),r(5,"div",58),x(6,"input",59,0),c(8,"translate"),r(9,"div",60)(10,"button",61),D("click",function(){S(e);let a=g(14);return T(a.open())}),r(11,"mat-icon",62),m(12,"calendar_today"),n()()(),x(13,"mat-datepicker",null,1),n(),_(15,Et,2,1,"div"),_(16,ht,4,3,"div"),n(),r(17,"div",57)(18,"label",63),m(19),c(20,"translate"),n(),r(21,"div",58),x(22,"input",64),r(23,"div",60)(24,"button",65),D("click",function(){S(e);let a=g(28);return T(a.open())}),r(25,"mat-icon",62),m(26,"access_time"),n()()(),x(27,"ngx-material-timepicker",null,2),n(),_(29,Dt,2,1,"div"),n()()}if(t&2){let e,o,a,d=g(14),v=g(28),p=R();i(3),u(" ",s(4,11,"REMINDER_START_DATE")),i(3),h("placeholder",B(s(8,13,"REMINDER_DATE")))("matDatepicker",d),i(9),f((e=p.reminderForm.get("startDate"))!=null&&e.touched&&((e=p.reminderForm.get("startDate"))!=null&&e.errors)?15:-1),i(),f((o=p.reminderForm.get("startDate"))!=null&&o.touched&&(!((o=p.reminderForm.get("startDate"))==null||o.errors==null)&&o.errors.owlDateTimeMin)?16:-1),i(3),y(s(20,15,"REMINDER_TIME")),i(3),h("format",24)("ngxTimepicker",v)("disableClick",!0),i(7),f((a=p.reminderForm.get("startTime"))!=null&&a.touched&&((a=p.reminderForm.get("startTime"))!=null&&a.errors)?29:-1)}}function gt(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"START_DATE_IS_REQUIRED")," "))}function St(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Tt(t,l){if(t&1&&(r(0,"div"),_(1,gt,3,3,"div",31),_(2,St,3,3,"div",31),n()),t&2){let e,o,a=R(2);i(),f(!((e=a.reminderForm.get("startDate"))==null||e.errors==null)&&e.errors.required?1:-1),i(),f(!((o=a.reminderForm.get("startDate"))==null||o.errors==null)&&o.errors.owlDateTimeMin?2:-1)}}function Ft(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"TIME_IS_REQUIRED")," "))}function It(t,l){if(t&1&&(r(0,"div"),_(1,Ft,3,3,"div",31),n()),t&2){let e,o=R(2);i(),f(!((e=o.reminderForm.get("startTime"))==null||e.errors==null)&&e.errors.required?1:-1)}}function kt(t,l){t&1&&(r(0,"div",31),m(1),c(2,"translate"),n()),t&2&&(i(),u(" ",s(2,1,"ENDTIME_IS_REQUIRED")," "))}function bt(t,l){if(t&1&&(r(0,"div"),_(1,kt,3,3,"div",31),n()),t&2){let e,o=R(2);i(),f(!((e=o.reminderForm.get("endTime"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Mt(t,l){if(t&1){let e=N();r(0,"div",18)(1,"div",57)(2,"label",66),m(3),c(4,"translate"),n(),r(5,"div",58),x(6,"input",59,0),c(8,"translate"),r(9,"div",60)(10,"button",61),D("click",function(){S(e);let a=g(14);return T(a.open())}),r(11,"mat-icon",62),m(12,"calendar_today"),n()()(),x(13,"mat-datepicker",null,1),n(),_(15,Tt,3,2,"div"),n(),r(16,"div",57)(17,"label",63),m(18),c(19,"translate"),n(),r(20,"div",58),x(21,"input",64),r(22,"div",60)(23,"button",65),D("click",function(){S(e);let a=g(27);return T(a.open())}),r(24,"mat-icon",62),m(25,"access_time"),n()()(),x(26,"ngx-material-timepicker",null,2),n(),_(28,It,2,1,"div"),n(),r(29,"div",57)(30,"label",67),m(31),c(32,"translate"),n(),r(33,"div",58),x(34,"input",68,0),c(36,"translate"),r(37,"div",60)(38,"button",61),D("click",function(){S(e);let a=g(42);return T(a.open())}),r(39,"mat-icon",62),m(40,"calendar_today"),n()()(),x(41,"mat-datepicker",null,3),n()(),r(43,"div",57)(44,"label",69),m(45),c(46,"translate"),n(),r(47,"div",58),x(48,"input",70),r(49,"div",60)(50,"button",65),D("click",function(){S(e);let a=g(54);return T(a.open())}),r(51,"mat-icon",62),m(52,"access_time"),n()()()(),x(53,"ngx-material-timepicker",null,4),_(55,bt,2,1,"div"),n()()}if(t&2){let e,o,a,d=g(14),v=g(27),p=g(42),k=g(54),C=R();i(3),y(s(4,19,"REMINDER_START_DATE")),i(3),h("placeholder",B(s(8,21,"REMINDER_DATE")))("matDatepicker",d),i(9),f((e=C.reminderForm.get("startDate"))!=null&&e.touched&&((e=C.reminderForm.get("startDate"))!=null&&e.errors)?15:-1),i(3),u("",s(19,23,"REMINDER_TIME")," "),i(3),h("format",24)("ngxTimepicker",v)("disableClick",!0),i(7),f((o=C.reminderForm.get("startTime"))!=null&&o.touched&&((o=C.reminderForm.get("startTime"))!=null&&o.errors)?28:-1),i(3),y(s(32,25,"REMINDER_END_DATE")),i(3),h("placeholder",B(s(36,27,"REMINDER_DATE")))("matDatepicker",p),i(11),y(s(46,29,"REMINDER_END_TIME")),i(3),h("format",24)("ngxTimepicker",k)("disableClick",!0),i(7),f((a=C.reminderForm.get("endTime"))!=null&&a.hasError("required")&&((a=C.reminderForm.get("endDate"))!=null&&a.touched)?55:-1)}}function Nt(t,l){t&1&&(r(0,"div",30),x(1,"mat-progress-spinner",71),n())}var Oe=class t extends te{constructor(e,o,a,d,v,p){super();this.fb=e;this.reminderService=o;this.commonService=a;this.toastrService=d;this.data=v;this.dialogRef=p}reminderFrequencies=[];reminderForm;minDate=new Date;userStore=Y(be);selectedUsers=[];reminder;isLoading=!1;dayOfWeek=qe;months=Ue;days=[];get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}ngOnInit(){for(let e=1;e<=31;e++)this.days.push(e);if(this.getReminderFrequency(),this.createReminderForm(),this.reminder){let e=this.reminder.reminderUsers.map(o=>o.userId);this.selectedUsers=this.userStore.users().filter(o=>e.indexOf(o.id??"")>=0)}}closeDialog(){this.dialogRef.close()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>this.reminderFrequencies=[...e])}createReminderForm(){var e=new Date;this.reminderForm=this.fb.group({id:[""],subject:["",[A.required]],message:["",[A.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[e,[A.required]],startTime:["12:00",[A.required]],endDate:[null],endTime:[null],dayOfWeek:[2],documentId:[this.data.id]},{validators:this.dateAndTimeValidator})}dateAndTimeValidator(e){let o=e.get("endDate")?.value,a=e.get("endTime")?.value;return o&&!a?e.get("endTime")?.setErrors({required:!0}):e.get("endTime")?.setErrors(null),null}checkData(e){e.checked?this.reminderForm.get("frequency")?.setValidators([A.required]):this.reminderForm.get("frequency")?.setValidators([]),this.reminderForm.get("frequency")?.updateValueAndValidity(),this.reminderForm.markAllAsTouched()}createReminder(){if(!this.reminderForm.valid){this.reminderForm.markAllAsTouched();return}let e=new Date(this.reminderForm.get("startDate")?.value),o=this.reminderForm.get("startTime")?.value,[a,d]=o.split(":"),v=new Date(e.getFullYear(),e.getMonth(),e.getDate(),a,d),p=this.reminderForm.get("endDate")?.value,k;if(p){p=new Date(p);let E=this.reminderForm.get("endTime")?.value;if(E&&typeof E=="string"&&E.includes(":")){let[$e,He]=E.split(":").map(Number);k=new Date(p.getFullYear(),p.getMonth(),p.getDate(),$e,He)}}let C=this.reminderForm.value;C.startDate=v,C.endDate=k,C.reminderUsers=this.selectedUsers.map(E=>({reminderId:C.id??"",userId:E.id??""})),C.isRepeated||(C.dailyReminders=[],C.quarterlyReminders=[],C.halfYearlyReminders=[]),this.reminder?(C.dailyReminders&&(C.dailyReminders=C.dailyReminders.map(E=>(E.reminderId=this.reminder.id??"",E))),C.quarterlyReminders&&(C.quarterlyReminders=C.quarterlyReminders.map(E=>(E.reminderId=this.reminder.id??"",E))),C.halfYearlyReminders&&(C.halfYearlyReminders=C.halfYearlyReminders.map(E=>(E.reminderId=this.reminder.id??"",E))),this.isLoading=!0,this.sub$.sink=this.reminderService.updateReminder(C).subscribe(E=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1)):(this.isLoading=!0,this.sub$.sink=this.reminderService.addReminder(C).subscribe({next:E=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},error:()=>{this.isLoading=!1}}))}onFrequencyChange(){let e=this.reminderForm.get("frequency")?.value;e=e==0?"0":e,e==0 .toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):e==1 .toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue(2)):e==3 .toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):e==4 .toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek")?.setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){var e=this.fb.array([]);e.push(this.createDailyReminderFormGroup(0)),e.push(this.createDailyReminderFormGroup(1)),e.push(this.createDailyReminderFormGroup(2)),e.push(this.createDailyReminderFormGroup(3)),e.push(this.createDailyReminderFormGroup(4)),e.push(this.createDailyReminderFormGroup(5)),e.push(this.createDailyReminderFormGroup(6)),this.reminderForm.addControl("dailyReminders",e)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){var e=this.fb.array([]),o=this.months.filter(p=>[1,2,3].indexOf(p.id)>=0),a=this.months.filter(p=>[4,5,6].indexOf(p.id)>=0),d=this.months.filter(p=>[7,8,9].indexOf(p.id)>=0),v=this.months.filter(p=>[10,11,12].indexOf(p.id)>=0);e.push(this.createQuarterlyReminderFormGroup(0,"JAN_MAR",o)),e.push(this.createQuarterlyReminderFormGroup(1,"APR_JUN",a)),e.push(this.createQuarterlyReminderFormGroup(2,"JUL_SEPT",d)),e.push(this.createQuarterlyReminderFormGroup(3,"OCT_DEC",v)),this.reminderForm.addControl("quarterlyReminders",e)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){var e=this.fb.array([]),o=this.months.filter(d=>[1,2,3,4,5,6].indexOf(d.id)>=0),a=this.months.filter(d=>[7,8,9,10,11,12].indexOf(d.id)>=0);e.push(this.createHalfYearlyReminderFormGroup(0,"JAN_JUN",o)),e.push(this.createHalfYearlyReminderFormGroup(1,"JUL_DEC",a)),this.reminderForm.addControl("halfYearlyReminders",e)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(e){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[e],isActive:[!0],name:[Be[e]]})}createQuarterlyReminderFormGroup(e,o,a){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[a[0].id],name:[o],monthValues:[a]})}createHalfYearlyReminderFormGroup(e,o,a){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[a[0].id],name:[o],monthValues:[a]})}getCurrentDay(){return new Date().getDate()}onDateChange(e){if(!e)return;let o=e.get("day")?.value,a=e.get("month")?.value;var d=new Date(new Date().getFullYear(),Number.parseInt(a),0).getDate();o>d&&(e.setErrors({invalidDate:"Invalid Date"}),e.markAllAsTouched())}onCancel(){this.dialogRef.close()}static \u0275fac=function(o){return new(o||t)(b(ve),b(Le),b(ne),b(ie),b(P),b(H))};static \u0275cmp=Q({type:t,selectors:[["app-document-reminder"]],features:[L],decls:59,vars:36,consts:[["ref",""],["startDatePicker",""],["toggleIcon",""],["endDatePicker",""],["endTimeToggleIcon",""],[1,"d-flex"],[1,"me-auto","p-2"],[3,"code"],[1,"d-flex","justify-content-end","mb-2"],[1,"close-icon","text-danger","cursor-pointer",3,"click"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"row","mt-2"],[1,"col-md-3"],["color","primary","formControlName","isRepeated",3,"change"],["color","primary","formControlName","isEmailNotification"],[1,"col-md-4"],["panelClass","mat-select-control","multiple","",1,"form-control",3,"valueChange","placeholder","value"],[1,"example-additional-selection"],[3,"value"],[1,"mt-4","col-md-12","d-flex","flex-wrap","button-group-responsive"],["type","submit","matButton","filled",1,"success","me-2",3,"click"],[1,"medium-icon"],["type","button","matButton","filled",1,"error",3,"click"],[1,"spinner-container"],[1,"text-danger"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[1,"col-md-12"],[1,"form-group"],[1,"form-group","mt-2"],["for","weekDays"],["id","weekDays",1,"row"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],[1,"form-group","col-md-3"],[1,"input-group"],["formControlName","startDate",1,"form-control",3,"matDatepicker","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],[1,"medium-icon","fs-5","align-middle"],["for","startTime"],["formControlName","startTime","readonly","",1,"form-control","timepicker-input",3,"format","ngxTimepicker","disableClick"],["ngxMaterialTimepickerToggleIcon","","type","button",1,"btn","btn-primary","calendar-button",3,"click"],["for","startDate"],["for","endDate"],["formControlName","endDate",1,"form-control",3,"matDatepicker","placeholder"],["for","endTime"],["formControlName","endTime","readonly","",1,"form-control","timepicker-input",3,"format","ngxTimepicker","disableClick"],["mode","indeterminate","diameter","60","strokeWidth","5"]],template:function(o,a){if(o&1&&(r(0,"mat-dialog-content")(1,"div",5)(2,"div",6),m(3),c(4,"translate"),x(5,"app-page-help-text",7),n(),r(6,"div",8)(7,"mat-icon",9),D("click",function(){return a.closeDialog()}),m(8,"cancel"),n()()(),r(9,"div",10)(10,"div",11)(11,"form",12)(12,"div",10)(13,"div",13)(14,"label",14),m(15),c(16,"translate"),n(),x(17,"input",15),_(18,je,2,1,"div"),n()(),r(19,"div",10)(20,"div",13)(21,"label",16),m(22),c(23,"translate"),n(),x(24,"textarea",17),_(25,Ke,2,1,"div"),n()(),r(26,"div",18)(27,"div",19)(28,"mat-checkbox",20),D("change",function(v){return a.checkData(v)}),m(29),c(30,"translate"),n()(),r(31,"div",19)(32,"mat-checkbox",21),m(33),c(34,"translate"),n()(),r(35,"div",22)(36,"mat-select",23),c(37,"translate"),$("valueChange",function(v){return G(a.selectedUsers,v)||(a.selectedUsers=v),v}),r(38,"mat-select-trigger"),_(39,ze,2,2,"span")(40,Xe,2,2,"span",24),n(),F(41,Ze,2,3,"mat-option",25,M),n()()(),_(43,it,12,7,"div",18),_(44,vt,6,4,"div",18),_(45,yt,30,17,"div",18),_(46,Mt,56,31,"div",18),r(47,"div",26)(48,"button",27),D("click",function(){return a.createReminder()}),r(49,"mat-icon",28),m(50,"save"),n(),m(51),c(52,"translate"),n(),r(53,"button",29),D("click",function(){return a.onCancel()}),r(54,"mat-icon",28),m(55,"cancel"),n(),m(56),c(57,"translate"),n()()()()(),_(58,Nt,2,0,"div",30),n()),o&2){let d,v,p,k,C,E;i(3),u(" ",s(4,20,"ADD_REMINDER")," "),i(2),h("code","ADD_REMINDER"),i(6),h("formGroup",a.reminderForm),i(4),u(" ",s(16,22,"SUBJECT")),i(3),f((d=a.reminderForm.get("subject"))!=null&&d.touched&&((d=a.reminderForm.get("subject"))!=null&&d.errors)?18:-1),i(4),u(" ",s(23,24,"MESSAGE")),i(3),f((v=a.reminderForm.get("message"))!=null&&v.touched&&((v=a.reminderForm.get("message"))!=null&&v.errors)?25:-1),i(4),u(" ",s(30,26,"REPEATE_REMINDER")," "),i(4),y(s(34,28,"SEND_EMAIL")),i(3),h("placeholder",B(s(37,30,"SELECT_USERS"))),O("value",a.selectedUsers),i(3),f(a.selectedUsers.length>0?39:40),i(2),I(a.userStore.users()),i(2),f((p=a.reminderForm.get("isRepeated"))!=null&&p.value?43:-1),i(),f((k=a.reminderForm.get("isRepeated"))!=null&&k.value?44:-1),i(),f((C=a.reminderForm.get("isRepeated"))!=null&&C.value?-1:45),i(),f((E=a.reminderForm.get("isRepeated"))!=null&&E.value?46:-1),i(5),u(" ",s(52,32,"SAVE")," "),i(5),u(" ",s(57,34,"CANCEL")," "),i(2),f(a.isLoading?58:-1)}},dependencies:[Re,de,fe,Ce,oe,_e,le,me,ce,ue,se,pe,Te,Se,j,W,ge,De,ye,xe,ee,ke,Fe,Ie,Ae,Me,Ne,Qe,we,Ye,Ve,he,X,z,K,J,Ee,ae,re,Z],encapsulation:2})};export{Oe as a};
