import{a as Ie}from"./chunk-56BWV474.js";import{a as $e}from"./chunk-RIBWAPRW.js";import"./chunk-GVGC473E.js";import{a as I}from"./chunk-PM3ZOWUF.js";import{a as L}from"./chunk-XA5EPKK2.js";import{a as _e,b as he,c as Re,d as be,e as ge,f as Se,g as Ce,h as ve,i as De,j as xe,k as ye,l as Ee,m as Te,n as Me,o as Fe,p as we}from"./chunk-O4QTDGQI.js";import"./chunk-UIYGQSTF.js";import"./chunk-6QK67EK5.js";import"./chunk-NAYIGTW2.js";import"./chunk-ZL3HBFEV.js";import{a as Le}from"./chunk-LTSUZ232.js";import"./chunk-4U6IWAJM.js";import"./chunk-73AGG5TT.js";import{a as fe}from"./chunk-D6HICPES.js";import"./chunk-TC5US2P6.js";import"./chunk-WFK47GYZ.js";import{a as re}from"./chunk-6GBRFDEJ.js";import{a as ce,b as de}from"./chunk-GE3TJVIQ.js";import{a as oe}from"./chunk-ZXWR2MAY.js";import"./chunk-G4LST2RF.js";import"./chunk-FWRBVAV4.js";import"./chunk-NH2LHIRZ.js";import"./chunk-DTECNCC4.js";import"./chunk-2FSKRITI.js";import"./chunk-TQCCWZBZ.js";import"./chunk-QPRQJRAS.js";import{c as ue}from"./chunk-756DJ4VK.js";import{a as le}from"./chunk-JYYDN77K.js";import{b as J,d as W,e as X,f as G}from"./chunk-BQ4MMRNN.js";import{b as ae}from"./chunk-JSAPTJHL.js";import{a as me,b as se}from"./chunk-UFOTACYY.js";import{e as pe}from"./chunk-THB5JDTQ.js";import{a as ee,b as te}from"./chunk-4E37NPLR.js";import{ua as K,va as Z}from"./chunk-56QOWAU7.js";import"./chunk-77WXBMFN.js";import"./chunk-XFBX5CPU.js";import"./chunk-C3OPHOKD.js";import"./chunk-KYSGX4IW.js";import"./chunk-LCPYESOB.js";import"./chunk-BFSIXXTJ.js";import"./chunk-DGFNMOMG.js";import{$ as b,$a as F,Ca as V,Da as U,Db as l,Eb as p,Fb as S,Ia as f,Ja as o,Ka as a,La as R,Pa as _,Pc as ie,Qa as h,Rc as ne,Sa as x,Ua as y,W as r,Wa as g,_a as M,ab as w,ga as B,ja as N,jb as m,ka as A,lb as c,ma as u,p as v,q as D,rc as Y,sb as z,zb as Q}from"./chunk-KZMFGXDY.js";import{Pa as k,Ya as H,_b as P,b as $,gb as O,la as q,n as j,o as C}from"./chunk-W3TJXGK4.js";import"./chunk-H5HZ6YB3.js";var E=class{constructor(i){this.commonService=i}_reminderSubject$=new C([]);_responseHeaderSubject$=new C({});loadingSubject=new C(!1);loading$=this.loadingSubject.asObservable();_count=0;sub$;get count(){return this._count}responseHeaderSubject$=this._responseHeaderSubject$.asObservable();connect(){return this.sub$=new $,this._reminderSubject$.asObservable()}disconnect(){this._reminderSubject$.complete(),this.loadingSubject.complete(),this.sub$.unsubscribe()}loadData(i){this.loadingSubject.next(!0),this.sub$=this.commonService.getAllRemindersForCurrentUser(i).pipe(O(()=>this.loadingSubject.next(!1))).subscribe(t=>{if(t&&t.headers.get("X-Pagination")){let n=JSON.parse(t.headers.get("X-Pagination")??"{}");this._responseHeaderSubject$.next(n)}if(t){let n=[...t.body??[]];this._count=n.length,this._reminderSubject$.next(n)}})}};var T=class e{transform(i,...t){let n=me.find(s=>s.id==i);return n?n.name:""}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=N({name:"frequency",type:e,pure:!0})};var He=()=>[10,20,30];function Oe(e,i){e&1&&R(0,"th",28)}function Pe(e,i){if(e&1){let t=x();o(0,"button",32),y("click",function(){v(t);let s=g().$implicit,d=g();return D(d.onDetail(s))}),o(1,"mat-icon",33),m(2,"info"),a()()}}function Be(e,i){if(e&1){let t=x();o(0,"button",34),y("click",function(){v(t);let s=g().$implicit,d=g();return D(d.deleteReminder(s))}),o(1,"mat-icon",33),m(2,"delete"),a()()}}function Ne(e,i){e&1&&(o(0,"td",29),u(1,Pe,3,0,"button",30)(2,Be,3,0,"button",31),a()),e&2&&(r(),f("hasClaim","EDIT_REMINDER"),r(),f("hasClaim","DELETE_REMINDER"))}function Ae(e,i){e&1&&(o(0,"th",35),m(1),l(2,"translate"),a()),e&2&&(r(),c(" ",p(2,1,"DOCUMENT")," "))}function Ve(e,i){if(e&1&&(o(0,"td",29),m(1),a()),e&2){let t=i.$implicit;r(),c(" ",t.documentName," ")}}function Ue(e,i){e&1&&(o(0,"th",35),m(1),l(2,"translate"),a()),e&2&&(r(),c(" ",p(2,1,"START_DATE")," "))}function ze(e,i){if(e&1&&(o(0,"td",29),m(1),l(2,"utcToLocalTime"),a()),e&2){let t=i.$implicit;r(),c(" ",S(2,1,t.startDate,"full")," ")}}function Qe(e,i){e&1&&(o(0,"th",35),m(1),l(2,"translate"),a()),e&2&&(r(),c(" ",p(2,1,"END_DATE")," "))}function Ye(e,i){if(e&1&&(o(0,"td",29),m(1),l(2,"utcToLocalTime"),a()),e&2){let t=i.$implicit;r(),c(" ",S(2,1,t.endDate,"full")," ")}}function Je(e,i){e&1&&(o(0,"th",35),m(1),l(2,"translate"),a()),e&2&&(r(),c(" ",p(2,1,"SUBJECT")," "))}function We(e,i){if(e&1&&(o(0,"td",29),m(1),l(2,"limitTo"),a()),e&2){let t=i.$implicit;r(),c(" ",S(2,1,t.subject,"100")," ")}}function Xe(e,i){e&1&&(o(0,"th",35),m(1),l(2,"translate"),a()),e&2&&(r(),c(" ",p(2,1,"MESSAGE")," "))}function Ge(e,i){if(e&1&&(o(0,"td",29),m(1),l(2,"limitTo"),a()),e&2){let t=i.$implicit;r(),c(" ",S(2,1,t.message,150)," ")}}function Ke(e,i){e&1&&(o(0,"th",35),m(1),l(2,"translate"),a()),e&2&&(r(),c(" ",p(2,1,"FREQUENCY")," "))}function Ze(e,i){if(e&1&&(o(0,"td",29),m(1),l(2,"frequency"),l(3,"translate"),a()),e&2){let t=i.$implicit;r(),c(" ",p(3,3,p(2,1,t.frequency))," ")}}function et(e,i){if(e&1&&(o(0,"td",36),R(1,"mat-paginator",37),a()),e&2){let t=g();r(),f("length",t.reminderResource.totalCount)("pageSize",t.reminderResource.pageSize)("pageSizeOptions",Q(3,He))}}function tt(e,i){e&1&&(o(0,"tr")(1,"td",38)(2,"div",39)(3,"b"),m(4),l(5,"translate"),a()()()()),e&2&&(r(4),c(" ",p(5,1,"NO_DATA_FOUND")))}function it(e,i){e&1&&R(0,"tr",40)}function nt(e,i){e&1&&R(0,"tr",41)}function rt(e,i){e&1&&R(0,"tr",42)}function ot(e,i){e&1&&(o(0,"div",27),R(1,"mat-progress-spinner",43),a())}var je=class e extends oe{constructor(t,n,s,d,qe){super();this.dialog=t;this.commonService=n;this.commonDialogService=s;this.toastrService=d;this.dialogRef=qe;this.reminderResource=new Ie,this.reminderResource.pageSize=10,this.reminderResource.orderBy="startDate desc"}dataSource;reminders=[];reminderFrequencies=[];displayedColumns=["action","documentName","startDate","endDate","subject","message","frequency"];footerToDisplayed=["footer"];isLoadingResults=!0;reminderResource;loading$;paginator;sort;_subjectFilter;_messageFilter;_frequencyFilter;filterObservable$=new j;get SubjectFilter(){return this._subjectFilter}set SubjectFilter(t){this._subjectFilter=t;let n=`subject:${t}`;this.filterObservable$.next(n)}set FrequencyFilter(t){t=="0"?this._frequencyFilter="0":this._frequencyFilter=t?t.toString():"";let n=`frequency:${this._frequencyFilter}`;this.filterObservable$.next(n)}get FrequencyFilter(){return this._frequencyFilter}get MessageFilter(){return this._messageFilter}set MessageFilter(t){this._messageFilter=t;let n=`message:${t}`;this.filterObservable$.next(n)}ngOnInit(){this.getReminderFrequency(),this.dataSource=new E(this.commonService),this.dataSource.loadData(this.reminderResource),this.sub$.sink=this.filterObservable$.pipe(k(1e3),H()).subscribe(t=>{this.reminderResource.skip=0;let n=t.split(":");n[0]==="subject"?this.reminderResource.subject=escape(n[1]):n[0]==="message"?this.reminderResource.message=n[1]:n[0]==="frequency"&&(this.reminderResource.frequency=n[1]),this.paginator.pageIndex=0,this.reminderResource.skip=0,this.dataSource.loadData(this.reminderResource)}),this.getResourceParameter()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.reminderResource.pageSize=t.pageSize,this.reminderResource.skip=t.skip,this.reminderResource.totalCount=t.totalCount)})}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=q(this.sort.sortChange,this.paginator.page).pipe(P(t=>{this.reminderResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.reminderResource.pageSize=this.paginator.pageSize,this.reminderResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.reminderResource)})).subscribe()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}closeDialog(){this.dialogRef.close()}deleteReminder(t){this.sub$.sink=this.commonDialogService.deleteConfirmtionDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(n=>{n&&(this.isLoadingResults=!0,this.commonService.deleteReminderCurrentUser(t.id??"").subscribe(()=>{this.isLoadingResults=!1,this.toastrService.success(this.translationService.getValue("REMINDER_DELETED_SUCCESSFULLY")),this.dataSource.loadData(this.reminderResource)},()=>this.isLoadingResults=!1))})}onDetail(t){this.dialog.open($e,{data:t.id,width:"80vw"})}static \u0275fac=function(n){return new(n||e)(b(W),b(se),b(Le),b(ae),b(J))};static \u0275cmp=B({type:e,selectors:[["app-reminder-list"]],viewQuery:function(n,s){if(n&1&&(M(L,5),M(I,5)),n&2){let d;F(d=w())&&(s.paginator=d.first),F(d=w())&&(s.sort=d.first)}},features:[A],decls:45,vars:13,consts:[[1,"d-flex"],[1,"me-auto","p-2"],[1,"mb-3","page-title"],[3,"code"],[1,"d-flex","justify-content-end","mb-2"],[1,"close-icon","text-danger","cursor-pointer",3,"click"],[1,"row"],[1,"col-sm-12"],[1,"table-responsive"],[1,"grid-height-reminder"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",3,"dataSource"],["matColumnDef","action"],["class","table-column-fix-250","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","documentName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","subject"],["matColumnDef","message"],["matColumnDef","frequency"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],[4,"matNoDataRow"],["class","grid-header-color","mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[1,"spinner-container"],["mat-header-cell","",1,"table-column-fix-250"],["mat-cell",""],["matMiniFab","","class","primary me-2","type","button",3,"click",4,"hasClaim"],["matMiniFab","","class","error","type","button",3,"click",4,"hasClaim"],["matMiniFab","","type","button",1,"primary","me-2",3,"click"],[1,"medium-icon","fs-5","align-middle"],["matMiniFab","","type","button",1,"error",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-footer-cell","","colspan","7"],[3,"length","pageSize","pageSizeOptions"],["colspan","7"],[1,"m-2"],["mat-header-row","",1,"grid-header-color"],["mat-row",""],["mat-footer-row",""],["mode","indeterminate","diameter","60","strokeWidth","5"]],template:function(n,s){if(n&1){let d=x();o(0,"mat-dialog-content")(1,"div",0)(2,"div",1)(3,"span",2),m(4),l(5,"translate"),R(6,"app-page-help-text",3),a()(),o(7,"div",4)(8,"mat-icon",5),y("click",function(){return v(d),D(s.closeDialog())}),m(9,"cancel"),a()()(),o(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"table",10),_(15,11),u(16,Oe,1,0,"th",12)(17,Ne,3,2,"td",13),h(),_(18,14),u(19,Ae,3,3,"th",15)(20,Ve,2,1,"td",13),h(),_(21,16),u(22,Ue,3,3,"th",15)(23,ze,3,4,"td",13),h(),_(24,17),u(25,Qe,3,3,"th",15)(26,Ye,3,4,"td",13),h(),_(27,18),u(28,Je,3,3,"th",15)(29,We,3,4,"td",13),h(),_(30,19),u(31,Xe,3,3,"th",15)(32,Ge,3,4,"td",13),h(),_(33,20),u(34,Ke,3,3,"th",15)(35,Ze,4,5,"td",13),h(),_(36,21),u(37,et,2,4,"td",22),h(),u(38,tt,6,3,"tr",23)(39,it,1,0,"tr",24)(40,nt,1,0,"tr",25)(41,rt,1,0,"tr",26),a()()()()(),z(42),l(43,"async"),V(44,ot,2,0,"div",27),a()}if(n&2){r(4),c(" ",p(5,9,"REMINDERS")," "),r(2),f("code","REMINDERS"),r(8),f("dataSource",s.dataSource),r(25),f("matHeaderRowDef",s.displayedColumns)("matHeaderRowDefSticky",!0),r(),f("matRowDefColumns",s.displayedColumns),r(),f("matFooterRowDef",s.footerToDisplayed)("matFooterRowDefSticky",!0);let d=p(43,11,s.dataSource.loading$);r(3),U(d?44:-1)}},dependencies:[ue,we,_e,Re,De,ge,he,ye,be,xe,Se,ve,Ce,Ee,Me,Te,Fe,L,I,le,G,X,ne,pe,te,ee,Z,K,de,ce,fe,ie,re,T,Y],encapsulation:2})};export{je as ReminderListComponent};
