<VirtualHost *:80>
    ServerName ouk-dms.topdev.co.ke
    DocumentRoot /var/www/html/OukDms/frontend/browser

    <Directory /var/www/html/OukDms/frontend/browser>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        RewriteEngine On
        # If an existing asset or directory is requested go to it as it is
        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
        RewriteRule ^ - [L]
        # If the requested resource doesn't exist, use index.html
        RewriteRule ^ /index.html
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/ouk-dms-frontend-error.log
    CustomLog ${APACHE_LOG_DIR}/ouk-dms-frontend-access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerName ouk-dms-api.topdev.co.ke
    ProxyPreserveHost On
    ProxyPass / http://localhost:5001/
    ProxyPassReverse / http://localhost:5001/

    ErrorLog ${APACHE_LOG_DIR}/ouk-dms-api-error.log
    CustomLog ${APACHE_LOG_DIR}/ouk-dms-api-access.log combined
</VirtualHost>
